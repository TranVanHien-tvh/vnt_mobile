{"remainingRequest":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\VNT Mobile\\vnt_mobile\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\VNT Mobile\\vnt_mobile\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\VNT Mobile\\vnt_mobile\\src\\components\\msTooltip\\components\\Popover.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\VNT Mobile\\vnt_mobile\\src\\components\\msTooltip\\components\\Popover.vue","mtime":1656597545913},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiRDovVk5UIE1vYmlsZS92bnRfbW9iaWxlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9WTlQgTW9iaWxlL3ZudF9tb2JpbGUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkQ6L1ZOVCBNb2JpbGUvdm50X21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IGRpcmVjdGl2ZSB9IGZyb20gJy4uL2RpcmVjdGl2ZXMvdi10b29sdGlwJzsKaW1wb3J0IFBvcHBlciBmcm9tICdwb3BwZXIuanMnOwppbXBvcnQgeyBSZXNpemVPYnNlcnZlciB9IGZyb20gJ3Z1ZS1yZXNpemUnOwppbXBvcnQgeyBzdXBwb3J0c1Bhc3NpdmUgfSBmcm9tICcuLi91dGlscyc7CgpmdW5jdGlvbiBnZXREZWZhdWx0KGtleSkgewogIHZhciB2YWx1ZSA9IGRpcmVjdGl2ZS5vcHRpb25zLnBvcG92ZXJba2V5XTsKCiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9uc1trZXldOwogIH0KCiAgcmV0dXJuIHZhbHVlOwp9Cgp2YXIgaXNJT1MgPSBmYWxzZTsKCmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJykgewogIGlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTsKfQoKdmFyIG9wZW5Qb3BvdmVycyA9IFtdOwoKdmFyIEVsZW1lbnQgPSBmdW5jdGlvbiBFbGVtZW50KCkge307CgppZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHsKICBFbGVtZW50ID0gd2luZG93LkVsZW1lbnQ7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVlBvcG92ZXInLAogIGNvbXBvbmVudHM6IHsKICAgIFJlc2l6ZU9ic2VydmVyOiBSZXNpemVPYnNlcnZlcgogIH0sCiAgcHJvcHM6IHsKICAgIG9wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIHBsYWNlbWVudDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0UGxhY2VtZW50Jyk7CiAgICAgIH0KICAgIH0sCiAgICBkZWxheTogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXIsIE9iamVjdF0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0RGVsYXknKTsKICAgICAgfQogICAgfSwKICAgIG9mZnNldDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gZ2V0RGVmYXVsdCgnZGVmYXVsdE9mZnNldCcpOwogICAgICB9CiAgICB9LAogICAgdHJpZ2dlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0VHJpZ2dlcicpOwogICAgICB9CiAgICB9LAogICAgY29udGFpbmVyOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE9iamVjdCwgRWxlbWVudCwgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0Q29udGFpbmVyJyk7CiAgICAgIH0KICAgIH0sCiAgICBib3VuZGFyaWVzRWxlbWVudDogewogICAgICB0eXBlOiBbU3RyaW5nLCBFbGVtZW50XSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRCb3VuZGFyaWVzRWxlbWVudCcpOwogICAgICB9CiAgICB9LAogICAgcG9wcGVyT3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBnZXREZWZhdWx0KCdkZWZhdWx0UG9wcGVyT3B0aW9ucycpOwogICAgICB9CiAgICB9LAogICAgcG9wb3ZlckNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGdldERlZmF1bHQoJ2RlZmF1bHRDbGFzcycpOwogICAgICB9CiAgICB9LAogICAgcG9wb3ZlckJhc2VDbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRCYXNlQ2xhc3M7CiAgICAgIH0KICAgIH0sCiAgICBwb3BvdmVySW5uZXJDbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRJbm5lckNsYXNzOwogICAgICB9CiAgICB9LAogICAgcG9wb3ZlcldyYXBwZXJDbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRXcmFwcGVyQ2xhc3M7CiAgICAgIH0KICAgIH0sCiAgICBwb3BvdmVyQXJyb3dDbGFzczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRBcnJvd0NsYXNzOwogICAgICB9CiAgICB9LAogICAgYXV0b0hpZGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZS5vcHRpb25zLnBvcG92ZXIuZGVmYXVsdEF1dG9IaWRlOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUmVzaXplOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBkaXJlY3RpdmUub3B0aW9ucy5wb3BvdmVyLmRlZmF1bHRIYW5kbGVSZXNpemU7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuR3JvdXA6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgb3BlbkNsYXNzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGRpcmVjdGl2ZS5vcHRpb25zLnBvcG92ZXIuZGVmYXVsdE9wZW5DbGFzczsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzT3BlbjogZmFsc2UsCiAgICAgIGlkOiBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgMTApCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNzc0NsYXNzOiBmdW5jdGlvbiBjc3NDbGFzcygpIHsKICAgICAgcmV0dXJuIF9kZWZpbmVQcm9wZXJ0eSh7fSwgdGhpcy5vcGVuQ2xhc3MsIHRoaXMuaXNPcGVuKTsKICAgIH0sCiAgICBwb3BvdmVySWQ6IGZ1bmN0aW9uIHBvcG92ZXJJZCgpIHsKICAgICAgcmV0dXJuICJwb3BvdmVyXyIuY29uY2F0KHRoaXMuaWQpOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4odmFsKSB7CiAgICAgIGlmICh2YWwpIHsKICAgICAgICB0aGlzLnNob3coKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfQogICAgfSwKICAgIGRpc2FibGVkOiBmdW5jdGlvbiBkaXNhYmxlZCh2YWwsIG9sZFZhbCkgewogICAgICBpZiAodmFsICE9PSBvbGRWYWwpIHsKICAgICAgICBpZiAodmFsKSB7CiAgICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3BlbikgewogICAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgY29udGFpbmVyOiBmdW5jdGlvbiBjb250YWluZXIodmFsKSB7CiAgICAgIGlmICh0aGlzLmlzT3BlbiAmJiB0aGlzLnBvcHBlckluc3RhbmNlKSB7CiAgICAgICAgdmFyIHBvcG92ZXJOb2RlID0gdGhpcy4kcmVmcy5wb3BvdmVyOwogICAgICAgIHZhciByZWZlcmVuY2UgPSB0aGlzLiRyZWZzLnRyaWdnZXI7CiAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuJF9maW5kQ29udGFpbmVyKHRoaXMuY29udGFpbmVyLCByZWZlcmVuY2UpOwoKICAgICAgICBpZiAoIWNvbnRhaW5lcikgewogICAgICAgICAgY29uc29sZS53YXJuKCdObyBjb250YWluZXIgZm9yIHBvcG92ZXInLCB0aGlzKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwb3BvdmVyTm9kZSk7CiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZS5zY2hlZHVsZVVwZGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgdHJpZ2dlcjogZnVuY3Rpb24gdHJpZ2dlcih2YWwpIHsKICAgICAgdGhpcy4kX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7CiAgICAgIHRoaXMuJF9hZGRFdmVudExpc3RlbmVycygpOwogICAgfSwKICAgIHBsYWNlbWVudDogZnVuY3Rpb24gcGxhY2VtZW50KHZhbCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kX3VwZGF0ZVBvcHBlcihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMucG9wcGVySW5zdGFuY2Uub3B0aW9ucy5wbGFjZW1lbnQgPSB2YWw7CiAgICAgIH0pOwogICAgfSwKICAgIG9mZnNldDogJyRfcmVzdGFydFBvcHBlcicsCiAgICBib3VuZGFyaWVzRWxlbWVudDogJyRfcmVzdGFydFBvcHBlcicsCiAgICBwb3BwZXJPcHRpb25zOiB7CiAgICAgIGhhbmRsZXI6ICckX3Jlc3RhcnRQb3BwZXInLAogICAgICBkZWVwOiB0cnVlCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy4kX2lzRGlzcG9zZWQgPSBmYWxzZTsKICAgIHRoaXMuJF9tb3VudGVkID0gZmFsc2U7CiAgICB0aGlzLiRfZXZlbnRzID0gW107CiAgICB0aGlzLiRfcHJldmVudE9wZW4gPSBmYWxzZTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgcG9wb3Zlck5vZGUgPSB0aGlzLiRyZWZzLnBvcG92ZXI7CiAgICBwb3BvdmVyTm9kZS5wYXJlbnROb2RlICYmIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQocG9wb3Zlck5vZGUpOwogICAgdGhpcy4kX2luaXQoKTsKCiAgICBpZiAodGhpcy5vcGVuKSB7CiAgICAgIHRoaXMuc2hvdygpOwogICAgfQogIH0sCiAgZGVhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGRlYWN0aXZhdGVkKCkgewogICAgdGhpcy5oaWRlKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5kaXNwb3NlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBzaG93OiBmdW5jdGlvbiBzaG93KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBfcmVmMiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sCiAgICAgICAgICBldmVudCA9IF9yZWYyLmV2ZW50LAogICAgICAgICAgX3JlZjIkc2tpcERlbGF5ID0gX3JlZjIuc2tpcERlbGF5LAogICAgICAgICAgc2tpcERlbGF5ID0gX3JlZjIkc2tpcERlbGF5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJHNraXBEZWxheSwKICAgICAgICAgIF9yZWYyJGZvcmNlID0gX3JlZjIuZm9yY2UsCiAgICAgICAgICBmb3JjZSA9IF9yZWYyJGZvcmNlID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJGZvcmNlOwoKICAgICAgaWYgKGZvcmNlIHx8ICF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy4kX3NjaGVkdWxlU2hvdyhldmVudCk7CiAgICAgICAgdGhpcy4kZW1pdCgnc2hvdycpOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KCd1cGRhdGU6b3BlbicsIHRydWUpOwogICAgICB0aGlzLiRfYmVpbmdTaG93ZWQgPSB0cnVlOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi4kX2JlaW5nU2hvd2VkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgIHZhciBfcmVmMyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge30sCiAgICAgICAgICBldmVudCA9IF9yZWYzLmV2ZW50LAogICAgICAgICAgX3JlZjMkc2tpcERlbGF5ID0gX3JlZjMuc2tpcERlbGF5LAogICAgICAgICAgc2tpcERlbGF5ID0gX3JlZjMkc2tpcERlbGF5ID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYzJHNraXBEZWxheTsKCiAgICAgIHRoaXMuJF9zY2hlZHVsZUhpZGUoZXZlbnQpOwogICAgICB0aGlzLiRlbWl0KCdoaWRlJyk7CiAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTpvcGVuJywgZmFsc2UpOwogICAgfSwKICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7CiAgICAgIHRoaXMuJF9pc0Rpc3Bvc2VkID0gdHJ1ZTsKICAgICAgdGhpcy4kX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7CiAgICAgIHRoaXMuaGlkZSh7CiAgICAgICAgc2tpcERlbGF5OiB0cnVlCiAgICAgIH0pOwoKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRlc3Ryb3koKTsgLy8gZGVzdHJveSB0b29sdGlwTm9kZSBpZiByZW1vdmVPbkRlc3Ryb3kgaXMgbm90IHNldCwgYXMgcG9wcGVySW5zdGFuY2UuZGVzdHJveSgpIGFscmVhZHkgcmVtb3ZlcyB0aGUgZWxlbWVudAoKICAgICAgICBpZiAoIXRoaXMucG9wcGVySW5zdGFuY2Uub3B0aW9ucy5yZW1vdmVPbkRlc3Ryb3kpIHsKICAgICAgICAgIHZhciBwb3BvdmVyTm9kZSA9IHRoaXMuJHJlZnMucG9wb3ZlcjsKICAgICAgICAgIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUgJiYgcG9wb3Zlck5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3BvdmVyTm9kZSk7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLiRfbW91bnRlZCA9IGZhbHNlOwogICAgICB0aGlzLnBvcHBlckluc3RhbmNlID0gbnVsbDsKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgICAgdGhpcy4kZW1pdCgnZGlzcG9zZScpOwogICAgfSwKICAgICRfaW5pdDogZnVuY3Rpb24gJF9pbml0KCkgewogICAgICBpZiAodGhpcy50cmlnZ2VyLmluZGV4T2YoJ21hbnVhbCcpID09PSAtMSkgewogICAgICAgIHRoaXMuJF9hZGRFdmVudExpc3RlbmVycygpOwogICAgICB9CiAgICB9LAogICAgJF9zaG93OiBmdW5jdGlvbiAkX3Nob3coKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdmFyIHJlZmVyZW5jZSA9IHRoaXMuJHJlZnMudHJpZ2dlcjsKICAgICAgdmFyIHBvcG92ZXJOb2RlID0gdGhpcy4kcmVmcy5wb3BvdmVyOwogICAgICBjbGVhclRpbWVvdXQodGhpcy4kX2Rpc3Bvc2VUaW1lcik7IC8vIEFscmVhZHkgb3BlbgoKICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIFBvcHBlciBpcyBhbHJlYWR5IGluaXRpYWxpemVkCgoKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7CiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZS5lbmFibGVFdmVudExpc3RlbmVycygpOwogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2Uuc2NoZWR1bGVVcGRhdGUoKTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLiRfbW91bnRlZCkgewogICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLiRfZmluZENvbnRhaW5lcih0aGlzLmNvbnRhaW5lciwgcmVmZXJlbmNlKTsKCiAgICAgICAgaWYgKCFjb250YWluZXIpIHsKICAgICAgICAgIGNvbnNvbGUud2FybignTm8gY29udGFpbmVyIGZvciBwb3BvdmVyJywgdGhpcyk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9wb3Zlck5vZGUpOwogICAgICAgIHRoaXMuJF9tb3VudGVkID0gdHJ1ZTsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnBvcHBlckluc3RhbmNlKSB7CiAgICAgICAgdmFyIHBvcHBlck9wdGlvbnMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMucG9wcGVyT3B0aW9ucyksIHt9LCB7CiAgICAgICAgICBwbGFjZW1lbnQ6IHRoaXMucGxhY2VtZW50CiAgICAgICAgfSk7CgogICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyksIHt9LCB7CiAgICAgICAgICBhcnJvdzogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyAmJiBwb3BwZXJPcHRpb25zLm1vZGlmaWVycy5hcnJvdyksIHt9LCB7CiAgICAgICAgICAgIGVsZW1lbnQ6IHRoaXMuJHJlZnMuYXJyb3cKICAgICAgICAgIH0pCiAgICAgICAgfSk7CgogICAgICAgIGlmICh0aGlzLm9mZnNldCkgewogICAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuJF9nZXRPZmZzZXQoKTsKICAgICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLm9mZnNldCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcG9wcGVyT3B0aW9ucy5tb2RpZmllcnMgJiYgcG9wcGVyT3B0aW9ucy5tb2RpZmllcnMub2Zmc2V0KSwge30sIHsKICAgICAgICAgICAgb2Zmc2V0OiBvZmZzZXQKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKHRoaXMuYm91bmRhcmllc0VsZW1lbnQpIHsKICAgICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcG9wcGVyT3B0aW9ucy5tb2RpZmllcnMgJiYgcG9wcGVyT3B0aW9ucy5tb2RpZmllcnMucHJldmVudE92ZXJmbG93KSwge30sIHsKICAgICAgICAgICAgYm91bmRhcmllc0VsZW1lbnQ6IHRoaXMuYm91bmRhcmllc0VsZW1lbnQKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZSA9IG5ldyBQb3BwZXIocmVmZXJlbmNlLCBwb3BvdmVyTm9kZSwgcG9wcGVyT3B0aW9ucyk7IC8vIEZpeCBwb3NpdGlvbgoKICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzMy5oaWRkZW4pIHsKICAgICAgICAgICAgX3RoaXMzLmhpZGRlbiA9IGZhbHNlOwoKICAgICAgICAgICAgX3RoaXMzLiRfaGlkZSgpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICghX3RoaXMzLiRfaXNEaXNwb3NlZCAmJiBfdGhpczMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICAgICAgX3RoaXMzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7IC8vIFNob3cgdGhlIHRvb2x0aXAKCgogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChfdGhpczMuaGlkZGVuKSB7CiAgICAgICAgICAgICAgICBfdGhpczMuaGlkZGVuID0gZmFsc2U7CgogICAgICAgICAgICAgICAgX3RoaXMzLiRfaGlkZSgpOwoKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGlmICghX3RoaXMzLiRfaXNEaXNwb3NlZCkgewogICAgICAgICAgICAgICAgX3RoaXMzLmlzT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIF90aGlzMy5kaXNwb3NlKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy5kaXNwb3NlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHZhciBvcGVuR3JvdXAgPSB0aGlzLm9wZW5Hcm91cDsKCiAgICAgIGlmIChvcGVuR3JvdXApIHsKICAgICAgICB2YXIgcG9wb3ZlcjsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGVuUG9wb3ZlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIHBvcG92ZXIgPSBvcGVuUG9wb3ZlcnNbaV07CgogICAgICAgICAgaWYgKHBvcG92ZXIub3Blbkdyb3VwICE9PSBvcGVuR3JvdXApIHsKICAgICAgICAgICAgcG9wb3Zlci5oaWRlKCk7CiAgICAgICAgICAgIHBvcG92ZXIuJGVtaXQoJ2Nsb3NlLWdyb3VwJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBvcGVuUG9wb3ZlcnMucHVzaCh0aGlzKTsKICAgICAgdGhpcy4kZW1pdCgnYXBwbHktc2hvdycpOwogICAgfSwKICAgICRfaGlkZTogZnVuY3Rpb24gJF9oaWRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIC8vIEFscmVhZHkgaGlkZGVuCiAgICAgIGlmICghdGhpcy5pc09wZW4pIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBpbmRleCA9IG9wZW5Qb3BvdmVycy5pbmRleE9mKHRoaXMpOwoKICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgIG9wZW5Qb3BvdmVycy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICB9CgogICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOwoKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLmRpc2FibGVFdmVudExpc3RlbmVycygpOwogICAgICB9CgogICAgICBjbGVhclRpbWVvdXQodGhpcy4kX2Rpc3Bvc2VUaW1lcik7CiAgICAgIHZhciBkaXNwb3NlVGltZSA9IGRpcmVjdGl2ZS5vcHRpb25zLnBvcG92ZXIuZGlzcG9zZVRpbWVvdXQgfHwgZGlyZWN0aXZlLm9wdGlvbnMuZGlzcG9zZVRpbWVvdXQ7CgogICAgICBpZiAoZGlzcG9zZVRpbWUgIT09IG51bGwpIHsKICAgICAgICB0aGlzLiRfZGlzcG9zZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgcG9wb3Zlck5vZGUgPSBfdGhpczQuJHJlZnMucG9wb3ZlcjsKCiAgICAgICAgICBpZiAocG9wb3Zlck5vZGUpIHsKICAgICAgICAgICAgLy8gRG9uJ3QgcmVtb3ZlIHBvcHBlciBpbnN0YW5jZSwganVzdCB0aGUgSFRNTCBlbGVtZW50CiAgICAgICAgICAgIHBvcG92ZXJOb2RlLnBhcmVudE5vZGUgJiYgcG9wb3Zlck5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChwb3BvdmVyTm9kZSk7CiAgICAgICAgICAgIF90aGlzNC4kX21vdW50ZWQgPSBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9LCBkaXNwb3NlVGltZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2FwcGx5LWhpZGUnKTsKICAgIH0sCiAgICAkX2ZpbmRDb250YWluZXI6IGZ1bmN0aW9uICRfZmluZENvbnRhaW5lcihjb250YWluZXIsIHJlZmVyZW5jZSkgewogICAgICAvLyBpZiBjb250YWluZXIgaXMgYSBxdWVyeSwgZ2V0IHRoZSByZWxhdGl2ZSBlbGVtZW50CiAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykgewogICAgICAgIGNvbnRhaW5lciA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7CiAgICAgIH0gZWxzZSBpZiAoY29udGFpbmVyID09PSBmYWxzZSkgewogICAgICAgIC8vIGlmIGNvbnRhaW5lciBpcyBgZmFsc2VgLCBzZXQgaXQgdG8gcmVmZXJlbmNlIHBhcmVudAogICAgICAgIGNvbnRhaW5lciA9IHJlZmVyZW5jZS5wYXJlbnROb2RlOwogICAgICB9CgogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfSwKICAgICRfZ2V0T2Zmc2V0OiBmdW5jdGlvbiAkX2dldE9mZnNldCgpIHsKICAgICAgdmFyIHR5cGVvZk9mZnNldCA9IF90eXBlb2YodGhpcy5vZmZzZXQpOwoKICAgICAgdmFyIG9mZnNldCA9IHRoaXMub2Zmc2V0OyAvLyBPbmUgdmFsdWUgLT4gc3dpdGNoCgogICAgICBpZiAodHlwZW9mT2Zmc2V0ID09PSAnbnVtYmVyJyB8fCB0eXBlb2ZPZmZzZXQgPT09ICdzdHJpbmcnICYmIG9mZnNldC5pbmRleE9mKCcsJykgPT09IC0xKSB7CiAgICAgICAgb2Zmc2V0ID0gIjAsICIuY29uY2F0KG9mZnNldCk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvZmZzZXQ7CiAgICB9LAogICAgJF9hZGRFdmVudExpc3RlbmVyczogZnVuY3Rpb24gJF9hZGRFdmVudExpc3RlbmVycygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgcmVmZXJlbmNlID0gdGhpcy4kcmVmcy50cmlnZ2VyOwogICAgICB2YXIgZGlyZWN0RXZlbnRzID0gW107CiAgICAgIHZhciBvcHBvc2l0ZUV2ZW50cyA9IFtdOwogICAgICB2YXIgZXZlbnRzID0gdHlwZW9mIHRoaXMudHJpZ2dlciA9PT0gJ3N0cmluZycgPyB0aGlzLnRyaWdnZXIuc3BsaXQoJyAnKS5maWx0ZXIoZnVuY3Rpb24gKHRyaWdnZXIpIHsKICAgICAgICByZXR1cm4gWydjbGljaycsICdob3ZlcicsICdmb2N1cyddLmluZGV4T2YodHJpZ2dlcikgIT09IC0xOwogICAgICB9KSA6IFtdOwogICAgICBldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICBzd2l0Y2ggKGV2ZW50KSB7CiAgICAgICAgICBjYXNlICdob3Zlcic6CiAgICAgICAgICAgIGRpcmVjdEV2ZW50cy5wdXNoKCdtb3VzZWVudGVyJyk7CiAgICAgICAgICAgIG9wcG9zaXRlRXZlbnRzLnB1c2goJ21vdXNlbGVhdmUnKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnZm9jdXMnOgogICAgICAgICAgICBkaXJlY3RFdmVudHMucHVzaCgnZm9jdXMnKTsKICAgICAgICAgICAgb3Bwb3NpdGVFdmVudHMucHVzaCgnYmx1cicpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICdjbGljayc6CiAgICAgICAgICAgIGRpcmVjdEV2ZW50cy5wdXNoKCdjbGljaycpOwogICAgICAgICAgICBvcHBvc2l0ZUV2ZW50cy5wdXNoKCdjbGljaycpOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0pOyAvLyBzY2hlZHVsZSBzaG93IHRvb2x0aXAKCiAgICAgIGRpcmVjdEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHZhciBmdW5jID0gZnVuY3Rpb24gZnVuYyhldmVudCkgewogICAgICAgICAgaWYgKF90aGlzNS5pc09wZW4pIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIGV2ZW50LnVzZWRCeVRvb2x0aXAgPSB0cnVlOwogICAgICAgICAgIV90aGlzNS4kX3ByZXZlbnRPcGVuICYmIF90aGlzNS5zaG93KHsKICAgICAgICAgICAgZXZlbnQ6IGV2ZW50CiAgICAgICAgICB9KTsKICAgICAgICAgIF90aGlzNS5oaWRkZW4gPSBmYWxzZTsKICAgICAgICB9OwoKICAgICAgICBfdGhpczUuJF9ldmVudHMucHVzaCh7CiAgICAgICAgICBldmVudDogZXZlbnQsCiAgICAgICAgICBmdW5jOiBmdW5jCiAgICAgICAgfSk7CgogICAgICAgIHJlZmVyZW5jZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jKTsKICAgICAgfSk7IC8vIHNjaGVkdWxlIGhpZGUgdG9vbHRpcAoKICAgICAgb3Bwb3NpdGVFdmVudHMuZm9yRWFjaChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZnVuYyA9IGZ1bmN0aW9uIGZ1bmMoZXZlbnQpIHsKICAgICAgICAgIGlmIChldmVudC51c2VkQnlUb29sdGlwKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczUuaGlkZSh7CiAgICAgICAgICAgIGV2ZW50OiBldmVudAogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXM1LmhpZGRlbiA9IHRydWU7CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXM1LiRfZXZlbnRzLnB1c2goewogICAgICAgICAgZXZlbnQ6IGV2ZW50LAogICAgICAgICAgZnVuYzogZnVuYwogICAgICAgIH0pOwoKICAgICAgICByZWZlcmVuY2UuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOwogICAgfSwKICAgICRfc2NoZWR1bGVTaG93OiBmdW5jdGlvbiAkX3NjaGVkdWxlU2hvdygpIHsKICAgICAgdmFyIGV2ZW50ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiBudWxsOwogICAgICB2YXIgc2tpcERlbGF5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuJF9zY2hlZHVsZVRpbWVyKTsKCiAgICAgIGlmIChza2lwRGVsYXkpIHsKICAgICAgICB0aGlzLiRfc2hvdygpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRlZmF1bHRzIHRvIDAKICAgICAgICB2YXIgY29tcHV0ZWREZWxheSA9IHBhcnNlSW50KHRoaXMuZGVsYXkgJiYgdGhpcy5kZWxheS5zaG93IHx8IHRoaXMuZGVsYXkgfHwgMCk7CiAgICAgICAgdGhpcy4kX3NjaGVkdWxlVGltZXIgPSBzZXRUaW1lb3V0KHRoaXMuJF9zaG93LmJpbmQodGhpcyksIGNvbXB1dGVkRGVsYXkpOwogICAgICB9CiAgICB9LAogICAgJF9zY2hlZHVsZUhpZGU6IGZ1bmN0aW9uICRfc2NoZWR1bGVIaWRlKCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbnVsbDsKICAgICAgdmFyIHNraXBEZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLiRfc2NoZWR1bGVUaW1lcik7CgogICAgICBpZiAoc2tpcERlbGF5KSB7CiAgICAgICAgdGhpcy4kX2hpZGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBkZWZhdWx0cyB0byAwCiAgICAgICAgdmFyIGNvbXB1dGVkRGVsYXkgPSBwYXJzZUludCh0aGlzLmRlbGF5ICYmIHRoaXMuZGVsYXkuaGlkZSB8fCB0aGlzLmRlbGF5IHx8IDApOwogICAgICAgIHRoaXMuJF9zY2hlZHVsZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoIV90aGlzNi5pc09wZW4pIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfSAvLyBpZiB3ZSBhcmUgaGlkaW5nIGJlY2F1c2Ugb2YgYSBtb3VzZWxlYXZlLCB3ZSBtdXN0IGNoZWNrIHRoYXQgdGhlIG5ldwogICAgICAgICAgLy8gcmVmZXJlbmNlIGlzbid0IHRoZSB0b29sdGlwLCBiZWNhdXNlIGluIHRoaXMgY2FzZSB3ZSBkb24ndCB3YW50IHRvIGhpZGUgaXQKCgogICAgICAgICAgaWYgKGV2ZW50ICYmIGV2ZW50LnR5cGUgPT09ICdtb3VzZWxlYXZlJykgewogICAgICAgICAgICB2YXIgaXNTZXQgPSBfdGhpczYuJF9zZXRUb29sdGlwTm9kZUV2ZW50KGV2ZW50KTsgLy8gaWYgd2Ugc2V0IHRoZSBuZXcgZXZlbnQsIGRvbid0IGhpZGUgdGhlIHRvb2x0aXAgeWV0CiAgICAgICAgICAgIC8vIHRoZSBuZXcgZXZlbnQgd2lsbCB0YWtlIGNhcmUgdG8gaGlkZSBpdCBpZiBuZWNlc3NhcnkKCgogICAgICAgICAgICBpZiAoaXNTZXQpIHsKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczYuJF9oaWRlKCk7CiAgICAgICAgfSwgY29tcHV0ZWREZWxheSk7CiAgICAgIH0KICAgIH0sCiAgICAkX3NldFRvb2x0aXBOb2RlRXZlbnQ6IGZ1bmN0aW9uICRfc2V0VG9vbHRpcE5vZGVFdmVudChldmVudCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHZhciByZWZlcmVuY2UgPSB0aGlzLiRyZWZzLnRyaWdnZXI7CiAgICAgIHZhciBwb3BvdmVyTm9kZSA9IHRoaXMuJHJlZnMucG9wb3ZlcjsKICAgICAgdmFyIHJlbGF0ZWRyZWZlcmVuY2UgPSBldmVudC5yZWxhdGVkcmVmZXJlbmNlIHx8IGV2ZW50LnRvRWxlbWVudCB8fCBldmVudC5yZWxhdGVkVGFyZ2V0OwoKICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24gY2FsbGJhY2soZXZlbnQyKSB7CiAgICAgICAgdmFyIHJlbGF0ZWRyZWZlcmVuY2UyID0gZXZlbnQyLnJlbGF0ZWRyZWZlcmVuY2UgfHwgZXZlbnQyLnRvRWxlbWVudCB8fCBldmVudDIucmVsYXRlZFRhcmdldDsgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGFmdGVyIGNhbGwKCiAgICAgICAgcG9wb3Zlck5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudC50eXBlLCBjYWxsYmFjayk7IC8vIElmIHRoZSBuZXcgcmVmZXJlbmNlIGlzIG5vdCB0aGUgcmVmZXJlbmNlIGVsZW1lbnQKCiAgICAgICAgaWYgKCFyZWZlcmVuY2UuY29udGFpbnMocmVsYXRlZHJlZmVyZW5jZTIpKSB7CiAgICAgICAgICAvLyBTY2hlZHVsZSB0byBoaWRlIHRvb2x0aXAKICAgICAgICAgIF90aGlzNy5oaWRlKHsKICAgICAgICAgICAgZXZlbnQ6IGV2ZW50MgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHBvcG92ZXJOb2RlLmNvbnRhaW5zKHJlbGF0ZWRyZWZlcmVuY2UpKSB7CiAgICAgICAgLy8gbGlzdGVuIHRvIG1vdXNlbGVhdmUgb24gdGhlIHRvb2x0aXAgZWxlbWVudCB0byBiZSBhYmxlIHRvIGhpZGUgdGhlIHRvb2x0aXAKICAgICAgICBwb3BvdmVyTm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LnR5cGUsIGNhbGxiYWNrKTsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgICRfcmVtb3ZlRXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uICRfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciByZWZlcmVuY2UgPSB0aGlzLiRyZWZzLnRyaWdnZXI7CiAgICAgIHRoaXMuJF9ldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjQpIHsKICAgICAgICB2YXIgZnVuYyA9IF9yZWY0LmZ1bmMsCiAgICAgICAgICAgIGV2ZW50ID0gX3JlZjQuZXZlbnQ7CiAgICAgICAgcmVmZXJlbmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmMpOwogICAgICB9KTsKICAgICAgdGhpcy4kX2V2ZW50cyA9IFtdOwogICAgfSwKICAgICRfdXBkYXRlUG9wcGVyOiBmdW5jdGlvbiAkX3VwZGF0ZVBvcHBlcihjYikgewogICAgICBpZiAodGhpcy5wb3BwZXJJbnN0YW5jZSkgewogICAgICAgIGNiKCk7CiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB0aGlzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICAkX3Jlc3RhcnRQb3BwZXI6IGZ1bmN0aW9uICRfcmVzdGFydFBvcHBlcigpIHsKICAgICAgaWYgKHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB2YXIgaXNPcGVuID0gdGhpcy5pc09wZW47CiAgICAgICAgdGhpcy5kaXNwb3NlKCk7CiAgICAgICAgdGhpcy4kX2lzRGlzcG9zZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLiRfaW5pdCgpOwoKICAgICAgICBpZiAoaXNPcGVuKSB7CiAgICAgICAgICB0aGlzLnNob3coewogICAgICAgICAgICBza2lwRGVsYXk6IHRydWUsCiAgICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAkX2hhbmRsZUdsb2JhbENsb3NlOiBmdW5jdGlvbiAkX2hhbmRsZUdsb2JhbENsb3NlKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgdmFyIHRvdWNoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgaWYgKHRoaXMuJF9iZWluZ1Nob3dlZCkgcmV0dXJuOwogICAgICB0aGlzLmhpZGUoewogICAgICAgIGV2ZW50OiBldmVudAogICAgICB9KTsKCiAgICAgIGlmIChldmVudC5jbG9zZVBvcG92ZXIpIHsKICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZS1kaXJlY3RpdmUnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCdhdXRvLWhpZGUnKTsKICAgICAgfQoKICAgICAgaWYgKHRvdWNoKSB7CiAgICAgICAgdGhpcy4kX3ByZXZlbnRPcGVuID0gdHJ1ZTsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzOC4kX3ByZXZlbnRPcGVuID0gZmFsc2U7CiAgICAgICAgfSwgMzAwKTsKICAgICAgfQogICAgfSwKICAgICRfaGFuZGxlUmVzaXplOiBmdW5jdGlvbiAkX2hhbmRsZVJlc2l6ZSgpIHsKICAgICAgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLnNjaGVkdWxlVXBkYXRlKCk7CiAgICAgICAgdGhpcy4kZW1pdCgncmVzaXplJyk7CiAgICAgIH0KICAgIH0KICB9Cn07CgppZiAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgewogIGlmIChpc0lPUykgewogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBoYW5kbGVHbG9iYWxUb3VjaGVuZCwgc3VwcG9ydHNQYXNzaXZlID8gewogICAgICBwYXNzaXZlOiB0cnVlLAogICAgICBjYXB0dXJlOiB0cnVlCiAgICB9IDogdHJ1ZSk7CiAgfSBlbHNlIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZUdsb2JhbENsaWNrLCB0cnVlKTsKICB9Cn0KCmZ1bmN0aW9uIGhhbmRsZUdsb2JhbENsaWNrKGV2ZW50KSB7CiAgaGFuZGxlR2xvYmFsQ2xvc2UoZXZlbnQpOwp9CgpmdW5jdGlvbiBoYW5kbGVHbG9iYWxUb3VjaGVuZChldmVudCkgewogIGhhbmRsZUdsb2JhbENsb3NlKGV2ZW50LCB0cnVlKTsKfQoKZnVuY3Rpb24gaGFuZGxlR2xvYmFsQ2xvc2UoZXZlbnQpIHsKICB2YXIgdG91Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlOwoKICB2YXIgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7CiAgICB2YXIgcG9wb3ZlciA9IG9wZW5Qb3BvdmVyc1tpXTsKCiAgICBpZiAocG9wb3Zlci4kcmVmcy5wb3BvdmVyKSB7CiAgICAgIHZhciBjb250YWlucyA9IHBvcG92ZXIuJHJlZnMucG9wb3Zlci5jb250YWlucyhldmVudC50YXJnZXQpOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChldmVudC5jbG9zZUFsbFBvcG92ZXIgfHwgZXZlbnQuY2xvc2VQb3BvdmVyICYmIGNvbnRhaW5zIHx8IHBvcG92ZXIuYXV0b0hpZGUgJiYgIWNvbnRhaW5zKSB7CiAgICAgICAgICBwb3BvdmVyLiRfaGFuZGxlR2xvYmFsQ2xvc2UoZXZlbnQsIHRvdWNoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH07CgogIC8vIERlbGF5IHNvIHRoYXQgY2xvc2UgZGlyZWN0aXZlIGhhcyB0aW1lIHRvIHNldCB2YWx1ZXMKICBmb3IgKHZhciBpID0gMDsgaSA8IG9wZW5Qb3BvdmVycy5sZW5ndGg7IGkrKykgewogICAgX2xvb3AoaSk7CiAgfQp9"},null]}