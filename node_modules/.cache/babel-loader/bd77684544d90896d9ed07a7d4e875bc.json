{"remainingRequest":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\babel-loader\\lib\\index.js!D:\\VNT Mobile\\vnt_mobile\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VNT Mobile\\vnt_mobile\\src\\views\\base\\BaseListPopup.js","dependencies":[{"path":"D:\\VNT Mobile\\vnt_mobile\\src\\views\\base\\BaseListPopup.js","mtime":1666515033342},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\VNT Mobile\\vnt_mobile\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1ZOVCBNb2JpbGUvdm50X21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIkQ6L1ZOVCBNb2JpbGUvdm50X21vYmlsZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IEJhc2VMaXN0IGZyb20gIkAvdmlld3MvYmFzZS9CYXNlTGlzdCI7CmltcG9ydCB7IHBlcm1pc3Npb24gfSBmcm9tICJAL21peGlucy9jb21tb24vcGVybWlzc2lvbiI7CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IE1vZHVsZUxheW91dFRlbXBsYXRlLCBNb2R1bGVDb250ZXh0LCBNb2R1bGVPcmdhbml6YXRpb24gfSBmcm9tICJAL3N0b3Jlcy9tb2R1bGUtY29uc3QiOyAvLyBpbXBvcnQgZXhwb3J0QXBpIGZyb20gIkAvYXBpcy9leHBvcnRBUEkiOwoKaW1wb3J0IE1TSnNvbiBmcm9tICJAL2NvbW1vbnMvanNvbiI7CmltcG9ydCB7IHNob3J0a2V5U3RhdHVzYmFyIH0gZnJvbSAiQC9taXhpbnMvY29tbW9uL3Nob3J0a2V5U3RhdHVzYmFyIjsKaW1wb3J0IHBvcHVwVXRpbCBmcm9tICJAL2NvbW1vbnMvcG9wdXBVdGlsIjsKaW1wb3J0IGNvbW1vbkZuIGZyb20gIkAvY29tbW9ucy9jb21tb25GdW5jdGlvbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBleHRlbmRzOiBCYXNlTGlzdCwKICBuYW1lOiAiQmFzZUxpc3RQb3B1cCIsCiAgbWl4aW5zOiBbcGVybWlzc2lvbiwgc2hvcnRrZXlTdGF0dXNiYXJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvKioNCiAgICAgICAqIEFjdGlvbiBj4bunYSB04burbmcgYuG6o24gZ2hpIGtoaSBhY3RpdmUNCiAgICAgICAqLwogICAgICByb3dBY3Rpb25zOiBbXSwKCiAgICAgIC8qKg0KICAgICAgICogVMOqbiBrZXkgbeG6q3UNCiAgICAgICAqLwogICAgICBsYXlvdXRUYWc6IG51bGwsCgogICAgICAvKioNCiAgICAgICAqIEPDoWMgYWN0aW9uIGtoaSBjaOG7jW4gbmhp4buBdQ0KICAgICAgICovCiAgICAgIGFjdGlvbk11bHRpOiBbXSwKCiAgICAgIC8qKg0KICAgICAgICogcmVmbmFtZSBjb250cm9sIGhp4buDbiB0aOG7iyBhY3Rpb24ga2hpIGNo4buNbiBuaGnhu4F1IGLhuqNuIGdoaQ0KICAgICAgICovCiAgICAgIGFjdGlvbk11dGlsUmVmOiAiYWN0aW9uTXVsdGkiLAoKICAgICAgLyoqDQogICAgICAgKiByZWZuYW1lIGNvbnRyb2wgaGnhu4NuIHRo4buLIGFjdGlvbiBraGkgY2jhu41uIG5oaeG7gXUgYuG6o24gZ2hpICggbcOgbiBow6xuaCB0byBoxqFuIDEyMDApDQogICAgICAgKi8KICAgICAgYWN0aW9uTXV0aWxSZWZCaWdTY3JlZW46ICJhY3Rpb25NdWx0aUJpZ1NjcmVlbiIsCiAgICAgIGxheW91dDoge30sCiAgICAgIHRpdGxlOiAiIiwKCiAgICAgIC8qKg0KICAgICAgICogY8OzIHNob3cgdOG6pXQgY+G6oyBpY29uIGZpbHRlciBoZWFkZXIgZ3JpZCBsw6puIGsNCiAgICAgICAqLwogICAgICBzaG93QWxsSWNvbkZpbHRlcjogZmFsc2UsCgogICAgICAvKioNCiAgICAgICAqIFNob3cgZmlsdGVyIGJveA0KICAgICAgICovCiAgICAgIGlzU2hvd0ZpbHRlcjogZmFsc2UsCgogICAgICAvKioNCiAgICAgICAqIFNob3cgbW9yZSBhY3Rpb24gYm94DQogICAgICAgKi8KICAgICAgaXNTaG93QWN0aW9uR3JvdXA6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKE1vZHVsZUNvbnRleHQsIFsiQ29udGV4dCJdKSksIG1hcEdldHRlcnMoewogICAgb3JnczogTW9kdWxlT3JnYW5pemF0aW9uICsgIi90cmVlIgogIH0pKSwge30sIHsKICAgIC8qKg0KICAgICAqIMSQ4buRaSB0xrDhu6NuZyBzdGF0ZSBj4bunYSBzdG9yZQ0KICAgICAqLwogICAgc3RvcmVTdGF0ZTogZnVuY3Rpb24gc3RvcmVTdGF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlW3RoaXMubW9kdWxlXTsKICAgIH0sCgogICAgLyoqDQogICAgICogS2jDtG5nIGPDsyBk4buvIGxp4buHdSB0cm9uZyBi4bqjbmcNCiAgICAgKiBEw7luZyBj4budIG7DoHkgxJHhu4MgaGnhu4NuIHRo4buLIG3hurdjIGjDrG5oIHRy4buRbmcgdHLDqm4gZGFuaCBzw6FjaA0KICAgICAqLwogICAgZW1wdHk6IGZ1bmN0aW9uIGVtcHR5KCkgewogICAgICByZXR1cm4gdGhpcy5zdG9yZVN0YXRlLmVtcHR5OwogICAgfSwKCiAgICAvKioNCiAgICAgKiBE4buvIGxp4buHdSBoaeG7g24gdGjhu4sNCiAgICAgKi8KICAgIGl0ZW1zOiBmdW5jdGlvbiBpdGVtcygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvcmVTdGF0ZS5pdGVtczsKICAgIH0sCgogICAgLyoqDQogICAgICogVOG7lW5nIHPhu5ENCiAgICAgKi8KICAgIHRvdGFsOiBmdW5jdGlvbiB0b3RhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvcmVTdGF0ZS50b3RhbDsKICAgIH0sCgogICAgLyoqDQogICAgICogU3VtbWFyeSBj4bunYSBncmlkDQogICAgICovCiAgICBzdW1tYXJ5OiBmdW5jdGlvbiBzdW1tYXJ5KCkgewogICAgICByZXR1cm4gdGhpcy5zdG9yZVN0YXRlLnN1bW1hcnk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIGxvYWRpbmcNCiAgICAgKi8KICAgIGxvYWRpbmc6IGZ1bmN0aW9uIGxvYWRpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnN0b3JlU3RhdGUubG9hZGluZzsKICAgIH0sCgogICAgLyoqDQogICAgICogbG9hZGluZyBzdW1tYXJ5DQogICAgICovCiAgICBsb2FkaW5nU3VtbWFyeTogZnVuY3Rpb24gbG9hZGluZ1N1bW1hcnkoKSB7CiAgICAgIHJldHVybiB0aGlzLnN0b3JlU3RhdGUubG9hZGluZ1N1bW1hcnk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEPhu5l0IHRoZW8gY+G6pXUgaMOsbmggY+G7p2EgbeG6q3UNCiAgICAgKi8KICAgIGxheW91dENvbHVtbnM6IGZ1bmN0aW9uIGxheW91dENvbHVtbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZVtNb2R1bGVMYXlvdXRUZW1wbGF0ZV0uYXBwbHk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIENvbnRyb2wgaGnhu4NuIHRo4buLIGFjdGlvbiBraGkgY2jhu41uIG5oaeG7gXUgYuG6o24gZ2hpDQogICAgICovCiAgICBhY3Rpb25NdWx0aUNvbXBvbmVudDogZnVuY3Rpb24gYWN0aW9uTXVsdGlDb21wb25lbnQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzW3RoaXMuYWN0aW9uTXV0aWxSZWZdOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDb250cm9sIGhp4buDbiB0aOG7iyBhY3Rpb24ga2hpIGNo4buNbiBuaGnhu4F1IGLhuqNuIGdoaSAobcOgbiBow6xuaCBs4bubbikNCiAgICAgKi8KICAgIGFjdGlvbk11bHRpQmlnU2NyZWVuQ29tcG9uZW50OiBmdW5jdGlvbiBhY3Rpb25NdWx0aUJpZ1NjcmVlbkNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJlZnNbdGhpcy5hY3Rpb25NdXRpbFJlZkJpZ1NjcmVlbl07CiAgICB9CiAgfSksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHt9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgbWUgPSB0aGlzOwogICAgd2luZG93Ll94eCA9IHRoaXM7IC8vaW5pdCBsYXlvdXQKCiAgICBtZS5pbml0TGF5b3V0KCk7IC8vaW5pdCBldmVudAoKICAgIG1lLmluaXRFdmVudCgpOwogIH0sCiAgbWV0aG9kczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBBY3Rpb25zKHsKICAgIGxvYWRBcHBseUxheW91dDogTW9kdWxlTGF5b3V0VGVtcGxhdGUgKyAiL2xvYWRBcHBseSIKICB9KSksIHt9LCB7CiAgICAvKioNCiAgICAgKiBM4bqleSBj4bqldSBow6xuaCBj4buZdCB0aGVvIG3huqt1IMOhcCBk4bulbmcNCiAgICAgKi8KICAgIGdldExheW91dFRlbXBsYXRlOiBmdW5jdGlvbiBnZXRMYXlvdXRUZW1wbGF0ZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIG1lLCBjYWNoZUxheW91dFRlbXBsYXRlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG1lID0gX3RoaXM7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBtZS5nZXRDYWNoZUxheW91dFRlbXBsYXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNhY2hlTGF5b3V0VGVtcGxhdGUgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghY2FjaGVMYXlvdXRUZW1wbGF0ZSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgY2FjaGVMYXlvdXRUZW1wbGF0ZSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIF90aGlzLmxheW91dENvbHVtbnNbX3RoaXMubGF5b3V0VGFnXSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogWOG7rSBsw70gY+G6pXUgaMOsbmggbeG6q3UgY+G7p2EgZm9ybQ0KICAgICAqLwogICAgaW5pdExheW91dDogZnVuY3Rpb24gaW5pdExheW91dCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgbWUsIGxheW91dCwgY29sdW1uczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbWUgPSBfdGhpczI7CgogICAgICAgICAgICAgICAgaWYgKCFtZS5sYXlvdXRUYWcpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIG1lLmdldExheW91dFRlbXBsYXRlKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGxheW91dCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKCFsYXlvdXQgfHwgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICJkZXZlbG9wbWVudCIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIG1lLmxvYWRBcHBseUxheW91dChtZS5sYXlvdXRUYWcpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBsYXlvdXQgPSBfY29udGV4dDIuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgbWUubGF5b3V0ID0gbWUuY29udmVydFRvTGF5b3V0VGVtcGxldGUobGF5b3V0KTsKICAgICAgICAgICAgICAgIGNvbHVtbnMgPSBtZS5nZXRMYXlvdXRDb2x1bW4obGF5b3V0KTsKICAgICAgICAgICAgICAgIG1lLmdyaWQuaW5pdENvbHVtbnMoY29sdW1ucyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICAvL2xvYWQgZOG7ryBsaeG7h3UgbOG6p24gxJHhuqd1CiAgICAgICAgICAgICAgICBtZS4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICBtZS5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29udmVydFRvTGF5b3V0VGVtcGxldGU6IGZ1bmN0aW9uIGNvbnZlcnRUb0xheW91dFRlbXBsZXRlKGxheW91dCkgewogICAgICB2YXIgbGF5b3V0VGVtcGxldGUgPSB7fTsKCiAgICAgIGlmIChsYXlvdXQpIHsKICAgICAgICBsYXlvdXRUZW1wbGV0ZS5MYXlvdXRUZW1wbGF0ZUlEID0gbGF5b3V0LkxheW91dFRlbXBsYXRlSUQ7CiAgICAgICAgbGF5b3V0VGVtcGxldGUuTGF5b3V0VGFnID0gbGF5b3V0LkxheW91dFRhZzsKICAgICAgICBsYXlvdXRUZW1wbGV0ZS5Vc2VySUQgPSBsYXlvdXQuVXNlcklEIHx8IHRoaXMuQ29udGV4dC5Vc2VySUQ7CiAgICAgICAgbGF5b3V0VGVtcGxldGUuSXNTeXN0ZW0gPSBsYXlvdXQuSXNTeXN0ZW07CiAgICAgICAgbGF5b3V0VGVtcGxldGUuTGF5b3V0Q29uZmlnID0gbGF5b3V0LkNvbHVtbnM7CiAgICAgICAgbGF5b3V0VGVtcGxldGUuTGF5b3V0VGVtcGxhdGVOYW1lID0gbGF5b3V0LkxheW91dFRlbXBsYXRlTmFtZTsKICAgICAgfQoKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGxheW91dFRlbXBsZXRlKTsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgdGjDtG5nIHRpbiBjb2x1bW4gcmVuZGVyIHThu6sgdGjDtG5nIHRpbiBj4bunYSBt4bqrdQ0KICAgICAqLwogICAgZ2V0TGF5b3V0Q29sdW1uOiBmdW5jdGlvbiBnZXRMYXlvdXRDb2x1bW4obGF5b3V0KSB7CiAgICAgIGlmIChsYXlvdXQgIT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgICB2YXIgY29sdW1ucyA9IEpTT04ucGFyc2UobGF5b3V0LkNvbHVtbnMpOyAvL27hur91IGzDoCBt4bqrdSBt4bq3YyDEkeG7i25oIHbDoCBuZ8O0biBuZ+G7ryBraMOhYyB0aeG6v25nIHZp4buHdCAtPiBj4bqtcCBuaOG6rXQgY2FwdGlvbi90aXRsZSB0aGVvIG5nw7RuIG5n4buvCgogICAgICAgIGlmIChsYXlvdXQuSXNTeXN0ZW0pIHsKICAgICAgICAgIG1lLmxvY2FsaXphdGlvbkNvbHVtbihjb2x1bW5zKTsKICAgICAgICB9IC8vbm5sYW06IG9yZGVyYnkgbOG6oWkgdGhlbyBzb3J0X29yZGVyIHbDoCBsb2NrLgoKCiAgICAgICAgY29sdW1ucyA9IF8oY29sdW1ucykuY2hhaW4oKS5zb3J0QnkoInNvcnRfb3JkZXIiKS5zb3J0QnkoZnVuY3Rpb24gKGNvbHVtbikgewogICAgICAgICAgcmV0dXJuICFjb2x1bW4ubG9jazsKICAgICAgICB9KS52YWx1ZSgpOwogICAgICAgIHJldHVybiBjb2x1bW5zOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEfhu41pIHJlcXVlc3QgbG9hZCBk4buvIGxp4buHdQ0KICAgICAqIEfhu41pIHbDoG8gY3J1ZC1iYXNlDQogICAgICovCiAgICByZXF1ZXN0TG9hZERhdGE6IGZ1bmN0aW9uIHJlcXVlc3RMb2FkRGF0YShwYXlsb2FkKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CgogICAgICBpZiAobWUuZ3JpZCAmJiBtZS5ncmlkLmlzR3JpZFRyZWUpIHsKICAgICAgICBtZS4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KG1lLm1vZHVsZSwgIi9sb2FkTGlzdFRyZWUiKSwgcGF5bG9hZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWUuJHN0b3JlLmRpc3BhdGNoKCIiLmNvbmNhdChtZS5tb2R1bGUsICIvbG9hZCIpLCBwYXlsb2FkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIC8qKg0KICAgICAgICAgICAqIGRlbGF5IMSR4buDIMSR4bujaSBncmlkIHNlbGVjdCBkw7JuZyDEkeG6p3UNCiAgICAgICAgICAgKiBOTVRVQU4yIDA0LjEyLjIwMjENCiAgICAgICAgICAgKi8KICAgICAgICAgIGlmIChtZS5pc1NlYXJjaGluZykgewogICAgICAgICAgICBtZS5pc1NlYXJjaGluZyA9IGZhbHNlOwogICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICBpZiAobWUuc2VhcmNoQm94ICYmIG1lLnNlYXJjaEJveC4kcmVmcy5pbnB1dCkgewogICAgICAgICAgICAgICAgbWUuc2VhcmNoQm94LiRyZWZzLmlucHV0LmZvY3VzKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAyMDApOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEfhu41pIHJlcXVlc3QgbG9hZCBzdW1tYXJ5DQogICAgICovCiAgICByZXF1ZXN0TG9hZERhdGFTdW1tYXJ5OiBmdW5jdGlvbiByZXF1ZXN0TG9hZERhdGFTdW1tYXJ5KHBheWxvYWQpIHsKICAgICAgdmFyIG1lID0gdGhpczsKCiAgICAgIGlmIChtZS5ncmlkICYmICFtZS5ncmlkLmlzR3JpZFRyZWUpIHsKICAgICAgICBtZS4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KG1lLm1vZHVsZSwgIi9sb2FkU3VtbWFyeSIpLCBwYXlsb2FkKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBkYmNsaWNrIGLhuqNuIGdoaSB0csOqbiBncmlkDQogICAgICovCiAgICBncmlkUm93RGJDbGljazogZnVuY3Rpb24gZ3JpZFJvd0RiQ2xpY2socmVjb3JkLCBlKSB7CiAgICAgIHRoaXMuZWRpdChyZWNvcmQpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBz4buxIGtp4buHbiDhuqVuIHbDoG8gY8OhYyBhY3Rpb24gdHLDqm4gZm9ybQ0KICAgICAqLwogICAgYnV0dG9uQ2xpY2s6IGZ1bmN0aW9uIGJ1dHRvbkNsaWNrKGNvbW1hbmQsIGUpIHt9LAoKICAgIC8qKg0KICAgICAqIFRow6ptDQogICAgICovCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZCgpIHsKICAgICAgdmFyIG1lID0gdGhpczsKCiAgICAgIGlmICghbWUuY2hlY2tBY3Rpb25QZXJtaXNzaW9uQWxlcnQobWUuJHQoImkxOG5QZXJtaXNzaW9uLlN1YlN5c3RlbUNvZGUuQ29kZS5BREQiKSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbSA9IG1lLmdldERldGFpbFBhcmFtZXRlcihtZS5mb3JtRGV0YWlsTmFtZSwgdGhpcy4kbXMuZW51bS5Gb3JtU3RhdGUuQWRkKTsKICAgICAgbWUuc2hvd0RldGFpbChtZS5mb3JtRGV0YWlsTmFtZSwgdGhpcy4kbXMuZW51bS5Gb3JtU3RhdGUuQWRkLCBwYXJhbSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFPhu60gZOG7pW5nIGNobyBz4buxIGtp4buHbiBkYmxpY2sgdsOgbyBkw7JuZyB0csOqbiBncmlkIMSR4buDIHNob3cgZm9ybSB0xrDGoW5nIOG7qW5nDQogICAgICogKi8KICAgIGVkaXQ6IGZ1bmN0aW9uIGVkaXQocmVjb3JkKSB7CiAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICJFRElUIjsKICAgICAgdmFyIG1lID0gdGhpczsKCiAgICAgIGlmICghbWUuY2hlY2tBY3Rpb25QZXJtaXNzaW9uQWxlcnQoYWN0aW9uKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcmFtID0gbWUuZ2V0RGV0YWlsUGFyYW1ldGVyKG1lLmZvcm1EZXRhaWxOYW1lLCB0aGlzLiRtcy5lbnVtLkZvcm1TdGF0ZS5FZGl0LCByZWNvcmQpOwogICAgICBtZS5zaG93RGV0YWlsKG1lLmZvcm1EZXRhaWxOYW1lLCB0aGlzLiRtcy5lbnVtLkZvcm1TdGF0ZS5FZGl0LCBwYXJhbSwgewogICAgICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KHNhdmVSZXN1bHQsIHNhdmVQYXJhbSkgewogICAgICAgICAgaWYgKHNhdmVSZXN1bHQuU3VjY2VzcykgewogICAgICAgICAgICBtZS5hZnRlclNhdmVFZGl0KHJlY29yZCwgc2F2ZVJlc3VsdCwgc2F2ZVBhcmFtKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBwdmR1eSAyNy8wMi8yMDIxOiB0aMOqbSBk4buvIGxp4buHdSBjaG8gbW9kZSB2aWV3DQogICAgICogKi8KICAgIHZpZXc6IGZ1bmN0aW9uIHZpZXcocmVjb3JkKSB7CiAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICJXQVRDSCI7CiAgICAgIHZhciBtZSA9IHRoaXM7CgogICAgICBpZiAoIW1lLmNoZWNrQWN0aW9uUGVybWlzc2lvbkFsZXJ0KGFjdGlvbikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwYXJhbSA9IG1lLmdldERldGFpbFBhcmFtZXRlcihtZS5mb3JtRGV0YWlsTmFtZSwgdGhpcy4kbXMuZW51bS5Gb3JtU3RhdGUuVmlldywgcmVjb3JkKTsKICAgICAgbWUuc2hvd0RldGFpbChtZS5mb3JtRGV0YWlsTmFtZSwgdGhpcy4kbXMuZW51bS5Gb3JtU3RhdGUuVmlldywgcGFyYW0sIHsKICAgICAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdChzYXZlUmVzdWx0LCBzYXZlUGFyYW0pIHsKICAgICAgICAgIGlmIChzYXZlUmVzdWx0LlN1Y2Nlc3MpIHsKICAgICAgICAgICAgbWUuYWZ0ZXJTYXZlVmlldyhyZWNvcmQsIHNhdmVSZXN1bHQsIHNhdmVQYXJhbSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogTmjDom4gYuG6o24gYuG6o24gZ2hpDQogICAgICogKi8KICAgIGR1cGxpY2F0ZTogZnVuY3Rpb24gZHVwbGljYXRlKHJlY29yZCkgewogICAgICB2YXIgbWUgPSB0aGlzOwoKICAgICAgaWYgKCFtZS5jaGVja0FjdGlvblBlcm1pc3Npb25BbGVydChtZS4kdCgiaTE4blBlcm1pc3Npb24uU3ViU3lzdGVtQ29kZS5Db2RlLkFERCIpKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHBhcmFtID0gbWUuZ2V0RGV0YWlsUGFyYW1ldGVyKG1lLmZvcm1EZXRhaWxOYW1lLCB0aGlzLiRtcy5lbnVtLkZvcm1TdGF0ZS5EdXBsaWNhdGUsIHJlY29yZCk7CiAgICAgIG1lLnNob3dEZXRhaWwobWUuZm9ybURldGFpbE5hbWUsIHRoaXMuJG1zLmVudW0uRm9ybVN0YXRlLkR1cGxpY2F0ZSwgcGFyYW0pOwogICAgfSwKICAgIHJlZnJlc2hDbGljazogZnVuY3Rpb24gcmVmcmVzaENsaWNrKCkgewogICAgICB0aGlzLnJlZnJlc2goKTsKICAgIH0sCgogICAgLyoqDQogICAgICogZHJpbGxkb3duIGtoaSBjbGljayB2w6BvIGdyaWQNCiAgICAgKiAqLwogICAgZHJpbGxkb3duQ2xpY2s6IGZ1bmN0aW9uIGRyaWxsZG93bkNsaWNrKG1ldGFEYXRhKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CgogICAgICBpZiAobWV0YURhdGEuZGF0YVJvdykgewogICAgICAgIG1lLmVkaXQobWV0YURhdGEuZGF0YVJvdyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWUuJHRvYXN0LmVycm9yKG1lLiR0KCJpMThuQmFzZUZvcm0uTWVzc2FnZS5FcnJvciIpKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBAYXV0aG9yIFRWTE9JIDIwLjA1LjIwMjENCiAgICAgKiBkcmlsbGRvd24gdsOgbyBjaGkgdGnhur90IGtoaSDhuqVuIHbDoG8gY8OhYyBj4buZdCBjw7MgZOG6oW5nIMSR4bqhaSBkaeG7h24gY2hvIHPhu5Egbmhp4buBdShOaGnhu4F1IGTDsm5nIGNoaSB0aeG6v3QpDQogICAgICogKi8KICAgIHZpZXdNb3JlRGV0YWlsczogZnVuY3Rpb24gdmlld01vcmVEZXRhaWxzKG1ldGFEYXRhKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CgogICAgICBpZiAobWV0YURhdGEuZGF0YVJvdykgewogICAgICAgIG1lLnZpZXcobWV0YURhdGEuZGF0YVJvdyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWUuJHRvYXN0LmVycm9yKG1lLiR0KCJpMThuQmFzZUZvcm0uTWVzc2FnZS5FcnJvciIpKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBYw7NhDQogICAgICovCiAgICBkZWxldGU6IGZ1bmN0aW9uIF9kZWxldGUocmVjb3JkLCBzdWIpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICB2YXIgbWUsIGNvbmZpZ01lc3NhZ2UsIGFuc3dlciwgdGVtcCwgZHJvcGVkQ29sdW1ucywgX2xvb3AsIGksIGF1ZGl0aW5nTG9nLCBwYXJhbSwgcmVzdWx0OwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbWUgPSBfdGhpczM7CgogICAgICAgICAgICAgICAgaWYgKG1lLmNoZWNrQWN0aW9uUGVybWlzc2lvbkFsZXJ0KHN1YiAhPT0gbnVsbCAmJiBzdWIgIT09IHZvaWQgMCA/IHN1YiA6IG1lLiR0KCJpMThuUGVybWlzc2lvbi5TdWJTeXN0ZW1Db2RlLkNvZGUuREVMRVRFIikpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICBpZiAobWUudmFsaWRhdGVCZWZvcmVEZWxldGUocmVjb3JkLCBzdWIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuZ2V0RGVsZXRlQ29uZmlybU1lc3NhZ2UocmVjb3JkKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgY29uZmlnTWVzc2FnZSA9IF9jb250ZXh0My5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIHJldHVybiBtZS4kbXMubXNnQm94LnNob3dRdWVzdGlvbihjb25maWdNZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIGFuc3dlciA9IF9jb250ZXh0My5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGFuc3dlciA9PSAiWWVzIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGVtcCA9IHt9OyAvL0Lhu48gYuG7m3QgY8OhYyB0aMO0bmcgdGluIGfhu61pIGzDqm4gc3YuCgogICAgICAgICAgICAgICAgZHJvcGVkQ29sdW1ucyA9IG1lLmdldElnbm9yZWRDb2x1bW5zKCk7CgogICAgICAgICAgICAgICAgX2xvb3AgPSBmdW5jdGlvbiBfbG9vcChpKSB7CiAgICAgICAgICAgICAgICAgIHZhciBpc0Ryb3BlZENvbHVtbiA9IGRyb3BlZENvbHVtbnMuZmluZChmdW5jdGlvbiAoXykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBfID09IGk7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgaWYgKCFpc0Ryb3BlZENvbHVtbikgewogICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSByZWNvcmRbaV07CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgZm9yIChpIGluIHJlY29yZCkgewogICAgICAgICAgICAgICAgICBfbG9vcChpKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBhdWRpdGluZ0xvZyA9IHsKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IE1TSnNvbi5zZXJpYWxpemUobWUuZ2VuZXJhdGVEZXNjcmlwdGlvbkF1ZGl0aW5nTG9nKHJlY29yZCkpLAogICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IG1lLmJ1aWxkUmVmZXJlbmNlKHJlY29yZCksCiAgICAgICAgICAgICAgICAgIGFjdGlvbjogbWUuYWN0aW9uQXVkaXRpbmdMb2csCiAgICAgICAgICAgICAgICAgIGVudGl0eTogbWUuZ2V0RW50aXR5VHlwZSgpIHx8IG1lLm1vZHVsZSwKICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHBhcmFtID0gewogICAgICAgICAgICAgICAgICBFbnRpdHk6IFt0ZW1wXSwKICAgICAgICAgICAgICAgICAgQnlQYXNzVmFsaWRhdGU6IG51bGwsCiAgICAgICAgICAgICAgICAgIEF1ZGl0aW5nTG9nOiBNU0pzb24uc2VyaWFsaXplKGF1ZGl0aW5nTG9nKSwKICAgICAgICAgICAgICAgICAgVHlwZTogbWUuJG1zLmVudW0uRGVsZXRlVHlwZS5TaW5nbGUKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBwYXJhbSA9IG1lLmN1c3RvbURlbGV0ZVBhcmFtKHJlY29yZCwgcGFyYW0pOwogICAgICAgICAgICAgICAgbWUuJG1zLmNvbW1vbkZuLm1hc2soKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUucmVxdWVzdERlbGV0ZURhdGEocmVjb3JkLCBwYXJhbSk7CgogICAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIG1lLiRtcy5jb21tb25Gbi51bm1hc2soKTsKICAgICAgICAgICAgICAgIG1lLmFmdGVyRGVsZXRlKHJlY29yZCwgcmVzdWx0KTsgLy9Mb2cgZmlyZWJhc2UKICAgICAgICAgICAgICAgIC8vIG1lLmxvZ0RhdGFGaXJlQmFzZSgpOwoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEzhuqV5IHRow7RuZyB0aW4gbG9nIGZpcmViYXNlDQogICAgICogTlRUSEFOSDENCiAgICAgKi8KICAgIGxvZ0RhdGFGaXJlQmFzZTogZnVuY3Rpb24gbG9nRGF0YUZpcmVCYXNlKCkgewogICAgICB2YXIgbWUgPSB0aGlzOwoKICAgICAgdHJ5IHsKICAgICAgICB2YXIgbWVudU5hbWVDdXJyZW50ID0gbnVsbDsKICAgICAgICB2YXIgcGFyZW50ID0gbWUuJHBhcmVudDsKCiAgICAgICAgaWYgKG1lLiRyb3V0ZXIgfHwgbWUuJCRyb3V0ZXIpIHsKICAgICAgICAgIG1lbnVOYW1lQ3VycmVudCA9IG1lLiRyb3V0ZSA/IG1lLiRyb3V0ZS5uYW1lIDogbWUuJCRyb3V0ZS5uYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocGFyZW50ICYmIChwYXJlbnQuJHJvdXRlciB8fCBwYXJlbnQuJCRyb3V0ZXIpKSB7CiAgICAgICAgICAgIG1lbnVOYW1lQ3VycmVudCA9IHBhcmVudC4kcm91dGVyID8gcGFyZW50LiRyb3V0ZS5uYW1lIDogcGFyZW50LiQkcm91dGUubmFtZTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChtZW51TmFtZUN1cnJlbnQpIHsKICAgICAgICAgIGNvbW1vbkZuLmxvZ0RhdGFGaXJlQmFzZVVwZGF0ZShtZW51TmFtZUN1cnJlbnQsIG1lLmNvbnRleHQpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXgpIHsKICAgICAgICBjb25zb2xlLmxvZyhleCk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogR+G7jWkgcmVxdWVzdCB4w7NhDQogICAgICogQHJldHVybnMNCiAgICAgKi8KICAgIHJlcXVlc3REZWxldGVEYXRhOiBmdW5jdGlvbiByZXF1ZXN0RGVsZXRlRGF0YShyZWNvcmQsIHBhcmFtKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIG1lOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzNDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBtZS4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KF90aGlzNC5tb2R1bGUsICIvZGVsZXRlIiksIHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIF9jb250ZXh0NC5zZW50KTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU0KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIG92ZXJyaWRlYWJsZSDEkeG7gyBjaGVjayBt4buZdCB2w6BpIGNhc2UgdmFsaWRhdGUgxJHGsOG7o2MgbmdheSB0csOqbiBjbGllbnQNCiAgICAgKiBAcmV0dXJucw0KICAgICAqIFRETkdISUEgMjcvMTAvMjAyMQ0KICAgICAqLwogICAgdmFsaWRhdGVCZWZvcmVEZWxldGU6IGZ1bmN0aW9uIHZhbGlkYXRlQmVmb3JlRGVsZXRlKHJlY29yZHMpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBvdmVycmlkYWJsZSBUcuG6oyB24buBIG5o4buvbmcgdHLGsOG7nW5nIGtow7RuZyBtdeG7kW4gZ+G7rWkgbMOqbiBzZXJ2ZSDEkeG7gyB4w7NhDQogICAgICogQGF1dGhvciBUVkxvaSAxOS4wNi4yMDIxDQogICAgICovCiAgICBnZXRJZ25vcmVkQ29sdW1uczogZnVuY3Rpb24gZ2V0SWdub3JlZENvbHVtbnMoKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7IC8vZGVmYXVsdCAxIHPhu5EgY+G7mXQgbeG6t2MgxJHhu4tuaCBraMO0bmcgZ+G7rWkgbMOqbi4KCiAgICAgIHZhciBjb2x1bW5zSWdub3JlZCA9IFsicGFyZW50Tm9kZSIsICJpc0hpZGUiLCAiaXNTZWxlY3RlZCIsICJsZXZlbCIsICJfX3ZLZXlWYWx1ZSIsICJfaXNTZWxlY3RlZE11bHRpcGxlIiwgImV4cGFuZGVkIl07CiAgICAgIHZhciBjdXN0b21JZ25vcmVkQ29sdW1ucyA9IG1lLmdldEN1c3RvbUlnbm9yZWRDb2x1bW5zQmVmb3JlRGVsZXRlKCk7CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShjdXN0b21JZ25vcmVkQ29sdW1ucykgJiYgY3VzdG9tSWdub3JlZENvbHVtbnMubGVuZ3RoID4gMCkgewogICAgICAgIGN1c3RvbUlnbm9yZWRDb2x1bW5zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGNvbHVtbnNJZ25vcmVkLnB1c2goaXRlbSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb2x1bW5zSWdub3JlZDsKICAgIH0sCiAgICAvL0N1c3RvbUNvbHVtbnMga28gZ+G7rWkgbMOqbgogICAgZ2V0Q3VzdG9tSWdub3JlZENvbHVtbnNCZWZvcmVEZWxldGU6IGZ1bmN0aW9uIGdldEN1c3RvbUlnbm9yZWRDb2x1bW5zQmVmb3JlRGVsZXRlKCkgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICByZXR1cm4gW107CiAgICB9LAoKICAgIC8qKg0KICAgICAqIHRoYW0gY2hp4bq/dSBuaOG6rXQga8O9IChsxrB1IGThuqFuZyBqc29uIDoge2tleToga2V5LCBjb2RlOiBjb2RlLCBuYW1lOiBuYW1lfSkNCiAgICAgKiBrZXk6IGtow7NhIGNow61uaCBj4bunYSBi4bqjbmcgbW9kdWxlLCBkw7luZyDEkeG7gyBkcmlsZG93biBraGkgY2xpY2sgdsOgbw0KICAgICAqIGNvZGUsIG5hbWU6IG3DoywgdMOqbiDEkeG7gyBoaeG7g3UgdGjhu4sg4bufIGPhu5l0IHRoYW0gY2hp4bq/dSBraGkgeGVtIGxvZzogdsOtIGThu6U6IFF14bqhdCDEkWnhu4duIChRRDAwMDAxKQ0KICAgICAqLwogICAgYnVpbGRSZWZlcmVuY2U6IGZ1bmN0aW9uIGJ1aWxkUmVmZXJlbmNlKHJlY29yZHMpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgdmFyIGZpZWxkID0gdGhpcy4kc3RvcmUuc3RhdGVbbWUubW9kdWxlXS5fY29uZmlnLmZpZWxkOwoKICAgICAgaWYgKGZpZWxkKSB7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocmVjb3JkcykpIHsKICAgICAgICAgIHZhciByZWZlcmVuY2UgPSBbXTsKICAgICAgICAgIHJlY29yZHMuZm9yRWFjaChmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgIHJlZmVyZW5jZS5wdXNoKHsKICAgICAgICAgICAgICBrZXk6IHJlY29yZFtmaWVsZC5rZXldLAogICAgICAgICAgICAgIGNvZGU6IHJlY29yZFtmaWVsZC5jb2RlXSwKICAgICAgICAgICAgICBuYW1lOiByZWNvcmRbZmllbGQubmFtZV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBNU0pzb24uc2VyaWFsaXplKHJlZmVyZW5jZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBNU0pzb24uc2VyaWFsaXplKHsKICAgICAgICAgICAga2V5OiByZWNvcmRzW2ZpZWxkLmtleV0sCiAgICAgICAgICAgIGNvZGU6IHJlY29yZHNbZmllbGQuY29kZV0sCiAgICAgICAgICAgIG5hbWU6IHJlY29yZHNbZmllbGQubmFtZV0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBTaW5oIG3DtCB04bqjIGPhu6dhIG5o4bqtdCBrw70NCiAgICAgKiBDcmVhdGVkQnk6IG5ubGFtIDI0LzAzLzIwMjENCiAgICAgKi8KICAgIGdlbmVyYXRlRGVzY3JpcHRpb25BdWRpdGluZ0xvZzogZnVuY3Rpb24gZ2VuZXJhdGVEZXNjcmlwdGlvbkF1ZGl0aW5nTG9nKHJlY29yZHMpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgdmFyIGxpc3REZXNjcmlwdGlvbiA9IHsKICAgICAgICBtYXN0ZXI6IFtdCiAgICAgIH07CiAgICAgIHZhciBmaWVsZCA9IHRoaXMuJHN0b3JlLnN0YXRlW21lLm1vZHVsZV0uX2NvbmZpZy5maWVsZDsKCiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlY29yZHMpKSB7CiAgICAgICAgcmVjb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgICAgIHZhciBvYmpEZXNjcmlwdGlvbiA9IHt9OwogICAgICAgICAgb2JqRGVzY3JpcHRpb25bZmllbGQuY29kZV0gPSByZWNvcmRbZmllbGQuY29kZV07IC8ve25ld1ZhbHVlOm1lLmN1cnJlbnRJdGVtW2ZpZWxkLmNvZGVdLCBzd2l0Y2hDYXB0aW9uOiBtZS5zd2l0Y2hDYXB0aW9uLm1hc3RlcltmaWVsZC5jb2RlXX07CgogICAgICAgICAgb2JqRGVzY3JpcHRpb25bZmllbGQubmFtZV0gPSByZWNvcmRbZmllbGQubmFtZV07IC8ve25ld1ZhbHVlOm1lLmN1cnJlbnRJdGVtW2ZpZWxkLm5hbWVdLCBzd2l0Y2hDYXB0aW9uOiBtZS5zd2l0Y2hDYXB0aW9uLm1hc3RlcltmaWVsZC5uYW1lXX07CgogICAgICAgICAgaWYgKGZpZWxkLnF1YW50aXR5KSB7CiAgICAgICAgICAgIG9iakRlc2NyaXB0aW9uW2ZpZWxkLnF1YW50aXR5XSA9IHJlY29yZFtmaWVsZC5xdWFudGl0eV07IC8ve25ld1ZhbHVlOm1lLmN1cnJlbnRJdGVtW2ZpZWxkLnF1YW50aXR5XSB8fCAxLCBzd2l0Y2hDYXB0aW9uOiBtZS5zd2l0Y2hDYXB0aW9uLm1hc3RlcltmaWVsZC5xdWFudGl0eV19OwogICAgICAgICAgfQoKICAgICAgICAgIGxpc3REZXNjcmlwdGlvbi5tYXN0ZXIucHVzaChvYmpEZXNjcmlwdGlvbik7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIG9iakRlc2NyaXB0aW9uID0ge307CiAgICAgICAgb2JqRGVzY3JpcHRpb25bZmllbGQuY29kZV0gPSByZWNvcmRzW2ZpZWxkLmNvZGVdOyAvL3tuZXdWYWx1ZTptZS5jdXJyZW50SXRlbVtmaWVsZC5jb2RlXSwgc3dpdGNoQ2FwdGlvbjogbWUuc3dpdGNoQ2FwdGlvbi5tYXN0ZXJbZmllbGQuY29kZV19OwoKICAgICAgICBvYmpEZXNjcmlwdGlvbltmaWVsZC5uYW1lXSA9IHJlY29yZHNbZmllbGQubmFtZV07IC8ve25ld1ZhbHVlOm1lLmN1cnJlbnRJdGVtW2ZpZWxkLm5hbWVdLCBzd2l0Y2hDYXB0aW9uOiBtZS5zd2l0Y2hDYXB0aW9uLm1hc3RlcltmaWVsZC5uYW1lXX07CgogICAgICAgIGlmIChmaWVsZC5xdWFudGl0eSkgewogICAgICAgICAgb2JqRGVzY3JpcHRpb25bZmllbGQucXVhbnRpdHldID0gcmVjb3Jkc1tmaWVsZC5xdWFudGl0eV07IC8ve25ld1ZhbHVlOm1lLmN1cnJlbnRJdGVtW2ZpZWxkLnF1YW50aXR5XSB8fCAxLCBzd2l0Y2hDYXB0aW9uOiBtZS5zd2l0Y2hDYXB0aW9uLm1hc3RlcltmaWVsZC5xdWFudGl0eV19OwogICAgICAgIH0KCiAgICAgICAgbGlzdERlc2NyaXB0aW9uLm1hc3Rlci5wdXNoKG9iakRlc2NyaXB0aW9uKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxpc3REZXNjcmlwdGlvbjsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgY8OidSB0aMO0bmcgYsOhbyBraGkgeMOzYQ0KICAgICAqLwogICAgZ2V0RGVsZXRlQ29uZmlybU1lc3NhZ2U6IGZ1bmN0aW9uIGdldERlbGV0ZUNvbmZpcm1NZXNzYWdlKHJlY29yZHMpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICB2YXIgbWUsIG1vZHVsZU5hbWUsIHRhcmdldE5hbWUsIG1lcywgZGVsZXRlTXVsdGlNc2csIHJlY29yZCwgZGVsZXRlTXNnOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0NS5wcmV2ID0gX2NvbnRleHQ1Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzNTsKICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgPSBtZS5nZXRNb2R1bGVOYW1lKCkgfHwgIiI7CiAgICAgICAgICAgICAgICB0YXJnZXROYW1lID0gIiI7CiAgICAgICAgICAgICAgICBtZXMgPSAiIjsKCiAgICAgICAgICAgICAgICBpZiAocmVjb3Jkcy5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZU11bHRpTXNnID0gbWUuZ2V0RGVsZXRlTXVsdGlNc2coKTsKICAgICAgICAgICAgICAgICAgbWVzID0gZGVsZXRlTXVsdGlNc2cuZm9ybWF0KHJlY29yZHMubGVuZ3RoID4gOSA/IHJlY29yZHMubGVuZ3RoIDogIjAiICsgcmVjb3Jkcy5sZW5ndGgsIG1vZHVsZU5hbWUpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3JkczsKCiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlY29yZHMpKSB7CiAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3Jkc1swXTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgaWYgKHJlY29yZCkgewogICAgICAgICAgICAgICAgICAgIHRhcmdldE5hbWUgPSBtZS5nZXREZWxldGVTaW5nbGVNZXNDb250ZW50KHJlY29yZCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGRlbGV0ZU1zZyA9IG1lLmdldERlbGV0ZU1zZyhyZWNvcmRzKTsKICAgICAgICAgICAgICAgICAgbWVzID0gZGVsZXRlTXNnLmZvcm1hdChtZS4kbXMuY29tbW9uRm4uZW5jb2RlSFRNTCh0YXJnZXROYW1lKSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgICAgdGl0bGU6IG1lLiR0KCJpMThuQmFzZUZvcm0uTWVzc2FnZS5Db25maXJtRGVsZXRlVGl0bGUiKS5mb3JtYXQobW9kdWxlTmFtZSksCiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IG1lcwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDdXN0b20gY8OidSBu4buZaSBkdW5nIHjDs2Egbmhp4buBdQ0KICAgICAqIE5UQkFPOiAyNS4xMS4yMDIxDQogICAgICogQHJldHVybnMNCiAgICAgKi8KICAgIGdldERlbGV0ZU11bHRpTXNnOiBmdW5jdGlvbiBnZXREZWxldGVNdWx0aU1zZygpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgcmV0dXJuIG1lLiR0KCJpMThuQmFzZUZvcm0uTWVzc2FnZS5Db25maXJtRGVsZXRlTXV0aVRpdGxlQ2Vnb3YiKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQ3VzdG9tIGPDonUgbuG7mWkgZHVuZyB4w7NhIMSRxqFuDQogICAgICogTlRCQU86IDI1LjExLjIwMjENCiAgICAgKiBAcmV0dXJucw0KICAgICAqLwogICAgZ2V0RGVsZXRlTXNnOiBmdW5jdGlvbiBnZXREZWxldGVNc2cocmVjb3JkcykgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICByZXR1cm4gbWUuJHQoImkxOG5CYXNlRm9ybS5NZXNzYWdlLkNvbmZpcm1EZWxldGVTaG9ydCIpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBM4bqleSBu4buZaSBkdW5nIHjDs2ENCiAgICAgKi8KICAgIGdldERlbGV0ZVNpbmdsZU1lc0NvbnRlbnQ6IGZ1bmN0aW9uIGdldERlbGV0ZVNpbmdsZU1lc0NvbnRlbnQocmVjb3JkKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHJldHVybiByZWNvcmRbbWUuJHN0b3JlLnN0YXRlW21lLm1vZHVsZV0uX2NvbmZpZy5maWVsZC5uYW1lXSB8fCByZWNvcmRbbWUuJHN0b3JlLnN0YXRlW21lLm1vZHVsZV0uX2NvbmZpZy5maWVsZC5jb2RlXTsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgdMOqbiDEkeG7kWkgdMaw4bujbmcgY+G7p2EgZm9ybQ0KICAgICAqLwogICAgZ2V0TW9kdWxlTmFtZTogZnVuY3Rpb24gZ2V0TW9kdWxlTmFtZSgpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgcmV0dXJuIG1lLiR0KCJpMThuQ29tbW9uLm1vZHVsZS4iICsgbWUubW9kdWxlLnRvTG93ZXJDYXNlKCkpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBY4butIGzDvSBzYXUga2hpIHjDs2ENCiAgICAgKi8KICAgIGFmdGVyRGVsZXRlOiBmdW5jdGlvbiBhZnRlckRlbGV0ZShyZWNvcmQsIHJlc3VsdCkgewogICAgICB2YXIgX3RoaXM2ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciBtZSwgZGVsZXRlUmVjb3JkLCBfbWUkZ2V0RmllbGRzLCBDT0RFLCBtb2R1bGVOYW1lLCBmaWVsZCwgbGlzdEFyaXNlbmQsIGNvbmZpZ01lc3NhZ2UsIGFuc3dlciwgaXNBcmlzZU11bHRpLCBuYW1lLCBvYmosIGluYWN0aXZlQXJpc2UsIGRlbGV0ZU5vQXJpc2UsIHJlY29yZHNJbmFjdGl2ZSwgcmVjb3Jkc0RlbGV0ZSwga2V5RmllbGQ7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzNjsKCiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5TdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gY2xvbmUgbOG6oWkgZ2nDoSB0cuG7iyB4w7NhIGTDuW5nIGNobyB2aeG7h2MgY3VzdG9tCiAgICAgICAgICAgICAgICAvLyBOVEJBTzogMDcuMTEuMjAyMQogICAgICAgICAgICAgICAgZGVsZXRlUmVjb3JkID0gXy5jbG9uZShyZWNvcmQpOwogICAgICAgICAgICAgICAgbWUuJHRvYXN0LnN1Y2Nlc3MobWUuJHQoImkxOG5CYXNlRm9ybS5NZXNzYWdlLkRlbGV0ZVN1Y2Nlc3MiKSk7CiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBu4bq/dSB4b8OhIGLhuqNuIGdoaSDEkcaw4bujYyB0w61jaCB0aMOsIMSRYW5nIGtow7RuZyB04buxIGPhuq1wIG5o4bqtdCDhu58gc2VsZWN0ZWQNCiAgICAgICAgICAgICAgICAgKiBuw6puIHBo4bqjaSB0aOG7sWMgaGnhu4duIHhvw6Ega2jhu49pIHNlbGVjdGVkIChjaOG7iSB04buxIMSR4buZbmcga2hpIHhvw6EgdHLDqm4gZMOybmcgY+G7p2EgZ3JpZEVkaXRvcikNCiAgICAgICAgICAgICAgICAgKiBi4bqtdCBjaGFuZ2UgdsOgbyBjw6FjIGLhuqNuIGdoaSBjw7JuIMSRxrDhu6NjIHTDrWNoDQogICAgICAgICAgICAgICAgICogTk1UVUFOMiAyOC4xMS4yMDIxDQogICAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgICAgbWUuc2VsZWN0ZWQucmVtb3ZlKHJlY29yZCk7CiAgICAgICAgICAgICAgICBtZS5zZWxlY3Rpb25DaGFuZ2UobWUuc2VsZWN0ZWQpOwogICAgICAgICAgICAgICAgLyoqDQogICAgICAgICAgICAgICAgICogSMOgbSBjdXN0b20geOG7rSBsw70gdGjDqm0NCiAgICAgICAgICAgICAgICAgKiBOVEJBTyAwMi4xMS4yMDIxDQogICAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgICAgbWUuY3VzdG9tQWZ0ZXJEZWxldGUoZGVsZXRlUmVjb3JkLCByZXN1bHQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA2MTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAgICAgKiBT4butYSBs4buXaSBraGkgeMOzYSBuaGnhu4F1IGLhuqNuIGdoaQ0KICAgICAgICAgICAgICAgICAqIE1vZGlmaXlCeTogTlRBbmggKDA5LzAzLzIwMjEpDQogICAgICAgICAgICAgICAgICogTW9kaWZpeUJ5OiBOVFRIQU5IMSAoMjAvMTEvMjAyMSkNCiAgICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIENPREUgPSBtZS4kbXMuZW51bS5TZXJ2aWNlUmVzcG9uc2VDb2RlOwogICAgICAgICAgICAgICAgbW9kdWxlTmFtZSA9IG1lLmdldE1vZHVsZU5hbWUoKSwgZmllbGQgPSAoX21lJGdldEZpZWxkcyA9IG1lLmdldEZpZWxkcygpKSAhPT0gbnVsbCAmJiBfbWUkZ2V0RmllbGRzICE9PSB2b2lkIDAgPyBfbWUkZ2V0RmllbGRzIDogX3RoaXM2LiRzdG9yZS5zdGF0ZVttZS5tb2R1bGVdLl9jb25maWcuZmllbGQsIGxpc3RBcmlzZW5kID0gW107IC8vQmnhur9uIMSRw6FuaCBk4bqldSBuaGnhu4F1IGLhuqNuIGdoaSBwaMOhdCBzaW5oCiAgICAgICAgICAgICAgICAvLyBOaGnhu4F1IGLhuqNuIMSRw6MgY8OzIHBow6F0IHNpbmgKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkRhdGEgJiYgcmVzdWx0LkRhdGEubGVuZ3RoID4gMSkgewogICAgICAgICAgICAgICAgICBpc0FyaXNlTXVsdGkgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LkRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgLy8gbOG6pXkgdW5pcXVlIGhv4bq3YyBuYW1lCiAgICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGZpZWxkLnVuaXF1ZSB8fCBmaWVsZC5uYW1lOwogICAgICAgICAgICAgICAgICAgICAgbGlzdEFyaXNlbmQucHVzaChlbGVtZW50LkVudGl0eVtuYW1lXSk7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gLy8gMSBi4bqjbiBnaGkgY8OzIHBow6F0IHNpbmg6CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgaXNBcmlzZU11bHRpID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIG5hbWUgPSBmaWVsZC51bmlxdWUgfHwgZmllbGQubmFtZTsKICAgICAgICAgICAgICAgICAgb2JqID0gcmVzdWx0LkRhdGFbMF07CiAgICAgICAgICAgICAgICAgIGxpc3RBcmlzZW5kLnB1c2gob2JqLkVudGl0eVtuYW1lXSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2LnQwID0gcmVzdWx0LkNvZGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IF9jb250ZXh0Ni50MCA9PT0gQ09ERS5EZWxldGVNdWx0aUFyaXNlbmVkID8gMTUgOiBfY29udGV4dDYudDAgPT09IENPREUuQXJpc2VuZWQgPyAzNyA6IF9jb250ZXh0Ni50MCA9PT0gQ09ERS5QYXJ0SW52YWxpZERhdGEgPyA0NyA6IDU1OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLmlzSW5hY3RpdmVBbmREZWxldGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9DaOG7iSB0aMO0bmcgYsOhbyBuZ+G7q25nIHPhu60gZOG7pW5nIHbDoCB4w7NhIHbhu5tpIGPDoWMgbcOgbiBkYW5oIG3hu6VjCiAgICAgICAgICAgICAgICBjb25maWdNZXNzYWdlID0gbWUuZ2V0QXJpc2VDb25maXJtTWVzYWdlKG1vZHVsZU5hbWUsIGxpc3RBcmlzZW5kLCBDT0RFLkRlbGV0ZU11bHRpQXJpc2VuZWQpOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiBtZS4kbXMubXNnQm94LnNob3dRdWVzdGlvbihjb25maWdNZXNzYWdlKTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIGFuc3dlciA9IF9jb250ZXh0Ni5zZW50OwoKICAgICAgICAgICAgICAgIGlmICghKGFuc3dlciA9PSAiWWVzIikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAzMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8ga+G6v3QgcXXhuqMgeMOzYQogICAgICAgICAgICAgICAgLy9OZ+G7q25nIHPhu60gZOG7pW5nIGLhuqNuIGdoaSBwaMOhdCBzaW5oCiAgICAgICAgICAgICAgICByZWNvcmRzSW5hY3RpdmUgPSBbXTsgLy9t4bqjbmcgYuG6o24gZ2hpIGPhuqduIG5n4burbmcgc+G7rSBk4bulbmcKCiAgICAgICAgICAgICAgICByZXN1bHQuRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgIHJlY29yZHNJbmFjdGl2ZS5wdXNoKGVsZW1lbnQuRW50aXR5KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNTsKICAgICAgICAgICAgICAgIHJldHVybiBtZS5zZXRJbmFjdGl2ZUFyaXNlKHJlY29yZHNJbmFjdGl2ZSk7CgogICAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgICBpbmFjdGl2ZUFyaXNlID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgICAgICAvL1jDs2EgYuG6o24gZ2hpIGtow7RuZyBwaMOhdCBzaW5oCiAgICAgICAgICAgICAgICByZWNvcmRzRGVsZXRlID0gW107IC8vbeG6o25nIGLhuqNuIGdoaSBj4bqnbiB4w7NhCgogICAgICAgICAgICAgICAgaWYgKCEocmVjb3JkLmxlbmd0aCA+IHJlY29yZHNJbmFjdGl2ZS5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8vTuG6v3UgY8OzIGLhuqNuIGdoaSBraMO0bmcgcGjDoXQgc2luaCB0aMOsIG1zIHjDs2EKICAgICAgICAgICAgICAgIHJlY29yZC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW1SZWNvcmQpIHsKICAgICAgICAgICAgICAgICAgdmFyIHJlY29yZER1cGxpY2F0ZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgICByZWNvcmRzSW5hY3RpdmUuZmlsdGVyKGZ1bmN0aW9uIChpdGVtUmVjb3Jkc0luYWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1SZWNvcmRzSW5hY3RpdmVbZmllbGQua2V5XSA9PSBpdGVtUmVjb3JkW2ZpZWxkLmtleV0pIHsKICAgICAgICAgICAgICAgICAgICAgIHJlY29yZER1cGxpY2F0ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgIGlmICghcmVjb3JkRHVwbGljYXRlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVjb3Jkc0RlbGV0ZS5wdXNoKGl0ZW1SZWNvcmQpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuZGVsZXRlTXV0aVJvd3NOb0NvbmZpcm0ocmVjb3Jkc0RlbGV0ZSk7CgogICAgICAgICAgICAgIGNhc2UgMzE6CiAgICAgICAgICAgICAgICBkZWxldGVOb0FyaXNlID0gX2NvbnRleHQ2LnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgICAgICAvL1Nob3cgdG9hc3QgdGjDtG5nIGLDoW8KICAgICAgICAgICAgICAgIGlmIChyZWNvcmRzRGVsZXRlLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgLy9OZ+G7q25nIHPhu60gZOG7pW5nIHbDoCB4w7NhCiAgICAgICAgICAgICAgICAgIGlmIChpbmFjdGl2ZUFyaXNlLlN1Y2Nlc3MgJiYgZGVsZXRlTm9BcmlzZS5TdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgbWUuJHRvYXN0LnN1Y2Nlc3MobWUuJHQoImkxOG5CYXNlRm9ybS5TYXZlU3VjY2Vzc01lc3NhZ2UiKSk7CiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbWUuJHRvYXN0LmVycm9yKG1lLiR0KCJpMThuQmFzZUZvcm0uU2F2ZUVycm9yTWVzc2FnZSIpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy9DaOG7iSBuZ+G7q25nIHPhu60gZOG7pW5nCiAgICAgICAgICAgICAgICAgIGlmIChpbmFjdGl2ZUFyaXNlLlN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBtZS4kdG9hc3Quc3VjY2VzcyhtZS4kdCgiaTE4bkJhc2VGb3JtLlNhdmVTdWNjZXNzTWVzc2FnZSIpKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtZS4kdG9hc3QuZXJyb3IobWUuJHQoImkxOG5CYXNlRm9ybS5TYXZlRXJyb3JNZXNzYWdlIikpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMzM6CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDM2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMzU6CiAgICAgICAgICAgICAgICBtZS4kbXMubXNnQm94LnNob3dXYXJuaW5nKG1lLiR0KCJpMThuQmFzZUZvcm0uVmFsaWRhdGUuQ2FuTm90RGVsZXRlQXJpc2UiKSk7CgogICAgICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgiYnJlYWsiLCA1OCk7CgogICAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgICAgICBpZiAoIWZpZWxkLmlzSW5hY3RpdmVBbmREZWxldGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA0NTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy9DaOG7iSB0aMO0bmcgYsOhbyBuZ+G7q25nIHPhu60gZOG7pW5nIHbDoCB4w7NhIHbhu5tpIGPDoWMgbcOgbiBkYW5oIG3hu6VjCiAgICAgICAgICAgICAgICBjb25maWdNZXNzYWdlID0gbWUuZ2V0QXJpc2VDb25maXJtTWVzYWdlKG1vZHVsZU5hbWUsIGxpc3RBcmlzZW5kLCBDT0RFLkFyaXNlbmVkKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDE7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuJG1zLm1zZ0JveC5zaG93UXVlc3Rpb24oY29uZmlnTWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgNDE6CiAgICAgICAgICAgICAgICBhbnN3ZXIgPSBfY29udGV4dDYuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoYW5zd2VyID09ICJZZXMiKSB7CiAgICAgICAgICAgICAgICAgIC8vTmfhu6tuZyBz4butIGThu6VuZyBi4bqjbiBnaGkgcGjDoXQgc2luaAogICAgICAgICAgICAgICAgICBtZS5zZXRBY3RpdmVNdXRpUm93cyhyZXN1bHQuRGF0YVswXS5FbnRpdHksICJpbmFjdGl2ZSIpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA0NToKICAgICAgICAgICAgICAgIG1lLiRtcy5tc2dCb3guc2hvd1dhcm5pbmcobWUuJHQoImkxOG5CYXNlRm9ybS5WYWxpZGF0ZS5DYW5Ob3REZWxldGVBcmlzZSIpKTsKCiAgICAgICAgICAgICAgY2FzZSA0NjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJicmVhayIsIDU4KTsKCiAgICAgICAgICAgICAgY2FzZSA0NzoKICAgICAgICAgICAgICAgIGlmICghaXNBcmlzZU11bHRpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1lLiRtcy5tc2dCb3guc2hvd1dhcm5pbmcobWUuJHQoImkxOG5CYXNlRm9ybS5WYWxpZGF0ZS5FcnJvckRlbGV0ZU11bHRpIikpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoImJyZWFrIiwgNTgpOwoKICAgICAgICAgICAgICBjYXNlIDUyOgogICAgICAgICAgICAgICAgLy9tZS4kdG9hc3QuZXJyb3IobWUuJHQoImkxOG5CYXNlRm9ybS5WYWxpZGF0ZS5OZXdNZXNzYWdlRGVsZXRlIikuZm9ybWF0KG1vZHVsZU5hbWUsIGNvZGVzKSk7CiAgICAgICAgICAgICAgICBtZS4kbXMubXNnQm94LnNob3dXYXJuaW5nKG1lLiR0KCJpMThuQmFzZUZvcm0uVmFsaWRhdGUuRXJyb3JEZWxldGVNdWx0aSIpKTsKCiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkRhdGEpIHsKICAgICAgICAgICAgICAgICAga2V5RmllbGQgPSBtZS4kc3RvcmUuc3RhdGVbbWUubW9kdWxlXS5fY29uZmlnLmZpZWxkLmtleTsKICAgICAgICAgICAgICAgICAgcmVjb3JkLmZvckVhY2goZnVuY3Rpb24gKGkpIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHQuRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaVtrZXlGaWVsZF0gIT0gaXRlbS5FbnRpdHlba2V5RmllbGRdICYmIGlba2V5RmllbGRdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lLmdyaWQuZGF0YXgucmVtb3ZlKGkpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gLy8gcmVjb3JkID0gW107CiAgICAgICAgICAgICAgICAvL21lLnNlbGVjdGlvbkNoYW5nZShyZWNvcmQpOwogICAgICAgICAgICAgICAgLy8gbWUuc2VsZWN0ZWQgPSBbXTsKICAgICAgICAgICAgICAgIC8vbWUucmVsb2FkKCk7CgoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuYWJydXB0KCJicmVhayIsIDU4KTsKCiAgICAgICAgICAgICAgY2FzZSA1NToKICAgICAgICAgICAgICAgIGlmICghaXNBcmlzZU11bHRpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIG1lLiRtcy5tc2dCb3guc2hvd1dhcm5pbmcobWUuJHQoImkxOG5CYXNlRm9ybS5WYWxpZGF0ZS5FcnJvckRlbGV0ZU11bHRpIikpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoImJyZWFrIiwgNTgpOwoKICAgICAgICAgICAgICBjYXNlIDU4OgogICAgICAgICAgICAgICAgcmVjb3JkID0gW107CiAgICAgICAgICAgICAgICBtZS5zZWxlY3RlZCA9IFtdOwogICAgICAgICAgICAgICAgbWUucmVsb2FkKCk7CgogICAgICAgICAgICAgIGNhc2UgNjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQ8OidSB0aMO0bmcgYsOhbyBraGkgY8OzIHBow6F0IHNpbmggZOG7ryBsaeG7h3UNCiAgICAgKiBOVFRIQU5IMQ0KICAgICAqLwogICAgZ2V0QXJpc2VDb25maXJtTWVzYWdlOiBmdW5jdGlvbiBnZXRBcmlzZUNvbmZpcm1NZXNhZ2UobW9kdWxlTmFtZSwgbGlzdEFyaXNlbmQsIGNvZGUpIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgdmFyIENPREUgPSBtZS4kbXMuZW51bS5TZXJ2aWNlUmVzcG9uc2VDb2RlOwogICAgICB2YXIgdGl0bGVOYW1lID0gbWUuJHQoImkxOG5CYXNlRm9ybS5NZXNzYWdlLkNvbmZpcm1EZWxldGVUaXRsZSIpLmZvcm1hdChtb2R1bGVOYW1lKSwKICAgICAgICAgIG1lcywKICAgICAgICAgIG1lc0xpc3RBcmlzZTsgLy9CdWlsZCBjw6J1IHRow7RuZyBiw6FvCgogICAgICBtZXNMaXN0QXJpc2UgPSBsaXN0QXJpc2VuZC5sZW5ndGggPiAyID8gIjxiPiIuY29uY2F0KGxpc3RBcmlzZW5kWzBdLCAiPC9iPiwgPGI+IikuY29uY2F0KGxpc3RBcmlzZW5kWzFdLCAiPC9iPiB2XHhFMCA8Yj4iKS5jb25jYXQobGlzdEFyaXNlbmQubGVuZ3RoIC0gMiwgIjwvYj4gIikuY29uY2F0KG1vZHVsZU5hbWUsICIga2hceEUxYyIpIDogIjxiPiIuY29uY2F0KGxpc3RBcmlzZW5kLmpvaW4oIjwvYj4sIDxiPiIpLCAiPC9iPiIpOwogICAgICBtZXMgPSBtZS5nZXRBcmlzZU1lc3NhZ2UoY29kZSwgbGlzdEFyaXNlbmQsIG1lc0xpc3RBcmlzZSwgbW9kdWxlTmFtZSk7IC8vQ29uZmlnIGPDoWMgYnV0dG9uCgogICAgICB2YXIgYnRuQ29uZmlnID0gW3sKICAgICAgICBrZXk6ICJObyIsCiAgICAgICAgdGFyZ2V0OiAiUmlnaHQiLAogICAgICAgIHRleHQ6ICJI4buneSIsCiAgICAgICAgdHlwZUJ1dHRvbjogInNlY29uZGFyeSIKICAgICAgfSwgewogICAgICAgIGtleTogIlllcyIsCiAgICAgICAgdGFyZ2V0OiAiUmlnaHQiLAogICAgICAgIHRleHQ6ICLEkOG7k25nIMO9IiwKICAgICAgICBmb2N1czogdHJ1ZSwKICAgICAgICB0eXBlQnV0dG9uOiAiYmx1ZSIKICAgICAgfV07CiAgICAgIHJldHVybiB7CiAgICAgICAgdGl0bGU6IHRpdGxlTmFtZSwKICAgICAgICBtZXNzYWdlOiBtZXMsCiAgICAgICAgYnRuQ29uZmlnOiBidG5Db25maWcKICAgICAgfTsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgY8OidSB0aMO0bmcgYsOhbyBraGkgcGjDoXQgc2luaA0KICAgICAqIFZp4bq/dCByacOqbmcgcmEgxJHhu4Mgb3ZlcnJpZGUgbOG6oWkgdsOsIG3hu5l0IHPhu5EgbcOgbiBjw7MgY8OidSB0aMO0bmcgYsOhbyBsw6AgTmfhu6tuZyB0aGVvIGTDtWkgdGhheSB2w6wgTmfhu6tuZyBz4butIGThu6VuZw0KICAgICAqIEBwYXJhbSB7Kn0gY29kZQ0KICAgICAqIE5URElFTSAxNS4xMi4yMDIxDQogICAgICovCiAgICBnZXRBcmlzZU1lc3NhZ2U6IGZ1bmN0aW9uIGdldEFyaXNlTWVzc2FnZShjb2RlLCBsaXN0QXJpc2VuZCwgbWVzTGlzdEFyaXNlLCBtb2R1bGVOYW1lKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHZhciBtZXMgPSAiIjsKICAgICAgdmFyIENPREUgPSBtZS4kbXMuZW51bS5TZXJ2aWNlUmVzcG9uc2VDb2RlOwoKICAgICAgc3dpdGNoIChjb2RlKSB7CiAgICAgICAgY2FzZSBDT0RFLkRlbGV0ZU11bHRpQXJpc2VuZWQ6CiAgICAgICAgICBtZXMgPSBtZS4kdCgiaTE4bkJhc2VGb3JtLlZhbGlkYXRlLkRlbGV0ZU11bHRpSGFzTXVsdGlBcmlzZW5lZCIpLmZvcm1hdChtb2R1bGVOYW1lLCBtZXNMaXN0QXJpc2UpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgLy8geMOzYSAxIGLhuqNuIGdoaSB2w6AgYuG6o24gZ2hpIMSRw7MgYuG7iyBjw7MgcGjDoXQgc2luaDoKCiAgICAgICAgY2FzZSBDT0RFLkFyaXNlbmVkOgogICAgICAgICAgbWVzID0gbWUuJHQoImkxOG5CYXNlRm9ybS5WYWxpZGF0ZS5EZWxldGVBcmlzZSIpLmZvcm1hdChtb2R1bGVOYW1lLCBsaXN0QXJpc2VuZFswXSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmV0dXJuIG1lczsKICAgIH0sCgogICAgLyoqDQogICAgICogTmfhu6tuZyBz4butIGThu6VuZyBi4bqjbiBnaGkgcGjDoXQgc2luaCBk4buvIGxp4buHdQ0KICAgICAqIE5UVEhBTkgxDQogICAgICovCiAgICBzZXRJbmFjdGl2ZUFyaXNlOiBmdW5jdGlvbiBzZXRJbmFjdGl2ZUFyaXNlKHJlY29yZHMpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNygpIHsKICAgICAgICB2YXIgbWUsIGluYWN0aXZlLCBmaWVsZCwgbGlzdElELCBwYXJhbTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgbWUgPSBfdGhpczc7CiAgICAgICAgICAgICAgICBpbmFjdGl2ZSA9IDE7CgogICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHJlY29yZHMpKSB7CiAgICAgICAgICAgICAgICAgIHJlY29yZHMgPSBbcmVjb3Jkc107CiAgICAgICAgICAgICAgICB9IC8vc2hvdyBtYXNrCiAgICAgICAgICAgICAgICAvLyBtZS5sb2FkaW5nID0gdHJ1ZTsKCgogICAgICAgICAgICAgICAgZmllbGQgPSBtZS4kc3RvcmUuc3RhdGVbbWUubW9kdWxlXS5fY29uZmlnLmZpZWxkOwogICAgICAgICAgICAgICAgbGlzdElEID0gcmVjb3Jkcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW1bZmllbGQua2V5XTsKICAgICAgICAgICAgICAgIH0pLmpvaW4oIiwiKTsKICAgICAgICAgICAgICAgIHBhcmFtID0gewogICAgICAgICAgICAgICAgICBUYWJsZU5hbWU6IGZpZWxkLnRhYmxlLAogICAgICAgICAgICAgICAgICBLZXlGaWVsZDogZmllbGQua2V5LAogICAgICAgICAgICAgICAgICBWYWx1ZTogaW5hY3RpdmUsCiAgICAgICAgICAgICAgICAgIExpc3RJRDogbGlzdElELAogICAgICAgICAgICAgICAgICBPcmdhbml6YXRpb25JRDogbWUuZ2V0T3JnYW5pemF0aW9uRmlsdGVyKCkKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuJHN0b3JlLmRpc3BhdGNoKCIiLmNvbmNhdChfdGhpczcubW9kdWxlLCAiL3VwZGF0ZVN0YXR1cyIpLCBwYXJhbSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDcuc2VudCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNyk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBYw7NhIG5oaeG7gXUgYuG6o24gZ2hpIGtow7RuZyBj4bqnbiBwb3VwIHRow7RuZyBiw6FvDQogICAgICogTlRUSEFOSDENCiAgICAgKi8KICAgIGRlbGV0ZU11dGlSb3dzTm9Db25maXJtOiBmdW5jdGlvbiBkZWxldGVNdXRpUm93c05vQ29uZmlybShyZWNvcmRzKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIG1lLCB0ZW1wcywgYXVkaXRpbmdMb2csIHBhcmFtOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzODsKICAgICAgICAgICAgICAgIHRlbXBzID0gW107CiAgICAgICAgICAgICAgICByZWNvcmRzLmZvckVhY2goZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHt9OyAvL0Lhu48gYuG7m3QgY8OhYyB0aMO0bmcgdGluIGfhu61pIGzDqm4gc3YuCgogICAgICAgICAgICAgICAgICB2YXIgZHJvcGVkQ29sdW1ucyA9IG1lLmdldElnbm9yZWRDb2x1bW5zKCk7CgogICAgICAgICAgICAgICAgICB2YXIgX2xvb3AyID0gZnVuY3Rpb24gX2xvb3AyKGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNEcm9wZWRDb2x1bW4gPSBkcm9wZWRDb2x1bW5zLmZpbmQoZnVuY3Rpb24gKF8pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfID09IGk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmICghaXNEcm9wZWRDb2x1bW4pIHsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSByZWNvcmRbaV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByZWNvcmQpIHsKICAgICAgICAgICAgICAgICAgICBfbG9vcDIoaSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRlbXBzLnB1c2godGVtcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGF1ZGl0aW5nTG9nID0gewogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogTVNKc29uLnNlcmlhbGl6ZShtZS5nZW5lcmF0ZURlc2NyaXB0aW9uQXVkaXRpbmdMb2cocmVjb3JkcykpLAogICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IG1lLmJ1aWxkUmVmZXJlbmNlKHJlY29yZHMpLAogICAgICAgICAgICAgICAgICBhY3Rpb246IG1lLmFjdGlvbkF1ZGl0aW5nTG9nLAogICAgICAgICAgICAgICAgICBlbnRpdHk6IG1lLm1vZHVsZSwKICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHBhcmFtID0gewogICAgICAgICAgICAgICAgICBFbnRpdHk6IHRlbXBzLAogICAgICAgICAgICAgICAgICBCeVBhc3NWYWxpZGF0ZTogbnVsbCwKICAgICAgICAgICAgICAgICAgQXVkaXRpbmdMb2c6IE1TSnNvbi5zZXJpYWxpemUoYXVkaXRpbmdMb2cpLAogICAgICAgICAgICAgICAgICBUeXBlOiBtZS4kbXMuZW51bS5EZWxldGVUeXBlLk11bHRpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIG1lLiRzdG9yZS5kaXNwYXRjaCgiIi5jb25jYXQoX3RoaXM4Lm1vZHVsZSwgIi9kZWxldGUiKSwgcGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQ4LnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogSMOgbSBjdXN0b20gZMO5bmcgY2hvIHjhu60gbMO9IHRow6ptIHNhdSBraGkgeMOzYQ0KICAgICAqIE5UQkFPIDAyLjExLjIwMjENCiAgICAgKi8KICAgIGN1c3RvbUFmdGVyRGVsZXRlOiBmdW5jdGlvbiBjdXN0b21BZnRlckRlbGV0ZShkZWxldGVSZWNvcmQsIHJlc3VsdCkge30sCiAgICBnZXRGaWVsZHM6IGZ1bmN0aW9uIGdldEZpZWxkcygpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEzhuqV5IHRoYW0gc+G7kSBraGkgbeG7nyBmb3JtIGNoaSB0aeG6v3QNCiAgICAgKiAqLwogICAgZ2V0RGV0YWlsUGFyYW1ldGVyOiBmdW5jdGlvbiBnZXREZXRhaWxQYXJhbWV0ZXIoZm9ybU5hbWUsIG1vZGUsIGRlZmF1bHREYXRhKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHZhciBwYXJhbSA9IHsKICAgICAgICBkYXRhOiBkZWZhdWx0RGF0YSB8fCBudWxsCiAgICAgIH07CgogICAgICBzd2l0Y2ggKG1vZGUpIHsKICAgICAgICBjYXNlIG1lLiRtcy5lbnVtLkZvcm1TdGF0ZS5EdXBsaWNhdGU6CiAgICAgICAgY2FzZSBtZS4kbXMuZW51bS5Gb3JtU3RhdGUuRWRpdDoKICAgICAgICBjYXNlIG1lLiRtcy5lbnVtLkZvcm1TdGF0ZS5WaWV3OgogICAgICAgICAgdmFyIGtleUZpZWxkID0gbWUuJHN0b3JlLnN0YXRlW21lLm1vZHVsZV0uX2NvbmZpZy5maWVsZC5rZXk7CgogICAgICAgICAgaWYgKGtleUZpZWxkKSB7CiAgICAgICAgICAgIHBhcmFtLmlkID0gZGVmYXVsdERhdGFba2V5RmllbGRdOwogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICB9CgogICAgICBwYXJhbS5tb2RlID0gbW9kZTsKICAgICAgbWUuY3VzdG9tRGV0YWlsUGFyYW0ocGFyYW0pOwogICAgICByZXR1cm4gcGFyYW07CiAgICB9LAogICAgY3VzdG9tRGV0YWlsUGFyYW06IGZ1bmN0aW9uIGN1c3RvbURldGFpbFBhcmFtKHBhcmFtKSB7fSwKCiAgICAvKioNCiAgICAgKiBob3ZlciBi4bqjbiBnaGkgLT4gaGnhu4NuIHRo4buLIG1lbnUNCiAgICAgKi8KICAgIGdyaWRSb3dIb3ZlcjogZnVuY3Rpb24gZ3JpZFJvd0hvdmVyKCkge30sCgogICAgLyoqDQogICAgICogY2xpY2sgYuG6o24gZ2hpIC0+IGhp4buDbiB0aOG7iyBtZW51DQogICAgICovCiAgICBncmlkUm93T3ZlcjogZnVuY3Rpb24gZ3JpZFJvd092ZXIocmVjb3JkLCBlKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIG1lLnJvd0FjdGlvbnMgPSBtZS5nZXRSZWNvcmRBY3Rpb25zKHJlY29yZCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIGzhuqV5IGRhbmggc8OhY2ggYWN0aW9uIGPhu6dhIGLhuqNuIGdoaQ0KICAgICAqLwogICAgZ2V0UmVjb3JkQWN0aW9uczogZnVuY3Rpb24gZ2V0UmVjb3JkQWN0aW9ucyhyZWNvcmQpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgY29tbWFuZDogIkVkaXQiLAogICAgICAgIGljb246ICJlZGl0IiwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCJpMThuQ29tbW9uLmNvbW1hbmQuZWRpdCIpCiAgICAgIH0sIHsKICAgICAgICBjb21tYW5kOiAiRGVsZXRlIiwKICAgICAgICBpY29uOiAiZGVsZXRlIiwKICAgICAgICB0ZXh0OiB0aGlzLiR0KCJpMThuQ29tbW9uLmNvbW1hbmQuZGVsZXRlIikKICAgICAgfV07CiAgICB9LAoKICAgIC8qKg0KICAgICAqIGNsaWNrIGFjdGlvbiByb3cNCiAgICAgKi8KICAgIGdyaWRSb3dBY3Rpb25DbGljazogZnVuY3Rpb24gZ3JpZFJvd0FjdGlvbkNsaWNrKGNvbW1hbmQsIHJlY29yZCwgZXZlbnQpIHsKICAgICAgdmFyIG1lID0gdGhpczsKCiAgICAgIHN3aXRjaCAoY29tbWFuZCkgewogICAgICAgIGNhc2UgIkVkaXQiOgogICAgICAgICAgbWUuZWRpdChyZWNvcmQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgIkRlbGV0ZSI6CiAgICAgICAgICBtZS5kZWxldGUocmVjb3JkKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJEdXBsaWNhdGUiOgogICAgICAgICAgbWUuZHVwbGljYXRlKHJlY29yZCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiVmlldyI6CiAgICAgICAgICBtZS52aWV3KHJlY29yZCk7CiAgICAgICAgICBicmVhazsKCiAgICAgICAgY2FzZSAiYWN0aXZlIjoKICAgICAgICBjYXNlICJpbmFjdGl2ZSI6CiAgICAgICAgICBtZS5zZXRBY3RpdmVNdXRpUm93cyhyZWNvcmQsIGNvbW1hbmQpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBtZS4kbXMubXNnQm94LnNob3dJbmZvKG1lLiR0KCJpMThuQ29tbW9uLkZlYXR1cmVzSXNEZXZlbG9waW5nIikpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogVGhheSDEkeG7lWkgYuG6o24gZ2hpIGNo4buNbg0KICAgICAqLwogICAgc2VsZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiBzZWxlY3Rpb25DaGFuZ2UocmVjb3JkcykgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICB2YXIgYWN0aW9ucyA9IFtdOwoKICAgICAgaWYgKHJlY29yZHMubGVuZ3RoID49IDEpIHsKICAgICAgICBhY3Rpb25zID0gbWUuZ2V0QWN0aW9uTXVsdGkocmVjb3JkcywgbWUuc2VsZWN0QWxsUGFnZSk7CiAgICAgIH0KCiAgICAgIG1lLmFjdGlvbk11bHRpID0gYWN0aW9uczsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgZGFuaCBzw6FjaCBhY3Rpb24geOG7rSBsw70ga2hpIG5oaeG7gXUgYuG6o24gZ2hpIMSRxrDhu6NjIGNo4buNbg0KICAgICAqIFRETkdISUEgMTAvMTAvMjAyMQ0KICAgICAqIG3hurdjIMSR4buLbmggY2jhu4kgY+G6p24geMOzYSBuaGnhu4F1IHRow7RpLCBtw6BuIG7DoG8gdGjDqm0gdMOtbmggbsSDbmcgdGjDrCBwaOG6o2kgb3ZlcnJpZGUgbOG6oWkNCiAgICAgKi8KICAgIGdldEFjdGlvbk11bHRpOiBmdW5jdGlvbiBnZXRBY3Rpb25NdWx0aShyZWNvcmRzLCBzZWxlY3RBbGxQYWdlKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIGNvbW1hbmQ6ICJhY3RpdmUiLAogICAgICAgIHRleHQ6ICJUaGVvIGTDtWkiLAogICAgICAgIGNsczogInNlY29uZGFyeS1vdXRsaW5lIgogICAgICB9LCB7CiAgICAgICAgY29tbWFuZDogImluYWN0aXZlIiwKICAgICAgICB0ZXh0OiAiTmfhu6tuZyB0aGVvIGTDtWkiLAogICAgICAgIGNsczogInByaW1hcnktb3V0bGluZSIKICAgICAgfSwgewogICAgICAgIGNvbW1hbmQ6ICJkZWxldGUiLAogICAgICAgIHRleHQ6ICJYw7NhIiwKICAgICAgICBjbHM6ICJzZWNvbmRhcnktb3V0bGluZS1yZWQiCiAgICAgIH1dOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDbGljayB2w6BvIGFjdGlvbiBjaOG7jW4gbmhp4buBdSBi4bqjbiBnaGkNCiAgICAgKi8KICAgIG11bHRpU2VsZWN0QWN0aW9uQ2xpY2s6IGZ1bmN0aW9uIG11bHRpU2VsZWN0QWN0aW9uQ2xpY2soY29tbWFuZCwgcmVjb3Jkcywgc2VsZWN0QWxsUGFnZSwgZXZlbnQpIHsKICAgICAgdmFyIG1lID0gdGhpczsKCiAgICAgIHN3aXRjaCAoY29tbWFuZCkgewogICAgICAgIGNhc2UgImRlbGV0ZSI6CiAgICAgICAgICBtZS5kZWxldGVNdXRpUm93cyhyZWNvcmRzKTsKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICJhY3RpdmUiOgogICAgICAgIGNhc2UgImluYWN0aXZlIjoKICAgICAgICAgIG1lLnNldEFjdGl2ZU11dGlSb3dzKHJlY29yZHMsIGNvbW1hbmQpOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCgogICAgLyoNCiAgICAgKiAgSMOgbSB4w7NhIG5oaeG7gXUgYuG6o24gZ2hpLg0KICAgICAqIEBtb2RpZmllZCBieSBUVkxvaSAyMS4wNi4yMDIxLiBsxrDhu6NjIGLhu48gMSBz4buRIHRow7RuZyB0aW4gdHLGsOG7m2Mga2hpIGfhu61pIGLhuqNuIGdoaSBsw6puIHNlcnZlDQogICAgICovCiAgICBkZWxldGVNdXRpUm93czogZnVuY3Rpb24gZGVsZXRlTXV0aVJvd3MocmVjb3JkcykgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU5KCkgewogICAgICAgIHZhciBtZSwgY29uZmlnTWVzc2FnZSwgYW5zd2VyLCB0ZW1wcywgYXVkaXRpbmdMb2csIHBhcmFtLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIG1lID0gX3RoaXM5OwoKICAgICAgICAgICAgICAgIGlmIChtZS5jaGVja0FjdGlvblBlcm1pc3Npb25BbGVydChtZS4kdCgiaTE4blBlcm1pc3Npb24uU3ViU3lzdGVtQ29kZS5Db2RlLkRFTEVURSIpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDkuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgaWYgKG1lLnZhbGlkYXRlQmVmb3JlRGVsZXRlKHJlY29yZHMpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuZ2V0RGVsZXRlQ29uZmlybU1lc3NhZ2UocmVjb3Jkcyk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNvbmZpZ01lc3NhZ2UgPSBfY29udGV4dDkuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuJG1zLm1zZ0JveC5zaG93UXVlc3Rpb24oY29uZmlnTWVzc2FnZSk7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBhbnN3ZXIgPSBfY29udGV4dDkuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShhbnN3ZXIgPT0gIlllcyIpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRlbXBzID0gW107CiAgICAgICAgICAgICAgICByZWNvcmRzLmZvckVhY2goZnVuY3Rpb24gKHJlY29yZCkgewogICAgICAgICAgICAgICAgICB2YXIgdGVtcCA9IHt9OyAvL0Lhu48gYuG7m3QgY8OhYyB0aMO0bmcgdGluIGfhu61pIGzDqm4gc3YuCgogICAgICAgICAgICAgICAgICB2YXIgZHJvcGVkQ29sdW1ucyA9IG1lLmdldElnbm9yZWRDb2x1bW5zKCk7CgogICAgICAgICAgICAgICAgICB2YXIgX2xvb3AzID0gZnVuY3Rpb24gX2xvb3AzKGkpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaXNEcm9wZWRDb2x1bW4gPSBkcm9wZWRDb2x1bW5zLmZpbmQoZnVuY3Rpb24gKF8pIHsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfID09IGk7CiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGlmICghaXNEcm9wZWRDb2x1bW4pIHsKICAgICAgICAgICAgICAgICAgICAgIHRlbXBbaV0gPSByZWNvcmRbaV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByZWNvcmQpIHsKICAgICAgICAgICAgICAgICAgICBfbG9vcDMoaSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIHRlbXBzLnB1c2godGVtcCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGF1ZGl0aW5nTG9nID0gewogICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogTVNKc29uLnNlcmlhbGl6ZShtZS5nZW5lcmF0ZURlc2NyaXB0aW9uQXVkaXRpbmdMb2cocmVjb3JkcykpLAogICAgICAgICAgICAgICAgICByZWZlcmVuY2U6IG1lLmJ1aWxkUmVmZXJlbmNlKHJlY29yZHMpLAogICAgICAgICAgICAgICAgICBhY3Rpb246IG1lLmFjdGlvbkF1ZGl0aW5nTG9nLAogICAgICAgICAgICAgICAgICBlbnRpdHk6IG1lLm1vZHVsZSwKICAgICAgICAgICAgICAgICAgdGltZTogbmV3IERhdGUoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHBhcmFtID0gewogICAgICAgICAgICAgICAgICBFbnRpdHk6IHRlbXBzLAogICAgICAgICAgICAgICAgICBCeVBhc3NWYWxpZGF0ZTogbnVsbCwKICAgICAgICAgICAgICAgICAgQXVkaXRpbmdMb2c6IE1TSnNvbi5zZXJpYWxpemUoYXVkaXRpbmdMb2cpLAogICAgICAgICAgICAgICAgICBUeXBlOiBtZS4kbXMuZW51bS5EZWxldGVUeXBlLk11bHRpCiAgICAgICAgICAgICAgICB9OyAvLyBDdXN0b20gbOG6oWkgcGFyYW0geMOzYQoKICAgICAgICAgICAgICAgIHBhcmFtID0gbWUuY3VzdG9tRGVsZXRlUGFyYW0ocmVjb3JkcywgcGFyYW0pOwogICAgICAgICAgICAgICAgbWUuJG1zLmNvbW1vbkZuLm1hc2soKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUucmVxdWVzdERlbGV0ZURhdGEocmVjb3JkcywgcGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQ5LnNlbnQ7CiAgICAgICAgICAgICAgICBtZS4kbXMuY29tbW9uRm4udW5tYXNrKCk7CiAgICAgICAgICAgICAgICBtZS5hZnRlckRlbGV0ZShyZWNvcmRzLCByZXN1bHQpOyAvL2xvZyBmaXJlYmFzZQogICAgICAgICAgICAgICAgLy8gbWUubG9nRGF0YUZpcmVCYXNlKCkKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBIw6BtIGN1c3RvbSBkZWxldGUgcGFyYW0NCiAgICAgKiBOVEJBTzogMDcuMTIuMjAyMQ0KICAgICAqIEBwYXJhbSB7Kn0gcGFyYW0NCiAgICAgKiBAcmV0dXJucw0KICAgICAqLwogICAgY3VzdG9tRGVsZXRlUGFyYW06IGZ1bmN0aW9uIGN1c3RvbURlbGV0ZVBhcmFtKHJlY29yZCwgcGFyYW0pIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgcmV0dXJuIHBhcmFtOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBDbGljayB2w6BvIGFjdGlvbiBjaOG7jW4gbmhp4buBdSBi4bqjbiBnaGk6IENo4buNbiB04bqldCBj4bqjDQogICAgICovCiAgICBtdWx0aVNlbGVjdEFsbENsaWNrOiBmdW5jdGlvbiBtdWx0aVNlbGVjdEFsbENsaWNrKCkgewogICAgICB0aGlzLnNlbGVjdEFsbFBhZ2UgPSAhdGhpcy5zZWxlY3RBbGxQYWdlOwoKICAgICAgaWYgKCF0aGlzLnNlbGVjdEFsbFBhZ2UpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gW107CiAgICAgICAgdGhpcy5ncmlkLmNoZWNrYWxsID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5ncmlkLmNoZWNrYWxsID0gdHJ1ZTsKICAgICAgICB0aGlzLmdyaWQuJGVtaXQoImlucHV0IiwgdGhpcy5ncmlkLmRhdGF4KTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBC4buPIHTDrWNoIGNo4buNbiBjw6FjIGLhuqNuIGdoaQ0KICAgICAqLwogICAgbXVsdGlTZWxlY3RVbmNoZWNrOiBmdW5jdGlvbiBtdWx0aVNlbGVjdFVuY2hlY2soKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIG1lLnNlbGVjdGVkID0gW107IC8vIE5NVFVBTjIgMjguMTEuMjAyMTogYuG7jyB0w61jaCBjaOG7jW4gdHLDqm4gZ3JpZEVkaXRvcgoKICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWUuZ3JpZC5saXN0Um93U2VsZWN0ZWQpKSB7CiAgICAgICAgbWUuZ3JpZC5saXN0Um93U2VsZWN0ZWQgPSBbXTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiBLaGFpIGLDoW8gc+G7sSBraeG7h24gY+G7p2EgZm9ybQ0KICAgICAqLwogICAgaW5pdEV2ZW50OiBmdW5jdGlvbiBpbml0RXZlbnQoKSB7CiAgICAgIHZhciBtZSA9IHRoaXMsCiAgICAgICAgICBncmlkID0gbWUuZ3JpZCwKICAgICAgICAgIGFjdGlvbk11bHRpID0gbWUuYWN0aW9uTXVsdGlDb21wb25lbnQsCiAgICAgICAgICBhY3Rpb25NdWx0aUJpZ1NjcmVubiA9IG1lLmFjdGlvbk11bHRpQmlnU2NyZWVuQ29tcG9uZW50OwoKICAgICAgaWYgKGdyaWQpIHsKICAgICAgICBncmlkLiRvbigibG9hZERhdGEiLCBtZS5sb2FkRGF0YSk7CiAgICAgICAgZ3JpZC4kb24oImRibGNsaWNrIiwgbWUuZ3JpZFJvd0RiQ2xpY2spOwogICAgICAgIGdyaWQuJG9uKCJyb3dtb3VzZW92ZXIiLCBtZS5ncmlkUm93T3Zlcik7CiAgICAgICAgZ3JpZC4kb24oInJvd2FjdGlvbmNsaWNrIiwgbWUuZ3JpZFJvd0FjdGlvbkNsaWNrKTsKICAgICAgICBncmlkLiRvbigiaW5wdXQiLCBtZS5zZWxlY3Rpb25DaGFuZ2UpOwogICAgICAgIGdyaWQuJG9uKCJjaGFuZ2VwYWdlc2l6ZSIsIG1lLmdyaWRDaGFuZ2VQYWdlU2l6ZSk7CgogICAgICAgIGlmICghZ3JpZC5pc0dyaWRUcmVlKSB7CiAgICAgICAgICBncmlkLiRvbigiZmlsdGVyIiwgbWUucmVsb2FkKTsKICAgICAgICB9CgogICAgICAgIGdyaWQuJG9uKCJyZXNpemVDb2wiLCBtZS5ncmlkUmVzaXplQ29sKTsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbk11bHRpKSB7CiAgICAgICAgYWN0aW9uTXVsdGkuJG9uKCJhY3Rpb25jbGljayIsIG1lLm11bHRpU2VsZWN0QWN0aW9uQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpLiRvbigic2VsZWN0YWxsIiwgbWUubXVsdGlTZWxlY3RBbGxDbGljayk7CiAgICAgICAgYWN0aW9uTXVsdGkuJG9uKCJ1bmNoZWNrIiwgbWUubXVsdGlTZWxlY3RVbmNoZWNrKTsKICAgICAgfQoKICAgICAgaWYgKGFjdGlvbk11bHRpQmlnU2NyZW5uKSB7CiAgICAgICAgYWN0aW9uTXVsdGlCaWdTY3Jlbm4uJG9uKCJhY3Rpb25jbGljayIsIG1lLm11bHRpU2VsZWN0QWN0aW9uQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpQmlnU2NyZW5uLiRvbigic2VsZWN0YWxsIiwgbWUubXVsdGlTZWxlY3RBbGxDbGljayk7CiAgICAgICAgYWN0aW9uTXVsdGlCaWdTY3Jlbm4uJG9uKCJ1bmNoZWNrIiwgbWUubXVsdGlTZWxlY3RVbmNoZWNrKTsKICAgICAgfQogICAgfSwKCiAgICAvKioNCiAgICAgKiByZW1vdmUgZXZlbnQgYWRkIMSR4buZbmcNCiAgICAgKi8KICAgIHJlbW92ZUV2ZW50OiBmdW5jdGlvbiByZW1vdmVFdmVudCgpIHsKICAgICAgdmFyIG1lID0gdGhpcywKICAgICAgICAgIGdyaWQgPSBtZS5ncmlkLAogICAgICAgICAgYWN0aW9uTXVsdGkgPSBtZS5hY3Rpb25NdWx0aUNvbXBvbmVudCwKICAgICAgICAgIGFjdGlvbk11bHRpQmlnU2NyZW5uID0gbWUuYWN0aW9uTXVsdGlCaWdTY3JlZW5Db21wb25lbnQ7CgogICAgICBpZiAoZ3JpZCkgewogICAgICAgIGdyaWQuJG9mZigibG9hZERhdGEiLCBtZS5sb2FkRGF0YSk7CiAgICAgICAgZ3JpZC4kb2ZmKCJkYmxjbGljayIsIG1lLmdyaWRSb3dEYkNsaWNrKTsKICAgICAgICBncmlkLiRvZmYoInJvd21vdXNlb3ZlciIsIG1lLmdyaWRSb3dDbGljayk7CiAgICAgICAgZ3JpZC4kb2ZmKCJyb3dhY3Rpb25jbGljayIsIG1lLmdyaWRSb3dBY3Rpb25DbGljayk7CiAgICAgICAgZ3JpZC4kb2ZmKCJpbnB1dCIsIG1lLnNlbGVjdGlvbkNoYW5nZSk7CiAgICAgICAgZ3JpZC4kb2ZmKCJjaGFuZ2VwYWdlc2l6ZSIsIG1lLmdyaWRDaGFuZ2VQYWdlU2l6ZSk7CgogICAgICAgIGlmICghZ3JpZC5pc0dyaWRUcmVlKSB7CiAgICAgICAgICBncmlkLiRvZmYoImZpbHRlciIsIG1lLnJlbG9hZCk7CiAgICAgICAgfQoKICAgICAgICBncmlkLiRvZmYoInJlc2l6ZUNvbCIsIG1lLmdyaWRSZXNpemVDb2wpOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uTXVsdGkpIHsKICAgICAgICBhY3Rpb25NdWx0aS4kb2ZmKCJhY3Rpb25jbGljayIsIG1lLm11bHRpU2VsZWN0QWN0aW9uQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpLiRvZmYoInNlbGVjdGFsbCIsIG1lLm11bHRpU2VsZWN0QWxsQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpLiRvZmYoInVuY2hlY2siLCBtZS5tdWx0aVNlbGVjdFVuY2hlY2spOwogICAgICB9CgogICAgICBpZiAoYWN0aW9uTXVsdGlCaWdTY3Jlbm4pIHsKICAgICAgICBhY3Rpb25NdWx0aUJpZ1NjcmVubi4kb2ZmKCJhY3Rpb25jbGljayIsIG1lLm11bHRpU2VsZWN0QWN0aW9uQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpQmlnU2NyZW5uLiRvZmYoInNlbGVjdGFsbCIsIG1lLm11bHRpU2VsZWN0QWxsQ2xpY2spOwogICAgICAgIGFjdGlvbk11bHRpQmlnU2NyZW5uLiRvZmYoInVuY2hlY2siLCBtZS5tdWx0aVNlbGVjdFVuY2hlY2spOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIFh14bqldCBraOG6qXUgZXhjZWwNCiAgICAgKi8KICAgIGV4cG9ydEV4Y2VsOiBmdW5jdGlvbiBleHBvcnRFeGNlbCgpIHsKICAgICAgdmFyIF90aGlzMTAgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciBtZSwgcGFyYW07CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzMTA7CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTAuY2hlY2tBY3Rpb25QZXJtaXNzaW9uQWxlcnQobWUuJHQoImkxOG5QZXJtaXNzaW9uLlN1YlN5c3RlbUNvZGUuQ29kZS5FWFBPUlQiKSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLmdldEV4cG9ydEV4Y2VsUGFyYW0oKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcGFyYW0gPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAuY3VzdG9tUGFyYW1CZWZvcmVFeHBvcnQocGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBM4bqleSB0aGFtIHPhu5EgeHXhuqV0IGto4bqpdQ0KICAgICAqLwogICAgZ2V0RXhwb3J0RXhjZWxQYXJhbTogZnVuY3Rpb24gZ2V0RXhwb3J0RXhjZWxQYXJhbSgpIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKCkgewogICAgICAgIHZhciBwYXJhbSwgY29udHJvbGxlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTExJChfY29udGV4dDExKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTEucHJldiA9IF9jb250ZXh0MTEubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHBhcmFtID0gX3RoaXMxMS5nZXRHcmlkRXhwb3J0UGFyYW1ldGVyKF90aGlzMTEuZ3JpZCk7CiAgICAgICAgICAgICAgICBwYXJhbS5GaWxlVHlwZSA9ICJ4bHN4IjsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMS4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KF90aGlzMTEubW9kdWxlLCAiL2dldENvbnRyb2xsZXIiKSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBfY29udGV4dDExLnNlbnQ7CiAgICAgICAgICAgICAgICBwYXJhbS5HZXREYXRhVXJsID0gW2NvbnRyb2xsZXIsICJsaXN0Il0uam9pbigiLyIpOwogICAgICAgICAgICAgICAgcGFyYW0uR2V0RGF0YU1ldGhvZCA9ICJQT1NUIjsKICAgICAgICAgICAgICAgIHBhcmFtLlJlcG9ydFRpdGxlID0gX3RoaXMxMS5nZXRUaXRsZUV4cG9ydCgpOwogICAgICAgICAgICAgICAgcGFyYW0uRmlsZU5hbWUgPSBfdGhpczExLmdldEZpbGVOYW1lKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoInJldHVybiIsIHBhcmFtKTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTEuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTExKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIGzhuqV5IHRpw6p1IMSR4buBIGZpbGUgZXhjZWwNCiAgICAgKiBAcmV0dXJucyB0acOqdSDEkeG7gSBkYW5oIHPDoWNoDQogICAgICovCiAgICBnZXRUaXRsZUV4cG9ydDogZnVuY3Rpb24gZ2V0VGl0bGVFeHBvcnQoKSB7CiAgICAgIHZhciB0aXRsZSA9ICIiOwogICAgICB2YXIgZWwgPSB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCIubGlzdC10aXRsZSIpOwoKICAgICAgaWYgKGVsICYmIHR5cGVvZiBlbC5pbm5lckhUTUwgPT09ICJzdHJpbmciKSB7CiAgICAgICAgdGl0bGUgPSBlbC5pbm5lckhUTUwudHJpbSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRpdGxlID0gdGhpcy50aXRsZSA/IHRoaXMudGl0bGUudHJpbSgpIDogIiI7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aXRsZTsKICAgIH0sCgogICAgLyoqDQogICAgICogTOG6pXkgdMOqbiBmaWxlIGtoaSB4deG6pXQga2jhuql1DQogICAgICogQHJldHVybnMgdMOqbiBmaWxlIDogbuG6v3UgxJHhu4MgdHLhu5FuZyB0aMOsIG3hurdjIMSR4buLbmggbOG6pXkgdGnDqnUgxJHhu4ENCiAgICAgKi8KICAgIGdldEZpbGVOYW1lOiBmdW5jdGlvbiBnZXRGaWxlTmFtZSgpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEjDoG0gbeG7nyBwb3B1cCBz4butYSBt4bqrdQ0KICAgICAqLwogICAgb3BlblByb3RvdHlwZTogZnVuY3Rpb24gb3BlblByb3RvdHlwZSgpIHsKICAgICAgdGhpcy5zaG93RGV0YWlsKCJNc0NvbmZpZ0xpc3RMYXlvdXQiLCB0aGlzLiRtcy5lbnVtLkZvcm1TdGF0ZS5BZGQsIHsKICAgICAgICBsYXlvdXQ6IHRoaXMubGF5b3V0LAogICAgICAgIHBhcmVudDogdGhpcwogICAgICB9KTsKICAgIH0sCgogICAgLyoqDQogICAgICogQGF1dGhvciB2dmtpZXQgLSAxOC4wMy4yMDIxDQogICAgICogSMOgbSBjdXN0b20gbOG6oWkgcGFyYW0gdHLGsOG7m2Mga2hpIHh14bqldCBleGNlbA0KICAgICAqLwogICAgY3VzdG9tUGFyYW1CZWZvcmVFeHBvcnQ6IGZ1bmN0aW9uIGN1c3RvbVBhcmFtQmVmb3JlRXhwb3J0KHBhcmFtKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTEyJChfY29udGV4dDEyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0MTIucHJldiA9IF9jb250ZXh0MTIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEyKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEBhdXRob3IgdnZraWV0IC0gMTQuMDQuMjAyMQ0KICAgICAqIEjDoG0geOG7rSBsw70gZXh0RGF0YQ0KICAgICAqLwogICAgZGVjb2RlRXh0RGF0YTogZnVuY3Rpb24gZGVjb2RlRXh0RGF0YShkYXRhKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7IC8vIFjhu60gbMO9IGThu68gbGnhu4d1IG3hu58gcuG7mW5nCgogICAgICB2YXIgb3JpZ2luRmllbGRzID0gW107CgogICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eSgiRXh0RGF0YSIpKSB7CiAgICAgICAgLy8gRGFuaCBzw6FjaCBjw6FjIHRyxrDhu51uZyBk4buvIGxp4buHdSBn4buRYyBj4bunYSBk4buvIGxp4buHdQogICAgICAgIGZvciAodmFyIGkgaW4gZGF0YSkgewogICAgICAgICAgb3JpZ2luRmllbGRzLnB1c2goaSk7CiAgICAgICAgfSAvLyBNYXAgZOG7ryBsaeG7h3UgbeG7nyBy4buZbmcKCgogICAgICAgIGlmIChkYXRhLkV4dERhdGEgJiYgdHlwZW9mIGRhdGEuRXh0RGF0YSA9PT0gInN0cmluZyIpIHsKICAgICAgICAgIHZhciBleHREYXRhID0gSlNPTi5wYXJzZShkYXRhLkV4dERhdGEpOwoKICAgICAgICAgIGlmIChleHREYXRhKSB7CiAgICAgICAgICAgIG1lLiRtcy5jb21tb25Gbi5wcm9jZXNzU2VydmVyUmVzcG9uc2VEYXRhKGV4dERhdGEpOwoKICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBleHREYXRhKSB7CiAgICAgICAgICAgICAgLy8gQ2jhu4kgbWFwIGPDoWMgdHLGsOG7nW5nIGtow7RuZyBjw7MgdHJvbmcgZOG7ryBsaeG7h3UgZ+G7kWMKICAgICAgICAgICAgICBpZiAoZGF0YSAmJiBkYXRhW21dKSB7CiAgICAgICAgICAgICAgICBkYXRhW21dID0gZXh0RGF0YVttXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgLyoqDQogICAgICogWOG7rSBsw70gZOG7ryBsaeG7h3Ugc2F1IGtoaSBz4butYQ0KICAgICAqIEBwYXJhbSB7Kn0gcmVjb3JkIGLhuqNuIGdoaSBn4buRYw0KICAgICAqIEBwYXJhbSB7Kn0gc2F2ZVJlc3VsdCBi4bqjbiBnaGkgdHLDqm4gc2VydmVyIHRy4bqjIHbhu4ENCiAgICAgKiBAb3ZlcnJpZGUNCiAgICAgKi8KICAgIGFmdGVyU2F2ZUVkaXQ6IGZ1bmN0aW9uIGFmdGVyU2F2ZUVkaXQocmVjb3JkLCBzYXZlUmVzdWx0KSB7fSwKCiAgICAvKioNCiAgICAgKiBY4butIGzDvSBk4buvIGxp4buHdSBzYXUga2hpIHPhu61hIHThuqFpIG1vZGUgdmlldw0KICAgICAqIEBwYXJhbSB7Kn0gcmVjb3JkIGLhuqNuIGdoaSBn4buRYw0KICAgICAqIEBwYXJhbSB7Kn0gc2F2ZVJlc3VsdCBi4bqjbiBnaGkgdHLDqm4gc2VydmVyIHRy4bqjIHbhu4ENCiAgICAgKiBAb3ZlcnJpZGUNCiAgICAgKi8KICAgIGFmdGVyU2F2ZVZpZXc6IGZ1bmN0aW9uIGFmdGVyU2F2ZVZpZXcocmVjb3JkLCBzYXZlUmVzdWx0KSB7fSwKCiAgICAvKioNCiAgICAgKiBIw6BtIHNob3cgQWxsIGljb25maWx0ZXINCiAgICAgKiBAcGFyYW0geyp9IHJlY29yZCBi4bqjbiBnaGkgZ+G7kWMNCiAgICAgKiBAcGFyYW0geyp9IHNhdmVSZXN1bHQgYuG6o24gZ2hpIHRyw6puIHNlcnZlciB0cuG6oyB24buBDQogICAgICogQG92ZXJyaWRlDQogICAgICovCiAgICBmdW5TaG93QWxsSWNvbkZpbHRlcjogZnVuY3Rpb24gZnVuU2hvd0FsbEljb25GaWx0ZXIoKSB7CiAgICAgIC8vdGhpcy4kbmV4dFRpY2soKCk9PnsKICAgICAgdGhpcy5zaG93QWxsSWNvbkZpbHRlciA9ICF0aGlzLnNob3dBbGxJY29uRmlsdGVyOwogICAgICB0aGlzLiRyZWZzW3RoaXMudmlld1JlZl0uZnVuU2hvd0FsbEljb25GaWx0ZXIodGhpcy5zaG93QWxsSWNvbkZpbHRlcik7IC8vfSkKICAgIH0sCgogICAgLyoqDQogICAgICogY3VzdG9tIMSRaeG7gXUga2nhu4duIGzhu41jL3NlYXJjaCBtw6BuIGjDrG5oIGdyaWQgdHJlZQ0KICAgICAqIEBwYXJhbSB7Kn0gcmVjb3JkIGLhuqNuIGdoaSBjaGVjaw0KICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzIGRhbmggc8OhY2ggZmllbGQgY+G6p24gY2hlY2sgxJFrDQogICAgICogQHBhcmFtIHNlYXJjaFRleHQgxJFv4bqhbiB0ZXh0IG5o4bqtcCDhu58gw7QgdMOsbSBraeG6v20NCiAgICAgKiBN4bq3YyDEkeG7i25oIHRy4bqjIHbhu4EgdHJ1ZQ0KICAgICAqLwogICAgY2hlY2tGaWx0ZXJHcmlkVHJlZUN1c3RvbTogZnVuY3Rpb24gY2hlY2tGaWx0ZXJHcmlkVHJlZUN1c3RvbShyZWNvcmQsIHByb3BlcnRpZXMsIHNlYXJjaFRleHQpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEjDoG0gc2hvdyBjw6FjIHBvcHVwIHRoZW8gdMOqbiBs4bqleSDEkcaw4budbmcgZOG6q24gdOG7qyBow6BtIGdldFBvcHVwb21wb25lbnQNCiAgICAgKiBAcGFyYW0gbmFtZSB0w6puIGPhu6dhIGNvbXBvbmVudA0KICAgICAqIENyZWF0ZWQgYnkgTFREQVQoMTcuMDYuMjAyMCkNCiAgICAgKi8KICAgIHNob3dEZXRhaWw6IGZ1bmN0aW9uIHNob3dEZXRhaWwobmFtZSwgbW9kZSwgZGF0YSwgb3B0aW9uKSB7CiAgICAgIHZhciBtZSA9IHRoaXM7CiAgICAgIHBvcHVwVXRpbC5zaG93KG1lLCBuYW1lLCBkYXRhLCBtZS5nZXRQb3B1cE9wdGlvbihuYW1lLCBvcHRpb24pKTsKICAgIH0sCgogICAgLyoqDQogICAgICogQXV0aG9yOiDEkFZUaGkNCiAgICAgKiBDcmVhdGUgZGF0ZTogMTEvMDMvMjAyMQ0KICAgICAqIENobyBwaMOpcCBkZXRhaWwgZ+G7jWkgdOG7m2kgc3VibWl0RGV0YWlsQ2FsbGJhY2sgY+G7p2EgZGFuaCBzw6FjaCBzYXUga2hpIGPhuqV0IHhvbmcNCiAgICAgKi8KICAgIGdldFBvcHVwT3B0aW9uOiBmdW5jdGlvbiBnZXRQb3B1cE9wdGlvbihuYW1lLCBvcHRpb24pIHsKICAgICAgdmFyIG1lID0gdGhpczsKICAgICAgcmV0dXJuIHsKICAgICAgICBzdWJtaXQ6IG1lLnN1Ym1pdERldGFpbENhbGxiYWNrLAogICAgICAgIHNpbmdsZTogdHJ1ZQogICAgICB9OwogICAgfSwKCiAgICAvKioNCiAgICAgKiBBdXRob3I6IMSQVlRoaQ0KICAgICAqIENyZWF0ZSBkYXRlOiAxMS8wMy8yMDIxDQogICAgICogQ2hvIHBow6lwIGRldGFpbCBn4buNaSB04bubaSBzdWJtaXREZXRhaWxDYWxsYmFjayBj4bunYSBkYW5oIHPDoWNoIHNhdSBraGkgY+G6pXQgeG9uZw0KICAgICAqLwogICAgc3VibWl0RGV0YWlsQ2FsbGJhY2s6IGZ1bmN0aW9uIHN1Ym1pdERldGFpbENhbGxiYWNrKHJlc3VsdCwgcGFyYW0sIGFjdGlvbikgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgfSwKCiAgICAvKioNCiAgICAgKiBAb3ZlcnJpZGUNCiAgICAgKi8KICAgIGdldENvbmRpdGlvblBhcmFtZXRlcjogZnVuY3Rpb24gZ2V0Q29uZGl0aW9uUGFyYW1ldGVyKCkgewogICAgICB2YXIgbWUgPSB0aGlzOwogICAgICB2YXIgcmVzdWx0ID0gbWUuc3VwZXIoImdldENvbmRpdGlvblBhcmFtZXRlciIpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKCiAgICAvKioNCiAgICAgKiBIw6BtIHRo4buxYyBoaeG7h24gY3VzdG9tIGVudGl0eSDEkeG7kWkgduG7m2kgbmdoaeG7h3AgduG7pSDEkeG6t2MgdGjDuQ0KICAgICAqIEBhdXRob3IgdnZraWV0IC0gMjcuMDcuMjAyMQ0KICAgICAqLwogICAgZ2V0RW50aXR5VHlwZTogZnVuY3Rpb24gZ2V0RW50aXR5VHlwZSgpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIHNob3cgZmlsdGVyIHBvcHVwDQogICAgICovCiAgICBzaG93QWN0aW9uQm94OiBmdW5jdGlvbiBzaG93QWN0aW9uQm94KCkgewogICAgICBpZiAodGhpcy5pc1Nob3dBY3Rpb25Hcm91cCA9PSB0cnVlKSB7CiAgICAgICAgdGhpcy5pc1Nob3dBY3Rpb25Hcm91cCA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNTaG93QWN0aW9uR3JvdXAgPSB0cnVlOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIGhpZGUgZmlsdGVyIHBvcHVwDQogICAgICovCiAgICBoaWRkZW5BY3Rpb25Cb3g6IGZ1bmN0aW9uIGhpZGRlbkFjdGlvbkJveChldmVudCkgewogICAgICB0aGlzLmlzU2hvd0FjdGlvbkdyb3VwID0gZmFsc2U7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpIGPDoWMgYuG6o24gZ2hpIMSRxrDhu6NjIGNo4buNbg0KICAgICAqIFRETkdISUEgMTIvMTEvMjAyMQ0KICAgICAqIEBwYXJhbSB7Kn0gcmVjb3Jkcw0KICAgICAqIEBwYXJhbSB7Kn0gY29tbWFuZA0KICAgICAqLwogICAgc2V0QWN0aXZlTXV0aVJvd3M6IGZ1bmN0aW9uIHNldEFjdGl2ZU11dGlSb3dzKHJlY29yZHMsIGNvbW1hbmQpIHsKICAgICAgdmFyIF90aGlzMTIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciBtZSwgaW5hY3RpdmUsIGZpZWxkLCBsaXN0SUQsIHBhcmFtLCByZXN1bHQ7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBtZSA9IF90aGlzMTI7CiAgICAgICAgICAgICAgICBpbmFjdGl2ZSA9IGNvbW1hbmQgPT0gImFjdGl2ZSIgPyAwIDogMTsKCiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVjb3JkcykpIHsKICAgICAgICAgICAgICAgICAgcmVjb3JkcyA9IFtyZWNvcmRzXTsKICAgICAgICAgICAgICAgIH0gLy9zaG93IG1hc2sKICAgICAgICAgICAgICAgIC8vIG1lLmxvYWRpbmcgPSB0cnVlOwoKCiAgICAgICAgICAgICAgICBmaWVsZCA9IG1lLiRzdG9yZS5zdGF0ZVttZS5tb2R1bGVdLl9jb25maWcuZmllbGQ7CiAgICAgICAgICAgICAgICBsaXN0SUQgPSByZWNvcmRzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICByZXR1cm4gaXRlbVtmaWVsZC5rZXldOwogICAgICAgICAgICAgICAgfSkuam9pbigiLCIpOwogICAgICAgICAgICAgICAgcGFyYW0gPSB7CiAgICAgICAgICAgICAgICAgIFRhYmxlTmFtZTogZmllbGQudGFibGUsCiAgICAgICAgICAgICAgICAgIEtleUZpZWxkOiBmaWVsZC5rZXksCiAgICAgICAgICAgICAgICAgIFZhbHVlOiBpbmFjdGl2ZSwKICAgICAgICAgICAgICAgICAgTGlzdElEOiBsaXN0SUQsCiAgICAgICAgICAgICAgICAgIE9yZ2FuaXphdGlvbklEOiBtZS5nZXRPcmdhbml6YXRpb25GaWx0ZXIoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0MTMubmV4dCA9IDg7CiAgICAgICAgICAgICAgICByZXR1cm4gbWUuJHN0b3JlLmRpc3BhdGNoKCIiLmNvbmNhdChfdGhpczEyLm1vZHVsZSwgIi91cGRhdGVTdGF0dXMiKSwgcGFyYW0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDEzLnNlbnQ7CiAgICAgICAgICAgICAgICBtZS5hZnRlclVwZGF0ZVN0YXR1cyhyZWNvcmRzLCByZXN1bHQpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMy5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMTMpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqDQogICAgICogY+G6rXAgbmjhuq10IHNhdSBraGkgdXBkYXRlIHN0YXR1cw0KICAgICAqIEBwYXJhbSB7Kn0gcmVjb3JkDQogICAgICogQHBhcmFtIHsqfSByZXN1bHQNCiAgICAgKi8KICAgIGFmdGVyVXBkYXRlU3RhdHVzOiBmdW5jdGlvbiBhZnRlclVwZGF0ZVN0YXR1cyhyZWNvcmQsIHJlc3VsdCkgewogICAgICB2YXIgbWUgPSB0aGlzOwoKICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuU3VjY2VzcykgewogICAgICAgIG1lLiR0b2FzdC5zdWNjZXNzKG1lLiR0KCJpMThuQmFzZUZvcm0uU2F2ZVN1Y2Nlc3NNZXNzYWdlIikpOwogICAgICAgIG1lLnNlbGVjdGVkID0gW107CiAgICAgICAgbWUucmVsb2FkKCk7CiAgICAgICAgbWUuY3VzdG9tQWZ0ZXJVcGRhdGUocmVjb3JkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBtZS4kdG9hc3QuZXJyb3IobWUuJHQoImkxOG5CYXNlRm9ybS5NZXNzYWdlLkVycm9yIikpOwogICAgICB9CiAgICB9LAoKICAgIC8qKg0KICAgICAqIEzhuqV5IG9yZ2FuaXphdGlvbklEIMSR4buDIHVwZGF0ZSBzdGF0dXMsLi4uDQogICAgICogVEROR0hJQSAxNi8xMS8yMDIxDQogICAgICogQHJldHVybnMNCiAgICAgKi8KICAgIGdldE9yZ2FuaXphdGlvbkZpbHRlcjogZnVuY3Rpb24gZ2V0T3JnYW5pemF0aW9uRmlsdGVyKCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCgogICAgLyoqDQogICAgICogSMOgbSBjdXN0b20geOG7rSBsw70gc2F1IGtoaSBj4bqtcCBuaOG6rXQgdHLhuqFuZyB0aMOhaQ0KICAgICAqIE5NVFVBTjMgMTUvMy8yMDIyDQogICAgICogQHBhcmFtIHsqfSByZWNvcmQgYuG6o24gZ2hpIGPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpDQogICAgICovCiAgICBjdXN0b21BZnRlclVwZGF0ZTogZnVuY3Rpb24gY3VzdG9tQWZ0ZXJVcGRhdGUocmVjb3JkKSB7fQogIH0pLAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnJlbW92ZUV2ZW50KCk7CiAgfQp9Ow=="},null]}