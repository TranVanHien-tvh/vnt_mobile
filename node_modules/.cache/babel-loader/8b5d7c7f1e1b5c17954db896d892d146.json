{"remainingRequest":"D:\\VNT_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\VNT_vue\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VNT_vue\\src\\components\\msTooltip\\lib\\tooltip.js","dependencies":[{"path":"D:\\VNT_vue\\src\\components\\msTooltip\\lib\\tooltip.js","mtime":1653205086225},{"path":"D:\\VNT_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VNT_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\VNT_vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovVk5UX3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiRDovVk5UX3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkQ6L1ZOVF92dWUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJEOi9WTlRfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwoKLyogRm9ya2VkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL0ZlelZyYXN0YS9wb3BwZXIuanMvYmxvYi9tYXN0ZXIvcGFja2FnZXMvdG9vbHRpcC9zcmMvaW5kZXguanMgKi8KaW1wb3J0IFBvcHBlciBmcm9tICdwb3BwZXIuanMnOwppbXBvcnQgeyBnZXRPcHRpb25zLCBkaXJlY3RpdmUgfSBmcm9tICcuLi9kaXJlY3RpdmVzL3YtdG9vbHRpcCc7CmltcG9ydCB7IGFkZENsYXNzZXMsIHJlbW92ZUNsYXNzZXMsIHN1cHBvcnRzUGFzc2l2ZSB9IGZyb20gJy4uL3V0aWxzJzsKaW1wb3J0IGlzRXF1YWwgZnJvbSAnbG9kYXNoL2lzRXF1YWwnOwp2YXIgREVGQVVMVF9PUFRJT05TID0gewogIGNvbnRhaW5lcjogZmFsc2UsCiAgZGVsYXk6IDAsCiAgaHRtbDogZmFsc2UsCiAgcGxhY2VtZW50OiAndG9wJywKICB0aXRsZTogJycsCiAgdGVtcGxhdGU6ICc8ZGl2IGNsYXNzPSJ0b29sdGlwIiByb2xlPSJ0b29sdGlwIj48ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj48ZGl2IGNsYXNzPSJ0b29sdGlwLWlubmVyIj48L2Rpdj48L2Rpdj4nLAogIHRyaWdnZXI6ICdob3ZlciBmb2N1cycsCiAgb2Zmc2V0OiAwCn07CnZhciBvcGVuVG9vbHRpcHMgPSBbXTsKCnZhciBUb29sdGlwID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAvKioNCiAgICogQ3JlYXRlIGEgbmV3IFRvb2x0aXAuanMgaW5zdGFuY2UNCiAgICogQGNsYXNzIFRvb2x0aXANCiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcmVmZXJlbmNlIC0gVGhlIERPTSBub2RlIHVzZWQgYXMgcmVmZXJlbmNlIG9mIHRoZSB0b29sdGlwIChpdCBjYW4gYmUgYSBqUXVlcnkgZWxlbWVudCkuDQogICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zDQogICAqIEBwYXJhbSB7U3RyaW5nfSBvcHRpb25zLnBsYWNlbWVudD1ib3R0b20NCiAgICogICAgICBQbGFjZW1lbnQgb2YgdGhlIHBvcHBlciBhY2NlcHRlZCB2YWx1ZXM6IGB0b3AoLXN0YXJ0LCAtZW5kKSwgcmlnaHQoLXN0YXJ0LCAtZW5kKSwgYm90dG9tKC1zdGFydCwgLWVuZCksDQogICAqICAgICAgbGVmdCgtc3RhcnQsIC1lbmQpYA0KICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ3xmYWxzZX0gb3B0aW9ucy5jb250YWluZXI9ZmFsc2UgLSBBcHBlbmQgdGhlIHRvb2x0aXAgdG8gYSBzcGVjaWZpYyBlbGVtZW50Lg0KICAgKiBAcGFyYW0ge051bWJlcnxPYmplY3R9IG9wdGlvbnMuZGVsYXk9MA0KICAgKiAgICAgIERlbGF5IHNob3dpbmcgYW5kIGhpZGluZyB0aGUgdG9vbHRpcCAobXMpIC0gZG9lcyBub3QgYXBwbHkgdG8gbWFudWFsIHRyaWdnZXIgdHlwZS4NCiAgICogICAgICBJZiBhIG51bWJlciBpcyBzdXBwbGllZCwgZGVsYXkgaXMgYXBwbGllZCB0byBib3RoIGhpZGUvc2hvdy4NCiAgICogICAgICBPYmplY3Qgc3RydWN0dXJlIGlzOiBgeyBzaG93OiA1MDAsIGhpZGU6IDEwMCB9YA0KICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9wdGlvbnMuaHRtbD1mYWxzZSAtIEluc2VydCBIVE1MIGludG8gdGhlIHRvb2x0aXAuIElmIGZhbHNlLCB0aGUgY29udGVudCB3aWxsIGluc2VydGVkIHdpdGggYGlubmVyVGV4dGAuDQogICAqIEBwYXJhbSB7U3RyaW5nfFBsYWNlbWVudEZ1bmN0aW9ufSBvcHRpb25zLnBsYWNlbWVudD0ndG9wJyAtIE9uZSBvZiB0aGUgYWxsb3dlZCBwbGFjZW1lbnRzLCBvciBhIGZ1bmN0aW9uIHJldHVybmluZyBvbmUgb2YgdGhlbS4NCiAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zLnRlbXBsYXRlPSc8ZGl2IGNsYXNzPSJ0b29sdGlwIiByb2xlPSJ0b29sdGlwIj48ZGl2IGNsYXNzPSJ0b29sdGlwLWFycm93Ij48L2Rpdj48ZGl2IGNsYXNzPSJ0b29sdGlwLWlubmVyIj48L2Rpdj48L2Rpdj4nXQ0KICAgKiAgICAgIEJhc2UgSFRNTCB0byB1c2VkIHdoZW4gY3JlYXRpbmcgdGhlIHRvb2x0aXAuDQogICAqICAgICAgVGhlIHRvb2x0aXAncyBgdGl0bGVgIHdpbGwgYmUgaW5qZWN0ZWQgaW50byB0aGUgYC50b29sdGlwLWlubmVyYCBvciBgLnRvb2x0aXBfX2lubmVyYC4NCiAgICogICAgICBgLnRvb2x0aXAtYXJyb3dgIG9yIGAudG9vbHRpcF9fYXJyb3dgIHdpbGwgYmVjb21lIHRoZSB0b29sdGlwJ3MgYXJyb3cuDQogICAqICAgICAgVGhlIG91dGVybW9zdCB3cmFwcGVyIGVsZW1lbnQgc2hvdWxkIGhhdmUgdGhlIGAudG9vbHRpcGAgY2xhc3MuDQogICAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fFRpdGxlRnVuY3Rpb259IG9wdGlvbnMudGl0bGU9JycgLSBEZWZhdWx0IHRpdGxlIHZhbHVlIGlmIGB0aXRsZWAgYXR0cmlidXRlIGlzbid0IHByZXNlbnQuDQogICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9ucy50cmlnZ2VyPSdob3ZlciBmb2N1cyddDQogICAqICAgICAgSG93IHRvb2x0aXAgaXMgdHJpZ2dlcmVkIC0gY2xpY2ssIGhvdmVyLCBmb2N1cywgbWFudWFsLg0KICAgKiAgICAgIFlvdSBtYXkgcGFzcyBtdWx0aXBsZSB0cmlnZ2Vyczsgc2VwYXJhdGUgdGhlbSB3aXRoIGEgc3BhY2UuIGBtYW51YWxgIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIGFueSBvdGhlciB0cmlnZ2VyLg0KICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25zLmJvdW5kYXJpZXNFbGVtZW50DQogICAqICAgICAgVGhlIGVsZW1lbnQgdXNlZCBhcyBib3VuZGFyaWVzIGZvciB0aGUgdG9vbHRpcC4gRm9yIG1vcmUgaW5mb3JtYXRpb24gcmVmZXIgdG8gUG9wcGVyLmpzJw0KICAgKiAgICAgIFtib3VuZGFyaWVzRWxlbWVudCBkb2NzXShodHRwczovL3BvcHBlci5qcy5vcmcvcG9wcGVyLWRvY3VtZW50YXRpb24uaHRtbCkNCiAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBvcHRpb25zLm9mZnNldD0wIC0gT2Zmc2V0IG9mIHRoZSB0b29sdGlwIHJlbGF0aXZlIHRvIGl0cyByZWZlcmVuY2UuIEZvciBtb3JlIGluZm9ybWF0aW9uIHJlZmVyIHRvIFBvcHBlci5qcycNCiAgICogICAgICBbb2Zmc2V0IGRvY3NdKGh0dHBzOi8vcG9wcGVyLmpzLm9yZy9wb3BwZXItZG9jdW1lbnRhdGlvbi5odG1sKQ0KICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucy5wb3BwZXJPcHRpb25zPXt9IC0gUG9wcGVyIG9wdGlvbnMsIHdpbGwgYmUgcGFzc2VkIGRpcmVjdGx5IHRvIHBvcHBlciBpbnN0YW5jZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24gcmVmZXIgdG8gUG9wcGVyLmpzJw0KICAgKiAgICAgIFtvcHRpb25zIGRvY3NdKGh0dHBzOi8vcG9wcGVyLmpzLm9yZy9wb3BwZXItZG9jdW1lbnRhdGlvbi5odG1sKQ0KICAgKiBAcmV0dXJuIHtPYmplY3R9IGluc3RhbmNlIC0gVGhlIGdlbmVyYXRlZCB0b29sdGlwIGluc3RhbmNlDQogICAqLwogIGZ1bmN0aW9uIFRvb2x0aXAoX3JlZmVyZW5jZSwgX29wdGlvbnMpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiX2V2ZW50cyIsIFtdKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgIl9zZXRUb29sdGlwTm9kZUV2ZW50IiwgZnVuY3Rpb24gKGV2dCwgcmVmZXJlbmNlLCBkZWxheSwgb3B0aW9ucykgewogICAgICB2YXIgcmVsYXRlZHJlZmVyZW5jZSA9IGV2dC5yZWxhdGVkcmVmZXJlbmNlIHx8IGV2dC50b0VsZW1lbnQgfHwgZXZ0LnJlbGF0ZWRUYXJnZXQ7CgogICAgICB2YXIgY2FsbGJhY2sgPSBmdW5jdGlvbiBjYWxsYmFjayhldnQyKSB7CiAgICAgICAgdmFyIHJlbGF0ZWRyZWZlcmVuY2UyID0gZXZ0Mi5yZWxhdGVkcmVmZXJlbmNlIHx8IGV2dDIudG9FbGVtZW50IHx8IGV2dDIucmVsYXRlZFRhcmdldDsgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIGFmdGVyIGNhbGwKCiAgICAgICAgX3RoaXMuX3Rvb2x0aXBOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0LnR5cGUsIGNhbGxiYWNrKTsgLy8gSWYgdGhlIG5ldyByZWZlcmVuY2UgaXMgbm90IHRoZSByZWZlcmVuY2UgZWxlbWVudAoKCiAgICAgICAgaWYgKCFyZWZlcmVuY2UuY29udGFpbnMocmVsYXRlZHJlZmVyZW5jZTIpKSB7CiAgICAgICAgICAvLyBTY2hlZHVsZSB0byBoaWRlIHRvb2x0aXAKICAgICAgICAgIF90aGlzLl9zY2hlZHVsZUhpZGUocmVmZXJlbmNlLCBvcHRpb25zLmRlbGF5LCBvcHRpb25zLCBldnQyKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX3Rvb2x0aXBOb2RlLmNvbnRhaW5zKHJlbGF0ZWRyZWZlcmVuY2UpKSB7CiAgICAgICAgLy8gbGlzdGVuIHRvIG1vdXNlbGVhdmUgb24gdGhlIHRvb2x0aXAgZWxlbWVudCB0byBiZSBhYmxlIHRvIGhpZGUgdGhlIHRvb2x0aXAKICAgICAgICBfdGhpcy5fdG9vbHRpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldnQudHlwZSwgY2FsbGJhY2spOwoKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSk7CgogICAgLy8gYXBwbHkgdXNlciBvcHRpb25zIG92ZXIgZGVmYXVsdCBvbmVzCiAgICBfb3B0aW9ucyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgREVGQVVMVF9PUFRJT05TKSwgX29wdGlvbnMpOwogICAgX3JlZmVyZW5jZS5qcXVlcnkgJiYgKF9yZWZlcmVuY2UgPSBfcmVmZXJlbmNlWzBdKTsKICAgIHRoaXMuc2hvdyA9IHRoaXMuc2hvdy5iaW5kKHRoaXMpOwogICAgdGhpcy5oaWRlID0gdGhpcy5oaWRlLmJpbmQodGhpcyk7IC8vIGNhY2hlIHJlZmVyZW5jZSBhbmQgb3B0aW9ucwoKICAgIHRoaXMucmVmZXJlbmNlID0gX3JlZmVyZW5jZTsKICAgIHRoaXMub3B0aW9ucyA9IF9vcHRpb25zOyAvLyBzZXQgaW5pdGlhbCBzdGF0ZQoKICAgIHRoaXMuX2lzT3BlbiA9IGZhbHNlOwoKICAgIHRoaXMuX2luaXQoKTsKICB9IC8vCiAgLy8gUHVibGljIG1ldGhvZHMKICAvLwoKICAvKioNCiAgICogUmV2ZWFscyBhbiBlbGVtZW50J3MgdG9vbHRpcC4gVGhpcyBpcyBjb25zaWRlcmVkIGEgIm1hbnVhbCIgdHJpZ2dlcmluZyBvZiB0aGUgdG9vbHRpcC4NCiAgICogVG9vbHRpcHMgd2l0aCB6ZXJvLWxlbmd0aCB0aXRsZXMgYXJlIG5ldmVyIGRpc3BsYXllZC4NCiAgICogQG1ldGhvZCBUb29sdGlwI3Nob3cNCiAgICogQG1lbWJlcm9mIFRvb2x0aXANCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgW3sKICAgIGtleTogInNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNob3coKSB7CiAgICAgIHRoaXMuX3Nob3codGhpcy5yZWZlcmVuY2UsIHRoaXMub3B0aW9ucyk7CiAgICB9CiAgICAvKioNCiAgICAgKiBIaWRlcyBhbiBlbGVtZW504oCZcyB0b29sdGlwLiBUaGlzIGlzIGNvbnNpZGVyZWQgYSDigJxtYW51YWzigJ0gdHJpZ2dlcmluZyBvZiB0aGUgdG9vbHRpcC4NCiAgICAgKiBAbWV0aG9kIFRvb2x0aXAjaGlkZQ0KICAgICAqIEBtZW1iZXJvZiBUb29sdGlwDQogICAgICovCgogIH0sIHsKICAgIGtleTogImhpZGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpZGUoKSB7CiAgICAgIHRoaXMuX2hpZGUoKTsKICAgIH0KICAgIC8qKg0KICAgICAqIEhpZGVzIGFuZCBkZXN0cm95cyBhbiBlbGVtZW504oCZcyB0b29sdGlwLg0KICAgICAqIEBtZXRob2QgVG9vbHRpcCNkaXNwb3NlDQogICAgICogQG1lbWJlcm9mIFRvb2x0aXANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZGlzcG9zZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHsKICAgICAgdGhpcy5fZGlzcG9zZSgpOwogICAgfQogICAgLyoqDQogICAgICogVG9nZ2xlcyBhbiBlbGVtZW504oCZcyB0b29sdGlwLiBUaGlzIGlzIGNvbnNpZGVyZWQgYSDigJxtYW51YWzigJ0gdHJpZ2dlcmluZyBvZiB0aGUgdG9vbHRpcC4NCiAgICAgKiBAbWV0aG9kIFRvb2x0aXAjdG9nZ2xlDQogICAgICogQG1lbWJlcm9mIFRvb2x0aXANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9nZ2xlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b2dnbGUoKSB7CiAgICAgIGlmICh0aGlzLl9pc09wZW4pIHsKICAgICAgICByZXR1cm4gdGhpcy5oaWRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2hvdygpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0Q2xhc3NlcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q2xhc3NlcyhjbGFzc2VzKSB7CiAgICAgIHRoaXMuX2NsYXNzZXMgPSBjbGFzc2VzOwogICAgfQogIH0sIHsKICAgIGtleTogInNldENvbnRlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbnRlbnQoY29udGVudCkgewogICAgICB0aGlzLm9wdGlvbnMudGl0bGUgPSBjb250ZW50OwoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgdGhpcy5fc2V0Q29udGVudChjb250ZW50LCB0aGlzLm9wdGlvbnMpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0T3B0aW9ucyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0T3B0aW9ucyhvcHRpb25zKSB7CiAgICAgIHZhciBjbGFzc2VzVXBkYXRlZCA9IGZhbHNlOwogICAgICB2YXIgY2xhc3NlcyA9IG9wdGlvbnMgJiYgb3B0aW9ucy5jbGFzc2VzIHx8IGRpcmVjdGl2ZS5vcHRpb25zLmRlZmF1bHRDbGFzczsKCiAgICAgIGlmICghaXNFcXVhbCh0aGlzLl9jbGFzc2VzLCBjbGFzc2VzKSkgewogICAgICAgIHRoaXMuc2V0Q2xhc3NlcyhjbGFzc2VzKTsKICAgICAgICBjbGFzc2VzVXBkYXRlZCA9IHRydWU7CiAgICAgIH0KCiAgICAgIG9wdGlvbnMgPSBnZXRPcHRpb25zKG9wdGlvbnMpOwogICAgICB2YXIgbmVlZFBvcHBlclVwZGF0ZSA9IGZhbHNlOwogICAgICB2YXIgbmVlZFJlc3RhcnQgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLm9wdGlvbnMub2Zmc2V0ICE9PSBvcHRpb25zLm9mZnNldCB8fCB0aGlzLm9wdGlvbnMucGxhY2VtZW50ICE9PSBvcHRpb25zLnBsYWNlbWVudCkgewogICAgICAgIG5lZWRQb3BwZXJVcGRhdGUgPSB0cnVlOwogICAgICB9CgogICAgICBpZiAodGhpcy5vcHRpb25zLnRlbXBsYXRlICE9PSBvcHRpb25zLnRlbXBsYXRlIHx8IHRoaXMub3B0aW9ucy50cmlnZ2VyICE9PSBvcHRpb25zLnRyaWdnZXIgfHwgdGhpcy5vcHRpb25zLmNvbnRhaW5lciAhPT0gb3B0aW9ucy5jb250YWluZXIgfHwgY2xhc3Nlc1VwZGF0ZWQpIHsKICAgICAgICBuZWVkUmVzdGFydCA9IHRydWU7CiAgICAgIH0KCiAgICAgIGZvciAodmFyIGtleSBpbiBvcHRpb25zKSB7CiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSBvcHRpb25zW2tleV07CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLl90b29sdGlwTm9kZSkgewogICAgICAgIGlmIChuZWVkUmVzdGFydCkgewogICAgICAgICAgdmFyIGlzT3BlbiA9IHRoaXMuX2lzT3BlbjsKICAgICAgICAgIHRoaXMuZGlzcG9zZSgpOwoKICAgICAgICAgIHRoaXMuX2luaXQoKTsKCiAgICAgICAgICBpZiAoaXNPcGVuKSB7CiAgICAgICAgICAgIHRoaXMuc2hvdygpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAobmVlZFBvcHBlclVwZGF0ZSkgewogICAgICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8KICAgIC8vIFByaXZhdGUgbWV0aG9kcwogICAgLy8KCiAgfSwgewogICAga2V5OiAiX2luaXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9pbml0KCkgewogICAgICAvLyBnZXQgZXZlbnRzIGxpc3QKICAgICAgdmFyIGV2ZW50cyA9IHR5cGVvZiB0aGlzLm9wdGlvbnMudHJpZ2dlciA9PT0gJ3N0cmluZycgPyB0aGlzLm9wdGlvbnMudHJpZ2dlci5zcGxpdCgnICcpIDogW107CiAgICAgIHRoaXMuX2lzRGlzcG9zZWQgPSBmYWxzZTsKICAgICAgdGhpcy5fZW5hYmxlRG9jdW1lbnRUb3VjaCA9IGV2ZW50cy5pbmRleE9mKCdtYW51YWwnKSA9PT0gLTE7CiAgICAgIGV2ZW50cyA9IGV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKHRyaWdnZXIpIHsKICAgICAgICByZXR1cm4gWydjbGljaycsICdob3ZlcicsICdmb2N1cyddLmluZGV4T2YodHJpZ2dlcikgIT09IC0xOwogICAgICB9KTsgLy8gc2V0IGV2ZW50IGxpc3RlbmVycwoKICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnModGhpcy5yZWZlcmVuY2UsIGV2ZW50cywgdGhpcy5vcHRpb25zKTsgLy8gdGl0bGUgYXR0cmlidXRlCgoKICAgICAgdGhpcy4kX29yaWdpbmFsVGl0bGUgPSB0aGlzLnJlZmVyZW5jZS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyk7CiAgICAgIHRoaXMucmVmZXJlbmNlLnJlbW92ZUF0dHJpYnV0ZSgndGl0bGUnKTsKICAgICAgdGhpcy5yZWZlcmVuY2Uuc2V0QXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJywgdGhpcy4kX29yaWdpbmFsVGl0bGUpOwogICAgfQogICAgLyoqDQogICAgICogQ3JlYXRlcyBhIG5ldyB0b29sdGlwIG5vZGUNCiAgICAgKiBAbWVtYmVyb2YgVG9vbHRpcA0KICAgICAqIEBwcml2YXRlDQogICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcmVmZXJlbmNlDQogICAgICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlDQogICAgICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR8VGl0bGVGdW5jdGlvbn0gdGl0bGUNCiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFsbG93SHRtbA0KICAgICAqIEByZXR1cm4ge0hUTUxlbGVtZW50fSB0b29sdGlwTm9kZQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJfY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlKHJlZmVyZW5jZSwgdGVtcGxhdGUpIHsKICAgICAgLy8gY3JlYXRlIHRvb2x0aXAgZWxlbWVudAogICAgICB2YXIgdG9vbHRpcEdlbmVyYXRvciA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgdG9vbHRpcEdlbmVyYXRvci5pbm5lckhUTUwgPSB0ZW1wbGF0ZS50cmltKCk7CiAgICAgIHZhciB0b29sdGlwTm9kZSA9IHRvb2x0aXBHZW5lcmF0b3IuY2hpbGROb2Rlc1swXTsgLy8gYWRkIHVuaXF1ZSBJRCB0byBvdXIgdG9vbHRpcCAobmVlZGVkIGZvciBhY2Nlc3NpYmlsaXR5IHJlYXNvbnMpCgogICAgICB0b29sdGlwTm9kZS5pZCA9ICJ0b29sdGlwXyIuY29uY2F0KE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCAxMCkpOyAvLyBJbml0aWFsbHkgaGlkZSB0aGUgdG9vbHRpcAogICAgICAvLyBUaGUgYXR0cmlidXRlIHdpbGwgYmUgc3dpdGNoZWQgaW4gYSBuZXh0IGZyYW1lIHNvCiAgICAgIC8vIENTUyB0cmFuc2l0aW9ucyBjYW4gcGxheQoKICAgICAgdG9vbHRpcE5vZGUuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CgogICAgICBpZiAodGhpcy5vcHRpb25zLmF1dG9IaWRlICYmIHRoaXMub3B0aW9ucy50cmlnZ2VyLmluZGV4T2YoJ2hvdmVyJykgIT09IC0xKSB7CiAgICAgICAgdG9vbHRpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuaGlkZSk7CiAgICAgICAgdG9vbHRpcE5vZGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhpZGUpOwogICAgICB9IC8vIHJldHVybiB0aGUgZ2VuZXJhdGVkIHRvb2x0aXAgbm9kZQoKCiAgICAgIHJldHVybiB0b29sdGlwTm9kZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2V0Q29udGVudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldENvbnRlbnQoY29udGVudCwgb3B0aW9ucykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXN5bmNDb250ZW50ID0gZmFsc2U7CgogICAgICB0aGlzLl9hcHBseUNvbnRlbnQoY29udGVudCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLnBvcHBlckluc3RhbmNlLnVwZGF0ZSgpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfYXBwbHlDb250ZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwbHlDb250ZW50KHRpdGxlLCBvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB2YXIgYWxsb3dIdG1sID0gb3B0aW9ucy5odG1sOwogICAgICAgIHZhciByb290Tm9kZSA9IF90aGlzMy5fdG9vbHRpcE5vZGU7CiAgICAgICAgaWYgKCFyb290Tm9kZSkgcmV0dXJuOwogICAgICAgIHZhciB0aXRsZU5vZGUgPSByb290Tm9kZS5xdWVyeVNlbGVjdG9yKF90aGlzMy5vcHRpb25zLmlubmVyU2VsZWN0b3IpOwoKICAgICAgICBpZiAodGl0bGUubm9kZVR5cGUgPT09IDEpIHsKICAgICAgICAgIC8vIGlmIHRpdGxlIGlzIGEgbm9kZSwgYXBwZW5kIGl0IG9ubHkgaWYgYWxsb3dIdG1sIGlzIHRydWUKICAgICAgICAgIGlmIChhbGxvd0h0bWwpIHsKICAgICAgICAgICAgd2hpbGUgKHRpdGxlTm9kZS5maXJzdENoaWxkKSB7CiAgICAgICAgICAgICAgdGl0bGVOb2RlLnJlbW92ZUNoaWxkKHRpdGxlTm9kZS5maXJzdENoaWxkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGl0bGVOb2RlLmFwcGVuZENoaWxkKHRpdGxlKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aXRsZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgLy8gaWYgdGl0bGUgaXMgYSBmdW5jdGlvbiwgY2FsbCBpdCBhbmQgc2V0IGlubmVyVGV4dCBvciBpbm5lckh0bWwgZGVwZW5kaW5nIGJ5IGBhbGxvd0h0bWxgIHZhbHVlCiAgICAgICAgICB2YXIgcmVzdWx0ID0gdGl0bGUoKTsKCiAgICAgICAgICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQudGhlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICBfdGhpczMuYXN5bmNDb250ZW50ID0gdHJ1ZTsKICAgICAgICAgICAgb3B0aW9ucy5sb2FkaW5nQ2xhc3MgJiYgYWRkQ2xhc3Nlcyhyb290Tm9kZSwgb3B0aW9ucy5sb2FkaW5nQ2xhc3MpOwoKICAgICAgICAgICAgaWYgKG9wdGlvbnMubG9hZGluZ0NvbnRlbnQpIHsKICAgICAgICAgICAgICBfdGhpczMuX2FwcGx5Q29udGVudChvcHRpb25zLmxvYWRpbmdDb250ZW50LCBvcHRpb25zKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmVzdWx0LnRoZW4oZnVuY3Rpb24gKGFzeW5jUmVzdWx0KSB7CiAgICAgICAgICAgICAgb3B0aW9ucy5sb2FkaW5nQ2xhc3MgJiYgcmVtb3ZlQ2xhc3Nlcyhyb290Tm9kZSwgb3B0aW9ucy5sb2FkaW5nQ2xhc3MpOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMuX2FwcGx5Q29udGVudChhc3luY1Jlc3VsdCwgb3B0aW9ucyk7CiAgICAgICAgICAgIH0pLnRoZW4ocmVzb2x2ZSkuY2F0Y2gocmVqZWN0KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy5fYXBwbHlDb250ZW50KHJlc3VsdCwgb3B0aW9ucykudGhlbihyZXNvbHZlKS5jYXRjaChyZWplY3QpOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gaWYgaXQncyBqdXN0IGEgc2ltcGxlIHRleHQsIHNldCBpbm5lclRleHQgb3IgaW5uZXJIdG1sIGRlcGVuZGluZyBieSBgYWxsb3dIdG1sYCB2YWx1ZQogICAgICAgICAgYWxsb3dIdG1sID8gdGl0bGVOb2RlLmlubmVySFRNTCA9IHRpdGxlIDogdGl0bGVOb2RlLmlubmVyVGV4dCA9IHRpdGxlOwogICAgICAgIH0KCiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfc2hvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3Nob3cocmVmZXJlbmNlLCBvcHRpb25zKSB7CiAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmNvbnRhaW5lciA9PT0gJ3N0cmluZycpIHsKICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmNvbnRhaW5lcik7CiAgICAgICAgaWYgKCFjb250YWluZXIpIHJldHVybjsKICAgICAgfQoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2Rpc3Bvc2VUaW1lcik7CiAgICAgIG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTsKICAgICAgZGVsZXRlIG9wdGlvbnMub2Zmc2V0OwogICAgICB2YXIgdXBkYXRlQ2xhc3NlcyA9IHRydWU7CgogICAgICBpZiAodGhpcy5fdG9vbHRpcE5vZGUpIHsKICAgICAgICBhZGRDbGFzc2VzKHRoaXMuX3Rvb2x0aXBOb2RlLCB0aGlzLl9jbGFzc2VzKTsKICAgICAgICB1cGRhdGVDbGFzc2VzID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9lbnN1cmVTaG93bihyZWZlcmVuY2UsIG9wdGlvbnMpOwoKICAgICAgaWYgKHVwZGF0ZUNsYXNzZXMgJiYgdGhpcy5fdG9vbHRpcE5vZGUpIHsKICAgICAgICBhZGRDbGFzc2VzKHRoaXMuX3Rvb2x0aXBOb2RlLCB0aGlzLl9jbGFzc2VzKTsKICAgICAgfQoKICAgICAgYWRkQ2xhc3NlcyhyZWZlcmVuY2UsIFsndi10b29sdGlwLW9wZW4nXSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2Vuc3VyZVNob3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5zdXJlU2hvd24ocmVmZXJlbmNlLCBvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgLy8gZG9uJ3Qgc2hvdyBpZiBpdCdzIGFscmVhZHkgdmlzaWJsZQogICAgICBpZiAodGhpcy5faXNPcGVuKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0KCiAgICAgIHRoaXMuX2lzT3BlbiA9IHRydWU7CiAgICAgIG9wZW5Ub29sdGlwcy5wdXNoKHRoaXMpOyAvLyBpZiB0aGUgdG9vbHRpcE5vZGUgYWxyZWFkeSBleGlzdHMsIGp1c3Qgc2hvdyBpdAoKICAgICAgaWYgKHRoaXMuX3Rvb2x0aXBOb2RlKSB7CiAgICAgICAgdGhpcy5fdG9vbHRpcE5vZGUuc3R5bGUuZGlzcGxheSA9ICcnOwoKICAgICAgICB0aGlzLl90b29sdGlwTm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ2ZhbHNlJyk7CgogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2UuZW5hYmxlRXZlbnRMaXN0ZW5lcnMoKTsKICAgICAgICB0aGlzLnBvcHBlckluc3RhbmNlLnVwZGF0ZSgpOwoKICAgICAgICBpZiAodGhpcy5hc3luY0NvbnRlbnQpIHsKICAgICAgICAgIHRoaXMuX3NldENvbnRlbnQob3B0aW9ucy50aXRsZSwgb3B0aW9ucyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfSAvLyBnZXQgdGl0bGUKCgogICAgICB2YXIgdGl0bGUgPSByZWZlcmVuY2UuZ2V0QXR0cmlidXRlKCd0aXRsZScpIHx8IG9wdGlvbnMudGl0bGU7IC8vIGRvbid0IHNob3cgdG9vbHRpcCBpZiBubyB0aXRsZSBpcyBkZWZpbmVkCgogICAgICBpZiAoIXRpdGxlKSB7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgIH0gLy8gY3JlYXRlIHRvb2x0aXAgbm9kZQoKCiAgICAgIHZhciB0b29sdGlwTm9kZSA9IHRoaXMuX2NyZWF0ZShyZWZlcmVuY2UsIG9wdGlvbnMudGVtcGxhdGUpOwoKICAgICAgdGhpcy5fdG9vbHRpcE5vZGUgPSB0b29sdGlwTm9kZTsgLy8gQWRkIGBhcmlhLWRlc2NyaWJlZGJ5YCB0byBvdXIgcmVmZXJlbmNlIGVsZW1lbnQgZm9yIGFjY2Vzc2liaWxpdHkgcmVhc29ucwoKICAgICAgcmVmZXJlbmNlLnNldEF0dHJpYnV0ZSgnYXJpYS1kZXNjcmliZWRieScsIHRvb2x0aXBOb2RlLmlkKTsgLy8gYXBwZW5kIHRvb2x0aXAgdG8gY29udGFpbmVyCgogICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5fZmluZENvbnRhaW5lcihvcHRpb25zLmNvbnRhaW5lciwgcmVmZXJlbmNlKTsKCiAgICAgIHRoaXMuX2FwcGVuZCh0b29sdGlwTm9kZSwgY29udGFpbmVyKTsKCiAgICAgIHZhciBwb3BwZXJPcHRpb25zID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHRpb25zLnBvcHBlck9wdGlvbnMpLCB7fSwgewogICAgICAgIHBsYWNlbWVudDogb3B0aW9ucy5wbGFjZW1lbnQKICAgICAgfSk7CgogICAgICBwb3BwZXJPcHRpb25zLm1vZGlmaWVycyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcG9wcGVyT3B0aW9ucy5tb2RpZmllcnMpLCB7fSwgewogICAgICAgIGFycm93OiB7CiAgICAgICAgICBlbGVtZW50OiB0aGlzLm9wdGlvbnMuYXJyb3dTZWxlY3RvcgogICAgICAgIH0KICAgICAgfSk7CgogICAgICBpZiAob3B0aW9ucy5ib3VuZGFyaWVzRWxlbWVudCkgewogICAgICAgIHBvcHBlck9wdGlvbnMubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdyA9IHsKICAgICAgICAgIGJvdW5kYXJpZXNFbGVtZW50OiBvcHRpb25zLmJvdW5kYXJpZXNFbGVtZW50CiAgICAgICAgfTsKICAgICAgfQoKICAgICAgdGhpcy5wb3BwZXJJbnN0YW5jZSA9IG5ldyBQb3BwZXIocmVmZXJlbmNlLCB0b29sdGlwTm9kZSwgcG9wcGVyT3B0aW9ucyk7CgogICAgICB0aGlzLl9zZXRDb250ZW50KHRpdGxlLCBvcHRpb25zKTsgLy8gRml4IHBvc2l0aW9uCgoKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIV90aGlzNC5faXNEaXNwb3NlZCAmJiBfdGhpczQucG9wcGVySW5zdGFuY2UpIHsKICAgICAgICAgIF90aGlzNC5wb3BwZXJJbnN0YW5jZS51cGRhdGUoKTsgLy8gU2hvdyB0aGUgdG9vbHRpcAoKCiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoIV90aGlzNC5faXNEaXNwb3NlZCkgewogICAgICAgICAgICAgIF90aGlzNC5faXNPcGVuICYmIHRvb2x0aXBOb2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpczQuZGlzcG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXM0LmRpc3Bvc2UoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfbm9Mb25nZXJPcGVuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfbm9Mb25nZXJPcGVuKCkgewogICAgICB2YXIgaW5kZXggPSBvcGVuVG9vbHRpcHMuaW5kZXhPZih0aGlzKTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBvcGVuVG9vbHRpcHMuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9oaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaGlkZSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICAvLyBkb24ndCBoaWRlIGlmIGl0J3MgYWxyZWFkeSBoaWRkZW4KICAgICAgaWYgKCF0aGlzLl9pc09wZW4pIHsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgdGhpcy5faXNPcGVuID0gZmFsc2U7CgogICAgICB0aGlzLl9ub0xvbmdlck9wZW4oKTsgLy8gaGlkZSB0b29sdGlwTm9kZQoKCiAgICAgIHRoaXMuX3Rvb2x0aXBOb2RlLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgICB0aGlzLl90b29sdGlwTm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTsKCiAgICAgIHRoaXMucG9wcGVySW5zdGFuY2UuZGlzYWJsZUV2ZW50TGlzdGVuZXJzKCk7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9kaXNwb3NlVGltZXIpOwogICAgICB2YXIgZGlzcG9zZVRpbWUgPSBkaXJlY3RpdmUub3B0aW9ucy5kaXNwb3NlVGltZW91dDsKCiAgICAgIGlmIChkaXNwb3NlVGltZSAhPT0gbnVsbCkgewogICAgICAgIHRoaXMuX2Rpc3Bvc2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKF90aGlzNS5fdG9vbHRpcE5vZGUpIHsKICAgICAgICAgICAgX3RoaXM1Ll90b29sdGlwTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgX3RoaXM1LmhpZGUpOwoKICAgICAgICAgICAgX3RoaXM1Ll90b29sdGlwTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNS5oaWRlKTsgLy8gRG9uJ3QgcmVtb3ZlIHBvcHBlciBpbnN0YW5jZSwganVzdCB0aGUgSFRNTCBlbGVtZW50CgoKICAgICAgICAgICAgX3RoaXM1Ll9yZW1vdmVUb29sdGlwTm9kZSgpOwogICAgICAgICAgfQogICAgICAgIH0sIGRpc3Bvc2VUaW1lKTsKICAgICAgfQoKICAgICAgcmVtb3ZlQ2xhc3Nlcyh0aGlzLnJlZmVyZW5jZSwgWyd2LXRvb2x0aXAtb3BlbiddKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3JlbW92ZVRvb2x0aXBOb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlVG9vbHRpcE5vZGUoKSB7CiAgICAgIGlmICghdGhpcy5fdG9vbHRpcE5vZGUpIHJldHVybjsKICAgICAgdmFyIHBhcmVudE5vZGUgPSB0aGlzLl90b29sdGlwTm9kZS5wYXJlbnROb2RlOwoKICAgICAgaWYgKHBhcmVudE5vZGUpIHsKICAgICAgICBwYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX3Rvb2x0aXBOb2RlKTsKICAgICAgICB0aGlzLnJlZmVyZW5jZS5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTsKICAgICAgfQoKICAgICAgdGhpcy5fdG9vbHRpcE5vZGUgPSBudWxsOwogICAgfQogIH0sIHsKICAgIGtleTogIl9kaXNwb3NlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGlzcG9zZSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLl9pc0Rpc3Bvc2VkID0gdHJ1ZTsKICAgICAgdGhpcy5yZWZlcmVuY2UucmVtb3ZlQXR0cmlidXRlKCdkYXRhLW9yaWdpbmFsLXRpdGxlJyk7CgogICAgICBpZiAodGhpcy4kX29yaWdpbmFsVGl0bGUpIHsKICAgICAgICB0aGlzLnJlZmVyZW5jZS5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgdGhpcy4kX29yaWdpbmFsVGl0bGUpOwogICAgICB9IC8vIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZmlyc3QgdG8gcHJldmVudCBhbnkgdW5leHBlY3RlZCBiZWhhdmlvdXIKCgogICAgICB0aGlzLl9ldmVudHMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBmdW5jID0gX3JlZi5mdW5jLAogICAgICAgICAgICBldmVudCA9IF9yZWYuZXZlbnQ7CgogICAgICAgIF90aGlzNi5yZWZlcmVuY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOwoKICAgICAgdGhpcy5fZXZlbnRzID0gW107CgogICAgICBpZiAodGhpcy5fdG9vbHRpcE5vZGUpIHsKICAgICAgICB0aGlzLl9oaWRlKCk7CgogICAgICAgIHRoaXMuX3Rvb2x0aXBOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLmhpZGUpOwoKICAgICAgICB0aGlzLl90b29sdGlwTm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGlkZSk7IC8vIGRlc3Ryb3kgaW5zdGFuY2UKCgogICAgICAgIHRoaXMucG9wcGVySW5zdGFuY2UuZGVzdHJveSgpOyAvLyBkZXN0cm95IHRvb2x0aXBOb2RlIGlmIHJlbW92ZU9uRGVzdHJveSBpcyBub3Qgc2V0LCBhcyBwb3BwZXJJbnN0YW5jZS5kZXN0cm95KCkgYWxyZWFkeSByZW1vdmVzIHRoZSBlbGVtZW50CgogICAgICAgIGlmICghdGhpcy5wb3BwZXJJbnN0YW5jZS5vcHRpb25zLnJlbW92ZU9uRGVzdHJveSkgewogICAgICAgICAgdGhpcy5fcmVtb3ZlVG9vbHRpcE5vZGUoKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5fbm9Mb25nZXJPcGVuKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogIl9maW5kQ29udGFpbmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluZENvbnRhaW5lcihjb250YWluZXIsIHJlZmVyZW5jZSkgewogICAgICAvLyBpZiBjb250YWluZXIgaXMgYSBxdWVyeSwgZ2V0IHRoZSByZWxhdGl2ZSBlbGVtZW50CiAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyID09PSAnc3RyaW5nJykgewogICAgICAgIGNvbnRhaW5lciA9IHdpbmRvdy5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lcik7CiAgICAgIH0gZWxzZSBpZiAoY29udGFpbmVyID09PSBmYWxzZSkgewogICAgICAgIC8vIGlmIGNvbnRhaW5lciBpcyBgZmFsc2VgLCBzZXQgaXQgdG8gcmVmZXJlbmNlIHBhcmVudAogICAgICAgIGNvbnRhaW5lciA9IHJlZmVyZW5jZS5wYXJlbnROb2RlOwogICAgICB9CgogICAgICByZXR1cm4gY29udGFpbmVyOwogICAgfQogICAgLyoqDQogICAgICogQXBwZW5kIHRvb2x0aXAgdG8gY29udGFpbmVyDQogICAgICogQG1lbWJlcm9mIFRvb2x0aXANCiAgICAgKiBAcHJpdmF0ZQ0KICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRvb2x0aXANCiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fFN0cmluZ3xmYWxzZX0gY29udGFpbmVyDQogICAgICovCgogIH0sIHsKICAgIGtleTogIl9hcHBlbmQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmQodG9vbHRpcE5vZGUsIGNvbnRhaW5lcikgewogICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodG9vbHRpcE5vZGUpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9zZXRFdmVudExpc3RlbmVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NldEV2ZW50TGlzdGVuZXJzKHJlZmVyZW5jZSwgZXZlbnRzLCBvcHRpb25zKSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGRpcmVjdEV2ZW50cyA9IFtdOwogICAgICB2YXIgb3Bwb3NpdGVFdmVudHMgPSBbXTsKICAgICAgZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgc3dpdGNoIChldmVudCkgewogICAgICAgICAgY2FzZSAnaG92ZXInOgogICAgICAgICAgICBkaXJlY3RFdmVudHMucHVzaCgnbW91c2VlbnRlcicpOwogICAgICAgICAgICBvcHBvc2l0ZUV2ZW50cy5wdXNoKCdtb3VzZWxlYXZlJyk7CiAgICAgICAgICAgIGlmIChfdGhpczcub3B0aW9ucy5oaWRlT25UYXJnZXRDbGljaykgb3Bwb3NpdGVFdmVudHMucHVzaCgnY2xpY2snKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAnZm9jdXMnOgogICAgICAgICAgICBkaXJlY3RFdmVudHMucHVzaCgnZm9jdXMnKTsKICAgICAgICAgICAgb3Bwb3NpdGVFdmVudHMucHVzaCgnYmx1cicpOwogICAgICAgICAgICBpZiAoX3RoaXM3Lm9wdGlvbnMuaGlkZU9uVGFyZ2V0Q2xpY2spIG9wcG9zaXRlRXZlbnRzLnB1c2goJ2NsaWNrJyk7CiAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgIGNhc2UgJ2NsaWNrJzoKICAgICAgICAgICAgZGlyZWN0RXZlbnRzLnB1c2goJ2NsaWNrJyk7CiAgICAgICAgICAgIG9wcG9zaXRlRXZlbnRzLnB1c2goJ2NsaWNrJyk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfSk7IC8vIHNjaGVkdWxlIHNob3cgdG9vbHRpcAoKICAgICAgZGlyZWN0RXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKGV2dCkgewogICAgICAgICAgaWYgKF90aGlzNy5faXNPcGVuID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBldnQudXNlZEJ5VG9vbHRpcCA9IHRydWU7CgogICAgICAgICAgX3RoaXM3Ll9zY2hlZHVsZVNob3cocmVmZXJlbmNlLCBvcHRpb25zLmRlbGF5LCBvcHRpb25zLCBldnQpOwogICAgICAgIH07CgogICAgICAgIF90aGlzNy5fZXZlbnRzLnB1c2goewogICAgICAgICAgZXZlbnQ6IGV2ZW50LAogICAgICAgICAgZnVuYzogZnVuYwogICAgICAgIH0pOwoKICAgICAgICByZWZlcmVuY2UuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgZnVuYyk7CiAgICAgIH0pOyAvLyBzY2hlZHVsZSBoaWRlIHRvb2x0aXAKCiAgICAgIG9wcG9zaXRlRXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGZ1bmMgPSBmdW5jdGlvbiBmdW5jKGV2dCkgewogICAgICAgICAgaWYgKGV2dC51c2VkQnlUb29sdGlwID09PSB0cnVlKSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczcuX3NjaGVkdWxlSGlkZShyZWZlcmVuY2UsIG9wdGlvbnMuZGVsYXksIG9wdGlvbnMsIGV2dCk7CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXM3Ll9ldmVudHMucHVzaCh7CiAgICAgICAgICBldmVudDogZXZlbnQsCiAgICAgICAgICBmdW5jOiBmdW5jCiAgICAgICAgfSk7CgogICAgICAgIHJlZmVyZW5jZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29uRG9jdW1lbnRUb3VjaCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29uRG9jdW1lbnRUb3VjaChldmVudCkgewogICAgICBpZiAodGhpcy5fZW5hYmxlRG9jdW1lbnRUb3VjaCkgewogICAgICAgIHRoaXMuX3NjaGVkdWxlSGlkZSh0aGlzLnJlZmVyZW5jZSwgdGhpcy5vcHRpb25zLmRlbGF5LCB0aGlzLm9wdGlvbnMsIGV2ZW50KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogIl9zY2hlZHVsZVNob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zY2hlZHVsZVNob3cocmVmZXJlbmNlLCBkZWxheSwgb3B0aW9ucwogICAgLyosIGV2dCAqLwogICAgKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgLy8gZGVmYXVsdHMgdG8gMAogICAgICB2YXIgY29tcHV0ZWREZWxheSA9IGRlbGF5ICYmIGRlbGF5LnNob3cgfHwgZGVsYXkgfHwgMDsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3NjaGVkdWxlVGltZXIpOwogICAgICB0aGlzLl9zY2hlZHVsZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiBfdGhpczguX3Nob3cocmVmZXJlbmNlLCBvcHRpb25zKTsKICAgICAgfSwgY29tcHV0ZWREZWxheSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX3NjaGVkdWxlSGlkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NjaGVkdWxlSGlkZShyZWZlcmVuY2UsIGRlbGF5LCBvcHRpb25zLCBldnQpIHsKICAgICAgdmFyIF90aGlzOSA9IHRoaXM7CgogICAgICAvLyBkZWZhdWx0cyB0byAwCiAgICAgIHZhciBjb21wdXRlZERlbGF5ID0gZGVsYXkgJiYgZGVsYXkuaGlkZSB8fCBkZWxheSB8fCAwOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5fc2NoZWR1bGVUaW1lcik7CiAgICAgIHRoaXMuX3NjaGVkdWxlVGltZXIgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzOS5faXNPcGVuID09PSBmYWxzZSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFfdGhpczkuX3Rvb2x0aXBOb2RlLm93bmVyRG9jdW1lbnQuYm9keS5jb250YWlucyhfdGhpczkuX3Rvb2x0aXBOb2RlKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8gaWYgd2UgYXJlIGhpZGluZyBiZWNhdXNlIG9mIGEgbW91c2VsZWF2ZSwgd2UgbXVzdCBjaGVjayB0aGF0IHRoZSBuZXcKICAgICAgICAvLyByZWZlcmVuY2UgaXNuJ3QgdGhlIHRvb2x0aXAsIGJlY2F1c2UgaW4gdGhpcyBjYXNlIHdlIGRvbid0IHdhbnQgdG8gaGlkZSBpdAoKCiAgICAgICAgaWYgKGV2dC50eXBlID09PSAnbW91c2VsZWF2ZScpIHsKICAgICAgICAgIHZhciBpc1NldCA9IF90aGlzOS5fc2V0VG9vbHRpcE5vZGVFdmVudChldnQsIHJlZmVyZW5jZSwgZGVsYXksIG9wdGlvbnMpOyAvLyBpZiB3ZSBzZXQgdGhlIG5ldyBldmVudCwgZG9uJ3QgaGlkZSB0aGUgdG9vbHRpcCB5ZXQKICAgICAgICAgIC8vIHRoZSBuZXcgZXZlbnQgd2lsbCB0YWtlIGNhcmUgdG8gaGlkZSBpdCBpZiBuZWNlc3NhcnkKCgogICAgICAgICAgaWYgKGlzU2V0KSB7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIF90aGlzOS5faGlkZShyZWZlcmVuY2UsIG9wdGlvbnMpOwogICAgICB9LCBjb21wdXRlZERlbGF5KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBUb29sdGlwOwp9KCk7IC8vIEhpZGUgdG9vbHRpcHMgb24gdG91Y2ggZGV2aWNlcwoKCmV4cG9ydCB7IFRvb2x0aXAgYXMgZGVmYXVsdCB9OwoKaWYgKHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcpIHsKICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wZW5Ub29sdGlwcy5sZW5ndGg7IGkrKykgewogICAgICBvcGVuVG9vbHRpcHNbaV0uX29uRG9jdW1lbnRUb3VjaChldmVudCk7CiAgICB9CiAgfSwgc3VwcG9ydHNQYXNzaXZlID8gewogICAgcGFzc2l2ZTogdHJ1ZSwKICAgIGNhcHR1cmU6IHRydWUKICB9IDogdHJ1ZSk7Cn0KLyoqDQogKiBQbGFjZW1lbnQgZnVuY3Rpb24sIGl0cyBjb250ZXh0IGlzIHRoZSBUb29sdGlwIGluc3RhbmNlLg0KICogQG1lbWJlcm9mIFRvb2x0aXANCiAqIEBjYWxsYmFjayBQbGFjZW1lbnRGdW5jdGlvbg0KICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdG9vbHRpcCAtIHRvb2x0aXAgRE9NIG5vZGUuDQogKiBAcGFyYW0ge0hUTUxFbGVtZW50fSByZWZlcmVuY2UgLSByZWZlcmVuY2UgRE9NIG5vZGUuDQogKiBAcmV0dXJuIHtTdHJpbmd9IHBsYWNlbWVudCAtIE9uZSBvZiB0aGUgYWxsb3dlZCBwbGFjZW1lbnQgb3B0aW9ucy4NCiAqLwoKLyoqDQogKiBUaXRsZSBmdW5jdGlvbiwgaXRzIGNvbnRleHQgaXMgdGhlIFRvb2x0aXAgaW5zdGFuY2UuDQogKiBAbWVtYmVyb2YgVG9vbHRpcA0KICogQGNhbGxiYWNrIFRpdGxlRnVuY3Rpb24NCiAqIEByZXR1cm4ge1N0cmluZ30gcGxhY2VtZW50IC0gVGhlIGRlc2lyZWQgdGl0bGUuDQogKi8="},null]}