{"remainingRequest":"D:\\VNT_vue\\node_modules\\babel-loader\\lib\\index.js!D:\\VNT_vue\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\VNT_vue\\src\\components\\msdaterange\\DateRange.js","dependencies":[{"path":"D:\\VNT_vue\\src\\components\\msdaterange\\DateRange.js","mtime":1656597545946},{"path":"D:\\VNT_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\VNT_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\VNT_vue\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9WTlRfdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRDovVk5UX3Z1ZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKCi8qKg0KICogZmlzY2FsWWVhciBuxINtIHTDoGkgY2jDrW5oDQogKiBN4bq3YyDEkeG7i25oIG5nw6B5IGLhuq90IMSR4bqndSBsw6AgdGjhu6kgMg0KICovCi8vIGltcG9ydCBzZXNzaW9uIGZyb20gJ0AvY29tbW9uL3Nlc3Npb24nOwppbXBvcnQgeyBNU0VudW0gfSBmcm9tICJAL2NvbW1vbnMvZW51bWVyYXRpb24iOwp2YXIgUGVyaW9kID0gTVNFbnVtLlBlcmlvZDsKdmFyIGZpc2NhbEZyb21EYXRlID0gbmV3IERhdGUoKTsKCnZhciBEYXRlUmFuZ2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERhdGVSYW5nZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlUmFuZ2UpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKERhdGVSYW5nZSwgW3sKICAgIGtleTogImNhY3VsUXVhcnRlckJ5TW9udGgiLAogICAgdmFsdWU6CiAgICAvKioNCiAgICAgKiBYw6FjIMSR4buLbmggcXXDvQ0KICAgICAqIEBwYXJhbSB7Kn0gbW9udGgNCiAgICAgKi8KICAgIGZ1bmN0aW9uIGNhY3VsUXVhcnRlckJ5TW9udGgobW9udGgpIHsKICAgICAgLy9Yw6FjIMSR4buLbmggcXXDvQogICAgICBpZiAoaXNOYU4obW9udGgpKSByZXR1cm47CiAgICAgIHJldHVybiBNYXRoLmZsb29yKG1vbnRoIC8gMykgKyAxOwogICAgfQogICAgLyoqDQogICAgICogTmfDoHkgaGnhu4duIHThuqFpDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFRoaXNEYXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRoaXNEYXkoKSB7CiAgICAgIHZhciBkID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGQuZ2V0RnVsbFllYXIoKSwgZC5nZXRNb250aCgpLCBkLmdldERhdGUoKSwgMCwgMCwgMCwgMCk7CiAgICB9CiAgICAvKioNCiAgICAgKiBUw61uaCBuZ8OgeSBi4bqvdCDEkeG6p3UgY+G7p2EgdGjDoW5nICgxLi4uMTIpDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldEZyb21EYXRlTW9udGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZyb21EYXRlTW9udGgobW9udGgsIHllYXIpIHsKICAgICAgdmFyIGRhdGVOb3cgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlTm93LmdldEZ1bGxZZWFyKCk7CgogICAgICBpZiAoeWVhcikgewogICAgICAgIGN1cnJlbnRZZWFyID0geWVhcjsKICAgICAgfQoKICAgICAgcmV0dXJuIG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBtb250aCAtIDEsIDEpOwogICAgfQogICAgLyoqDQogICAgICogVMOtbmggbmfDoHkga+G6v3QgdGjDumMgY+G7p2EgdGjDoW5nICgxLi4uLjEyKQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRUb0RhdGVNb250aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9EYXRlTW9udGgobW9udGgsIHllYXIpIHsKICAgICAgdmFyIGN1cnJlbnRZZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwoKICAgICAgaWYgKHllYXIpIHsKICAgICAgICBjdXJyZW50WWVhciA9IHllYXI7CiAgICAgIH0KCiAgICAgIHZhciBkYXlzSW5Nb250aCA9IDMyIC0gbmV3IERhdGUoY3VycmVudFllYXIsIG1vbnRoIC0gMSwgMzIsIDAsIDAsIDApLmdldERhdGUoKTsKICAgICAgcmV0dXJuIG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBtb250aCAtIDEsIGRheXNJbk1vbnRoLCAwLCAwLCAwKTsKICAgIH0KICAgIC8qKiAgU2luaCBow6BtIHJpw6puZyB0csOhbmgg4bqjbmggaMaw4bufbmcgxJHhur9uIGNo4bupYyBuxINuZyBjaHVuZw0KICAgICAqIFTDrW5oIG5nw6B5IGvhur90IHRow7pjIGPhu6dhIHRow6FuZyAoMS4uLi4xMikgY3VhIG7Eg20geMOhYyDEkeG7i25oDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFRvRGF0ZU1vbnRoQW5kWWVhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9EYXRlTW9udGhBbmRZZWFyKG1vbnRoLCB5ZWFyKSB7CiAgICAgIHZhciBkYXlzSW5Nb250aCA9IDMyIC0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCAzMiwgMCwgMCwgMCkuZ2V0RGF0ZSgpOwogICAgICByZXR1cm4gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlzSW5Nb250aCwgMCwgMCwgMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0RnJvbURhdGVNb250aEFuZFllYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZyb21EYXRlTW9udGhBbmRZZWFyKG1vbnRoLCB5ZWFyKSB7CiAgICAgIHJldHVybiBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIDEpOwogICAgfQogICAgLyoqDQogICAgICogUXXDvSBuw6B5DQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFRoaXNRdWFydGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaGlzUXVhcnRlcigpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVuTW9udGggPSBkYXRlLmdldE1vbnRoKCksCiAgICAgICAgICBjdXJyZW50UXVhdGVyID0gdGhpcy5jYWN1bFF1YXJ0ZXJCeU1vbnRoKGN1cnJlbk1vbnRoKSwKICAgICAgICAgIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICB2YXIgcmFuZ2UgPSB7fTsKICAgICAgcmFuZ2UuZnJvbURhdGUgPSB0aGlzLmZyb21RdWFydGVyKGN1cnJlbnRRdWF0ZXIsIGN1cnJlbnRZZWFyKTsKICAgICAgcmFuZ2UudG9EYXRlID0gdGhpcy50b1F1YXJ0ZXIoY3VycmVudFF1YXRlciwgY3VycmVudFllYXIpOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBRdcO9IHNhdQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXROZXh0UXVhcnRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmV4dFF1YXJ0ZXIoKSB7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbk1vbnRoID0gZGF0ZS5nZXRNb250aCgpLAogICAgICAgICAgY3VycmVudFF1YXRlciA9IHRoaXMuY2FjdWxRdWFydGVyQnlNb250aChjdXJyZW5Nb250aCkgKyAxLAogICAgICAgICAgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IHRoaXMuZnJvbVF1YXJ0ZXIoY3VycmVudFF1YXRlciwgY3VycmVudFllYXIpOwogICAgICByYW5nZS50b0RhdGUgPSB0aGlzLnRvUXVhcnRlcihjdXJyZW50UXVhdGVyLCBjdXJyZW50WWVhcik7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFF1w70gdHLGsOG7m2MNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0TGFzdFF1YXJ0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RRdWFydGVyKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBjdXJyZW5Nb250aCA9IGRhdGUuZ2V0TW9udGgoKSwKICAgICAgICAgIGN1cnJlbnRRdWF0ZXIgPSB0aGlzLmNhY3VsUXVhcnRlckJ5TW9udGgoY3VycmVuTW9udGgpIC0gMSwKICAgICAgICAgIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgcmFuZ2UgPSB7fTsKICAgICAgcmFuZ2UuZnJvbURhdGUgPSB0aGlzLmZyb21RdWFydGVyKGN1cnJlbnRRdWF0ZXIsIGN1cnJlbnRZZWFyKTsKICAgICAgcmFuZ2UudG9EYXRlID0gdGhpcy50b1F1YXJ0ZXIoY3VycmVudFF1YXRlciwgY3VycmVudFllYXIpOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBUw61uaCBow7RtIHF1YQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRZZXN0ZXJkYXkiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFllc3RlcmRheSgpIHsKICAgICAgdmFyIGR0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIGR0ZS5hZGREYXlzKC0xKTsKICAgICAgcmV0dXJuIGR0ZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIG5nw6B5IG1haQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRUb21vcnJvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VG9tb3Jyb3coKSB7CiAgICAgIHZhciBkdGUgPSBuZXcgRGF0ZSgpOwogICAgICBkdGUuYWRkRGF5cygxKTsKICAgICAgcmV0dXJuIGR0ZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHR14bqnbiBuw6B5DQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFRoaXNXZWVrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaGlzV2VlaygpIHsKICAgICAgLy9Uw61uaCBuZ8OgeSBoaeG7h24gdOG6oWkgbMOgIHRo4bupIG3huqV5CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgY3VycmVuTW9udGggPSBkYXRlLmdldE1vbnRoKCksCiAgICAgICAgICBjdXJyZW50RGF5ID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpOwogICAgICB2YXIgeCA9IGRheSA9PSAwID8gZGF5ICsgNyAtIDEgOiBkYXkgLSAxOwogICAgICB2YXIgcmFuZ2UgPSB7fTsKICAgICAgcmFuZ2UuZnJvbURhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgY3VycmVuTW9udGgsIGN1cnJlbnREYXkgLSB4LCAwLCAwLCAwKTsKICAgICAgcmFuZ2UudG9EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCBjdXJyZW50RGF5IC0geCArIDYsIDAsIDAsIDApOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBUw61uaCB0deG6p24gdHLGsOG7m2MNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0TGFzdFdlZWsiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldExhc3RXZWVrKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgIGN1cnJlbk1vbnRoID0gZGF0ZS5nZXRNb250aCgpLAogICAgICAgICAgY3VycmVudERheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTsKICAgICAgdmFyIHggPSBkYXkgPT0gMCA/IGRheSArIDcgLSAxIDogZGF5IC0gMTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCBjdXJyZW50RGF5IC0geCAtIDcsIDAsIDAsIDApOwogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgY3VycmVuTW9udGgsIGN1cnJlbnREYXkgLSB4IC0gMSwgMCwgMCwgMCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFR14bqnbiB04bubaQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXROZXh0V2VlayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TmV4dFdlZWsoKSB7CiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbnRZZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpLAogICAgICAgICAgY3VycmVuTW9udGggPSBkYXRlLmdldE1vbnRoKCksCiAgICAgICAgICBjdXJyZW50RGF5ID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgIHZhciBkYXkgPSBkYXRlLmdldERheSgpOwogICAgICB2YXIgeCA9IGRheSA9PSAwID8gZGF5ICsgNiA6IGRheSAtIDE7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCwgY3VycmVudERheSAtIHggKyA3LCAwLCAwLCAwKTsKICAgICAgcmFuZ2UudG9EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCBjdXJyZW50RGF5IC0geCArIDEzLCAwLCAwLCAwKTsKICAgICAgcmV0dXJuIHJhbmdlOwogICAgfQogICAgLyoqDQogICAgICogVGjDoW5nIG7DoHkNCiAgICAgKg0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRUaGlzTW9udGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRoaXNNb250aCgpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICBjdXJyZW5Nb250aCA9IGRhdGUuZ2V0TW9udGgoKSwKICAgICAgICAgIGN1cnJlbnREYXkgPSBkYXRlLmdldERhdGUoKSwKICAgICAgICAgIGRheXNPZk1vbnRoID0gMzIgLSBuZXcgRGF0ZShjdXJyZW50WWVhciwgY3VycmVuTW9udGgsIDMyKS5nZXREYXRlKCk7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCwgMSwgMCwgMCwgMCk7CiAgICAgIHJhbmdlLnRvRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCwgZGF5c09mTW9udGgsIDAsIDAsIDApOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBUaMOhbmcgc2F1DQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldExhc3RNb250aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGFzdE1vbnRoKCkgewogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgIGN1cnJlbk1vbnRoID0gZGF0ZS5nZXRNb250aCgpLAogICAgICAgICAgY3VycmVudERheSA9IGRhdGUuZ2V0RGF0ZSgpLAogICAgICAgICAgZGF5c09mTW9udGggPSAzMiAtIG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCAtIDEsIDMyKS5nZXREYXRlKCk7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCAtIDEsIDEpOwogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgY3VycmVuTW9udGggLSAxLCBkYXlzT2ZNb250aCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHRow6FuZyB04bubaQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXROZXh0TW9udGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5leHRNb250aCgpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICBjdXJyZW5Nb250aCA9IGRhdGUuZ2V0TW9udGgoKSwKICAgICAgICAgIGN1cnJlbnREYXkgPSBkYXRlLmdldERhdGUoKTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoICsgMSwgMSk7CiAgICAgIHJhbmdlLnRvRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCArIDEsIDMyIC0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoICsgMSwgMzIpLmdldERhdGUoKSk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHPDoXUgdGjDoW5nIGN14buRaSBuxINtICtU4burIG5nw6B5IMSR4bqndSB0acOqbiArIDYgdGjDoW5nIG7hu69hDQogICAgICovCgogIH0sIHsKICAgIGtleTogImdldFNpeExhc3RNb250aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0U2l4TGFzdE1vbnRoKCkgewogICAgICB2YXIgY3VycmVudFllYXIgPSB0aGlzLmdldEN1cnJlbnRGaXNjYWxZZWFyKCksCiAgICAgICAgICBzdGFydE1vbnRoID0gMCwKICAgICAgICAgIC8vbmV3IERhdGUoZmlzY2FsRnJvbURhdGUpLmdldE1vbnRoKCksCiAgICAgIGRheXNPZk1vbnRoID0gMzIgLSBuZXcgRGF0ZShjdXJyZW50WWVhciwgc3RhcnRNb250aCArIDExLCAzMikuZ2V0RGF0ZSgpOwogICAgICB2YXIgcmFuZ2UgPSB7fTsKICAgICAgcmFuZ2UuZnJvbURhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgc3RhcnRNb250aCArIDYsIDEsIDAsIDAsIDApOwogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgc3RhcnRNb250aCArIDExLCBkYXlzT2ZNb250aCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnZXRDdXJyZW50RmlzY2FsWWVhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Q3VycmVudEZpc2NhbFllYXIoKSB7CiAgICAgIC8vZ2V0IGN1cnJlbnQgZGF0ZQogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpOyAvL2dldCBjdXJyZW50IG1vbnRoCiAgICAgIC8vIHZhciBjdXJNb250aCA9IHRvZGF5LmdldE1vbnRoKCk7CiAgICAgIC8vIHZhciBmaXNjYWxZciA9ICIiOwogICAgICAvLyBpZiAoY3VyTW9udGggPiAzKSB7IC8vCiAgICAgIC8vIAlmaXNjYWxZciA9IHRvZGF5LmdldEZ1bGxZZWFyKCkudG9TdHJpbmcoKTsKICAgICAgLy8gfSBlbHNlIHsKICAgICAgLy8gCWZpc2NhbFlyID0gKHRvZGF5LmdldEZ1bGxZZWFyKCkgLSAxKS50b1N0cmluZygpOwogICAgICAvLyB9CgogICAgICByZXR1cm4gdG9kYXkuZ2V0RnVsbFllYXIoKTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHPDoXUgdGjDoW5nIMSR4bqndSAgbsSDbQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRTaXhGaXJzdE1vbnRoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTaXhGaXJzdE1vbnRoKCkgewogICAgICB2YXIgY3VycmVudFllYXIgPSB0aGlzLmdldEN1cnJlbnRGaXNjYWxZZWFyKCksCiAgICAgICAgICBjdXJyZW5Nb250aCA9IDAsCiAgICAgICAgICAvL25ldyBEYXRlKGZpc2NhbEZyb21EYXRlKS5nZXRNb250aCgpLAogICAgICBkYXlzT2ZNb250aCA9IDMyIC0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoICsgNSwgMzIpLmdldERhdGUoKTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCAxLCAwLCAwLCAwKTsKICAgICAgcmFuZ2UudG9EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoICsgNSwgZGF5c09mTW9udGgpOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBUw61uaCBuxINtICB0csaw4bubYw0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRMYXN0WWVhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TGFzdFllYXIoKSB7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IHRoaXMuZ2V0Q3VycmVudEZpc2NhbFllYXIoKSwKICAgICAgICAgIGN1cnJlbk1vbnRoID0gMCwKICAgICAgICAgIC8vbmV3IERhdGUoZmlzY2FsRnJvbURhdGUpLmdldE1vbnRoKCksCiAgICAgIGRheXNPZk1vbnRoID0gMzIgLSBuZXcgRGF0ZShjdXJyZW50WWVhciAtIDEsIGN1cnJlbk1vbnRoICsgMTEsIDMyKS5nZXREYXRlKCk7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyIC0gMSwgY3VycmVuTW9udGgsIDEsIDAsIDAsIDApOwogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciAtIDEsIGN1cnJlbk1vbnRoICsgMTEsIGRheXNPZk1vbnRoKTsKICAgICAgcmV0dXJuIHJhbmdlOwogICAgfQogICAgLyoqDQogICAgICogTsSDbSBzYXUNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0TmV4dFllYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldE5leHRZZWFyKCkgewogICAgICB2YXIgY3VycmVudFllYXIgPSB0aGlzLmdldEN1cnJlbnRGaXNjYWxZZWFyKCksCiAgICAgICAgICBjdXJyZW5Nb250aCA9IDAsCiAgICAgICAgICAvL25ldyBEYXRlKGZpc2NhbEZyb21EYXRlKS5nZXRNb250aCgpLAogICAgICBkYXlzT2ZNb250aCA9IDMyIC0gbmV3IERhdGUoY3VycmVudFllYXIgKyAxLCBjdXJyZW5Nb250aCArIDExLCAzMikuZ2V0RGF0ZSgpOwogICAgICB2YXIgcmFuZ2UgPSB7fTsKICAgICAgcmFuZ2UuZnJvbURhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciArIDEsIGN1cnJlbk1vbnRoLCAxLCAwLCAwLCAwKTsKICAgICAgcmFuZ2UudG9EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIgKyAxLCBjdXJyZW5Nb250aCArIDExLCBkYXlzT2ZNb250aCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0gLy8gLyoqCiAgICAvLyAgKiBLaeG7g20gdHJhIHhlbSBuZ8OgeSBo4bqhY2ggdG/DoW4gY+G7p2EgaOG7hyB0aOG7kW5nIHNvIHbhu5tpIG5nw6B5IGLhuq90IMSR4bqndSBj4bunYSBuxINtIHTDoGkgY2jDrW5oCiAgICAvLyAgKiB0cnVlPD09PiBOZ8OgeSBob+G6oWNoIHRvw6FuIG5o4buPIGjGoW4gbmfDoHkgYuG6r3QgxJHhuqd1IE7Eg20gdMOgaSBjaMOtbmgKICAgIC8vICAqLwogICAgLy8gY2hlY2tGaXNjYWxZZWFyKCkgewogICAgLy8gCXZhciBwb3N0ZWREYXRlID0gbmV3IERhdGUoMjAxOSx0aGlzLnNlc3Npb24uU3lzdGVtRGF0ZS5nZXRNb250aCgpLHRoaXMuc2Vzc2lvbi5TeXN0ZW1EYXRlLmdldERhdGUoKSwwLDAsMCkuZ2V0VGltZSgpIC8gMTAwMDsKICAgIC8vIAl2YXIgc3RhcnREYXRlID1uZXcgRGF0ZSgyMDE5LHRoaXMuRmlzY2FsRnJvbURhdGUuZ2V0TW9udGgoKSx0aGlzLkZpc2NhbEZyb21EYXRlLmdldERhdGUoKSwwLDAsMCkuZ2V0VGltZSgpIC8gMTAwMDsKICAgIC8vIAlyZXR1cm4gcG9zdGVkRGF0ZSA8ICBzdGFydERhdGU7CiAgICAvLyB9CgogICAgLyoqDQogICAgICogTsSDbSBuYXkNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0VGhpc1llYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRoaXNZZWFyKHllYXIpIHsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHZhciBjdXJyZW50WWVhciA9IHRoaXMuZ2V0Q3VycmVudEZpc2NhbFllYXIoKTsKCiAgICAgIGlmICh5ZWFyKSB7CiAgICAgICAgY3VycmVudFllYXIgPSB5ZWFyOwogICAgICB9CgogICAgICB2YXIgY3VycmVuTW9udGggPSAwLAogICAgICAgICAgLy9uZXcgRGF0ZShmaXNjYWxGcm9tRGF0ZSkuZ2V0TW9udGgoKSwKICAgICAgY3VycmVudERheSA9IG5ldyBEYXRlKGZpc2NhbEZyb21EYXRlKS5nZXREYXRlKCksCiAgICAgICAgICBkYXlzT2ZNb250aCA9IDMyIC0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoICsgMTEsIDMyKS5nZXREYXRlKCk7CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCAxLCAwLCAwLCAwKTsgLy8gcmFuZ2UuZnJvbURhdGUgPSB0aGlzLnNlc3Npb24uRmlzY2FsRnJvbURhdGU7CgogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciwgY3VycmVuTW9udGggKyAxMSwgZGF5c09mTW9udGgsIDAsIDAsIDApOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiBDw6FjaCDEkcOieSAzIG7Eg20NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0VGhyZWVMYXN0V2VlayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGhyZWVMYXN0V2VlaygpIHsKICAgICAgLy8gdmFyIHJhbmdlPXt9OwogICAgICAvLyByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKHRoaXMuRmlzY2FsRnJvbURhdGUuYWRkWWVhcnMoLTMpKTsKICAgICAgLy8gcmFuZ2UudG9EYXRlID0gbmV3IERhdGUodGhpcy5GaXNjYWxGcm9tRGF0ZS5hZGRZZWFycygtMikuYWRkRGF5cygtMSkpOwogICAgICAvLyByZXR1cm4gcmFuZ2U7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IHRoaXMuZ2V0Q3VycmVudEZpc2NhbFllYXIoKSwKICAgICAgICAgIGN1cnJlbk1vbnRoID0gbmV3IERhdGUoZmlzY2FsRnJvbURhdGUpLmdldE1vbnRoKCksCiAgICAgICAgICBjdXJyZW50RGF5ID0gbmV3IERhdGUoZmlzY2FsRnJvbURhdGUpLmdldERhdGUoKSwKICAgICAgICAgIGRheXNPZk1vbnRoID0gMzIgLSBuZXcgRGF0ZShjdXJyZW50WWVhciAtIDMsIGN1cnJlbk1vbnRoICsgMTEsIDMyKS5nZXREYXRlKCk7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyIC0gMywgY3VycmVuTW9udGgsIDEsIDAsIDAsIDApOwogICAgICByYW5nZS50b0RhdGUgPSBuZXcgRGF0ZShjdXJyZW50WWVhciAtIDMsIGN1cnJlbk1vbnRoICsgMTEsIGRheXNPZk1vbnRoKTsKICAgICAgcmV0dXJuIHJhbmdlOwogICAgfQogICAgLyoqDQogICAgICogxJDhuqd1IHR14bqnbiB24bubaSBoaeG7h24gdOG6oWkNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Rmlyc3RXZWVrVG9QcmVzZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaXJzdFdlZWtUb1ByZXNlbnQoKSB7CiAgICAgIC8vVMOtbmggbmfDoHkgaGnhu4duIHThuqFpIGzDoCB0aOG7qSBt4bqleQogICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHZhciBjdXJyZW50WWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKSwKICAgICAgICAgIGN1cnJlbk1vbnRoID0gZGF0ZS5nZXRNb250aCgpLAogICAgICAgICAgY3VycmVudERheSA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTsKICAgICAgdmFyIHggPSBkYXkgPT0gMCA/IGRheSArIDcgLSAxIDogZGF5IC0gMTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCBjdXJyZW50RGF5IC0geCwgMCwgMCwgMCk7CiAgICAgIHJhbmdlLnRvRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCwgY3VycmVudERheSwgMCwgMCwgMCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIMSQ4bqndSBxdcO9IMSR4bq/biBoaeG7h24gdOG6oWkNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Rmlyc3RRdWFydGVyVG9QcmVzZW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGaXJzdFF1YXJ0ZXJUb1ByZXNlbnQoKSB7CiAgICAgIC8vVMOtbmggcXXDvSBuw6B5IGzDoCBxdcO9IG7DoG8KICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVuTW9udGggPSBkYXRlLmdldE1vbnRoKCksCiAgICAgICAgICBjdXJyZW50UXVhdGVyID0gdGhpcy5jYWN1bFF1YXJ0ZXJCeU1vbnRoKGN1cnJlbk1vbnRoKTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gdGhpcy5mcm9tUXVhcnRlcihjdXJyZW50UXVhdGVyLCBkYXRlLmdldEZ1bGxZZWFyKCkpOwogICAgICByYW5nZS50b0RhdGUgPSBkYXRlOwogICAgICByZXR1cm4gcmFuZ2U7CiAgICB9CiAgICAvKioNCiAgICAgKiDEkOG6p3UgdGjDoW5nIMSR4bq/biBoaeG7h24gdOG6oWkNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZ2V0Rmlyc3RNb250aFRvUHJlc2VudCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rmlyc3RNb250aFRvUHJlc2VudCgpIHsKICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCksCiAgICAgICAgICBjdXJyZW5Nb250aCA9IGRhdGUuZ2V0TW9udGgoKSwKICAgICAgICAgIGN1cnJlbnREYXkgPSBkYXRlLmdldERhdGUoKTsKICAgICAgdmFyIHJhbmdlID0ge307CiAgICAgIHJhbmdlLmZyb21EYXRlID0gbmV3IERhdGUoY3VycmVudFllYXIsIGN1cnJlbk1vbnRoLCAxLCAwLCAwLCAwKTsKICAgICAgcmFuZ2UudG9EYXRlID0gbmV3IERhdGUoKTsKICAgICAgcmV0dXJuIHJhbmdlOwogICAgfQogICAgLyoqDQogICAgICogxJDhuqd1IG7Eg20gxJHhur9uIGhp4buHbiB04bqhaQ0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJnZXRGaXJzdFllYXJUb1ByZXNlbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEZpcnN0WWVhclRvUHJlc2VudCgpIHsKICAgICAgdmFyIGN1cnJlbnRZZWFyID0gdGhpcy5nZXRDdXJyZW50RmlzY2FsWWVhcigpLAogICAgICAgICAgY3VycmVuTW9udGggPSAwLAogICAgICAgICAgLy9uZXcgRGF0ZShmaXNjYWxGcm9tRGF0ZSkuZ2V0TW9udGgoKSwKICAgICAgY3VycmVudERheSA9IG5ldyBEYXRlKGZpc2NhbEZyb21EYXRlKS5nZXREYXRlKCk7CiAgICAgIHZhciByYW5nZSA9IHt9OwogICAgICByYW5nZS5mcm9tRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnRZZWFyLCBjdXJyZW5Nb250aCwgMSwgMCwgMCwgMCk7CiAgICAgIHJhbmdlLnRvRGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIHJldHVybiByYW5nZTsKICAgIH0KICAgIC8qKg0KICAgICAqIE5nw6B5IGLhuq90IMSR4bqndSBj4bunYSBxdcO9DQogICAgICogQHBhcmFtIHsqfSBxdWF0ZXI9dMOqbiBxdcO9ICtvZmZzZXQNCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiZnJvbVF1YXJ0ZXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZyb21RdWFydGVyKHF1YXRlciwgeWVhcikgewogICAgICAvL3TDrW5oIG5nw6B5IGLhuq90IMSR4bqndSBxdcO9CiAgICAgIHZhciBtb250aCA9IChxdWF0ZXIgLSAxKSAqIDMgKyAxOwogICAgICB2YXIgZnJvbURhdGUgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCAtIDEsIDEpOwogICAgICByZXR1cm4gZnJvbURhdGU7CiAgICB9CiAgICAvKioNCiAgICAgKiBOZ8OgeSBr4bq/dCB0aMO6YyBRdcO9DQogICAgICogQHBhcmFtIHsqfSBxdWF0ZXI9dMOqbiBxdcO9ICtvZmZzZXQ6VsOtIGThu6UgcXXDvSBJIG5oxrBuZyBuZ8OgeSBmaW5hbCBs4bqhaSBsw6AgMS80ID0+IFRo4buxYyB04bq/IGzDoCBxdcO9IDINCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAidG9RdWFydGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0b1F1YXJ0ZXIocXVhdGVyLCB5ZWFyKSB7CiAgICAgIC8vTmfDoHkga+G6v3QgdGh1YyBj4bunYSBxdcO9CiAgICAgIHZhciBtb250aCA9IHF1YXRlciAqIDM7CiAgICAgIHZhciBkYXlzSW5Nb250aCA9IDMyIC0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCAzMikuZ2V0RGF0ZSgpOwogICAgICB2YXIgdG9EYXRlID0gbmV3IERhdGUoeWVhciwgbW9udGggLSAxLCBkYXlzSW5Nb250aCk7CiAgICAgIHJldHVybiB0b0RhdGU7CiAgICB9CiAgICAvKioqDQogICAgICogVFRIdXllbg0KICAgICAqIELhu5Ugc3VuZyB5ZWFyIHBo4bulYyB24bulIHTDrW5oIHRvw6FuIGvhu7MgYsOhbyBjw6FvDQogICAgICogVFRodXllbiBIw6BtIHTDrW5oIE5nw6B5IHRow6FuZw0KICAgICAqIEByZXR1cm4ge09iamVjdH0gdHLhuqMgduG7gSByYW5nZSB7ZnJvbURhdGU6ICwgdG9EYXRlOiB9DQogICAgICovCgogIH0sIHsKICAgIGtleTogImNhY3VsYXRlUmFuZ2VGcm9tUGVyaW9kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWN1bGF0ZVJhbmdlRnJvbVBlcmlvZChwZXJpb2QsIGlubmVyRnJvbURhdGUsIGlubmVyVG9EYXRlLCB5ZWFyKSB7CiAgICAgIHZhciBtZSA9IHRoaXMsCiAgICAgICAgICByYW5nZSwKICAgICAgICAgIGZyb21EYXRlLAogICAgICAgICAgdG9EYXRlOwoKICAgICAgc3dpdGNoIChwZXJpb2QpIHsKICAgICAgICBjYXNlIFBlcmlvZC5KYW51YXJ5OgogICAgICAgIGNhc2UgUGVyaW9kLkZlYnJ1YXJ5OgogICAgICAgIGNhc2UgUGVyaW9kLk1hcmNoOgogICAgICAgIGNhc2UgUGVyaW9kLkFwcmlsOgogICAgICAgIGNhc2UgUGVyaW9kLk1heToKICAgICAgICBjYXNlIFBlcmlvZC5KdW5lOgogICAgICAgIGNhc2UgUGVyaW9kLkp1bHk6CiAgICAgICAgY2FzZSBQZXJpb2QuQXVndXN0OgogICAgICAgIGNhc2UgUGVyaW9kLlNlcHRlbWJlcjoKICAgICAgICBjYXNlIFBlcmlvZC5PY3RvYmVyOgogICAgICAgIGNhc2UgUGVyaW9kLk5vdmVtYmVyOgogICAgICAgIGNhc2UgUGVyaW9kLkRlY2VtYmVyOgogICAgICAgICAgZnJvbURhdGUgPSBtZS5nZXRGcm9tRGF0ZU1vbnRoKHBlcmlvZCwgeWVhcik7CiAgICAgICAgICB0b0RhdGUgPSBtZS5nZXRUb0RhdGVNb250aChwZXJpb2QsIHllYXIpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUGVyaW9kLkZpc2NhbEk6CiAgICAgICAgY2FzZSBQZXJpb2QuRmlzY2FsSUk6CiAgICAgICAgY2FzZSBQZXJpb2QuRmlzY2FsSUlJOgogICAgICAgIGNhc2UgUGVyaW9kLkZpc2NhbElWOgogICAgICAgICAgewogICAgICAgICAgICB2YXIgb2Zmc2V0UXVhcnRlciA9IDAsCiAgICAgICAgICAgICAgICAvL21lLmNhY3VsUXVhcnRlckJ5TW9udGgobmV3IERhdGUoZmlzY2FsRnJvbURhdGUpLmdldE1vbnRoKCkpIC0gMSwKICAgICAgICAgICAgZmlzY2FsID0gcGVyaW9kIC8gMTAwICsgb2Zmc2V0UXVhcnRlcjsKCiAgICAgICAgICAgIGlmICgheWVhcikgewogICAgICAgICAgICAgIHllYXIgPSBtZS5nZXRDdXJyZW50RmlzY2FsWWVhcigpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vVuG7m2kgdHJ1eeG7gW4gbsSDbSBj4bqnbiB0w61uaCB0b8OhbiBs4bqhaSBuxINtIGNobyDEkcO6bmcgdGhlbyBxdcO9IMSRYW5nIHTDrW5oIHRvw6FuIChkw7luZyBjaG8gc3ViVGl0bGUgYsOhbyBjw6FvKQogICAgICAgICAgICAgIHllYXIgPSBtZS5nZXRZZWFyV2l0aEZyb21EYXRlKGlubmVyRnJvbURhdGUsIHllYXIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmcm9tRGF0ZSA9IG1lLmZyb21RdWFydGVyKGZpc2NhbCwgeWVhcik7CiAgICAgICAgICAgIHRvRGF0ZSA9IG1lLnRvUXVhcnRlcihmaXNjYWwsIHllYXIpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSBQZXJpb2QuVGhpc0RheToKICAgICAgICAgIGZyb21EYXRlID0gdG9EYXRlID0gbWUuZ2V0VGhpc0RheSgpOyAvLyB0b0RhdGUgPSBtZS5nZXRUaGlzRGF5KCk7CgogICAgICAgICAgYnJlYWs7CgogICAgICAgIGNhc2UgUGVyaW9kLlllc3RlcmRheToKICAgICAgICAgIHsKICAgICAgICAgICAgZnJvbURhdGUgPSBtZS5nZXRZZXN0ZXJkYXkoKTsKICAgICAgICAgICAgdG9EYXRlID0gZnJvbURhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIFBlcmlvZC5Ub21vcnJvdzoKICAgICAgICAgIHsKICAgICAgICAgICAgZnJvbURhdGUgPSBtZS5nZXRUb21vcnJvdygpOwogICAgICAgICAgICB0b0RhdGUgPSBmcm9tRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLlRoaXNXZWVrOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldFRoaXNXZWVrKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLkxhc3RXZWVrOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldExhc3RXZWVrKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLk5leHRXZWVrOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldE5leHRXZWVrKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLlRoaXNNb250aDoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXRUaGlzTW9udGgoKTsKICAgICAgICAgICAgZnJvbURhdGUgPSByYW5nZS5mcm9tRGF0ZTsKICAgICAgICAgICAgdG9EYXRlID0gcmFuZ2UudG9EYXRlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSBQZXJpb2QuTGFzdE1vbnRoOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldExhc3RNb250aCgpOwogICAgICAgICAgICBmcm9tRGF0ZSA9IHJhbmdlLmZyb21EYXRlOwogICAgICAgICAgICB0b0RhdGUgPSByYW5nZS50b0RhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIFBlcmlvZC5OZXh0TW9udGg6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJhbmdlID0gbWUuZ2V0TmV4dE1vbnRoKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLlRoaXNRdWFydGVyOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldFRoaXNRdWFydGVyKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLkxhc3RRdWFydGVyOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldExhc3RRdWFydGVyKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLk5leHRRdWFydGVyOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldE5leHRRdWFydGVyKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLlNpeExhc3RNb250aDoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXRTaXhMYXN0TW9udGgoKTsKICAgICAgICAgICAgZnJvbURhdGUgPSByYW5nZS5mcm9tRGF0ZTsKICAgICAgICAgICAgdG9EYXRlID0gcmFuZ2UudG9EYXRlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSBQZXJpb2QuU2l4Rmlyc3RNb250aDoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXRTaXhGaXJzdE1vbnRoKCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLlRoaXNZZWFyOgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldFRoaXNZZWFyKHllYXIpOwogICAgICAgICAgICBmcm9tRGF0ZSA9IHJhbmdlLmZyb21EYXRlOwogICAgICAgICAgICB0b0RhdGUgPSByYW5nZS50b0RhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIFBlcmlvZC5MYXN0WWVhcjoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXRMYXN0WWVhcigpOwogICAgICAgICAgICBmcm9tRGF0ZSA9IHJhbmdlLmZyb21EYXRlOwogICAgICAgICAgICB0b0RhdGUgPSByYW5nZS50b0RhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIFBlcmlvZC5OZXh0WWVhcjoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXROZXh0WWVhcigpOwogICAgICAgICAgICBmcm9tRGF0ZSA9IHJhbmdlLmZyb21EYXRlOwogICAgICAgICAgICB0b0RhdGUgPSByYW5nZS50b0RhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIC8vIGNhc2UgUGVyaW9kLlRocmVlTGFzdFllYXI6IHsKICAgICAgICAvLyAJcmFuZ2UgPSBtZS5nZXRUaHJlZUxhc3RXZWVrKCk7CiAgICAgICAgLy8gCWZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgLy8gCXRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAvLyAJYnJlYWs7CiAgICAgICAgLy8gfQoKICAgICAgICBjYXNlIFBlcmlvZC5GaXJzdFdlZWtUb1ByZXNlbnQ6CiAgICAgICAgICB7CiAgICAgICAgICAgIHJhbmdlID0gbWUuZ2V0Rmlyc3RXZWVrVG9QcmVzZW50KCk7CiAgICAgICAgICAgIGZyb21EYXRlID0gcmFuZ2UuZnJvbURhdGU7CiAgICAgICAgICAgIHRvRGF0ZSA9IHJhbmdlLnRvRGF0ZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGNhc2UgUGVyaW9kLkZpcnN0UXVhcnRlclRvUHJlc2VudDoKICAgICAgICAgIHsKICAgICAgICAgICAgcmFuZ2UgPSBtZS5nZXRGaXJzdFF1YXJ0ZXJUb1ByZXNlbnQoKTsKICAgICAgICAgICAgZnJvbURhdGUgPSByYW5nZS5mcm9tRGF0ZTsKICAgICAgICAgICAgdG9EYXRlID0gcmFuZ2UudG9EYXRlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgY2FzZSBQZXJpb2QuRmlyc3RZZWFyVG9QcmVzZW50OgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldEZpcnN0WWVhclRvUHJlc2VudCgpOwogICAgICAgICAgICBmcm9tRGF0ZSA9IHJhbmdlLmZyb21EYXRlOwogICAgICAgICAgICB0b0RhdGUgPSByYW5nZS50b0RhdGU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQoKICAgICAgICBjYXNlIFBlcmlvZC5GaXJzdE1vbnRoVG9QcmVzZW50OgogICAgICAgICAgewogICAgICAgICAgICByYW5nZSA9IG1lLmdldEZpcnN0TW9udGhUb1ByZXNlbnQoKTsKICAgICAgICAgICAgZnJvbURhdGUgPSByYW5nZS5mcm9tRGF0ZTsKICAgICAgICAgICAgdG9EYXRlID0gcmFuZ2UudG9EYXRlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KCiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGZyb21EYXRlID0gaW5uZXJGcm9tRGF0ZTsKICAgICAgICAgIHRvRGF0ZSA9IGlubmVyVG9EYXRlOwogICAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgZnJvbURhdGU6IGZyb21EYXRlLAogICAgICAgIHRvRGF0ZTogdG9EYXRlCiAgICAgIH07CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0WWVhcldpdGhGcm9tRGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0WWVhcldpdGhGcm9tRGF0ZShpbm5lckZyb21EYXRlLCB5ZWFyKSB7CiAgICAgIHZhciBtZSA9IHRoaXMsCiAgICAgICAgICBzeXN0ZW1EYXRlID0gaW5uZXJGcm9tRGF0ZSwKICAgICAgICAgIGZpc2NhbEZyb21EYXRlID0gZmlzY2FsRnJvbURhdGUsCiAgICAgICAgICBmaXNjYWxZZWFyID0gMDsgLy9Ucsaw4budbmcgaOG7o3AgbmfDoHkgYuG6r3QgxJHhuqd1IG7Eg20gdMOgaSBjaMOtbmggPSAwMS8wMQoKICAgICAgaWYgKGZpc2NhbEZyb21EYXRlLmdldE1vbnRoKCkgIT0gMCkgewogICAgICAgIC8qIE7hur91IE5nw6B5IGLhuq90IMSR4bqndSBuxINtIHTDoGkgY2jDrW5oICE9IDAxLzAxOiBjw7MgdGjhu4MgbMOgIDAxLzA0IGhv4bq3YyAwMS8wNyBob+G6t2MgMDEvMTAgbsSDbSBODQogICAgICAgIAktIFN5c3RlbURhdGUgPj0gRmlzY2FsbEZyb21EYXRlL1N5c3RlbURhdGUuZ2V0RnVsbFllYXIoKToNCiAgICAgICAgCQl0aMOsIEZpc2NhbGxZZWFyID0gU3lzdGVtRGF0ZS5nZXRGdWxsWWVhcigpDQogICAgICAgIAktIE7hur91IGtow7RuZyB0aMOsIEZpc2NhbGxZZWFyID0gU3lzdGVtRGF0ZS5nZXRGdWxsWWVhcigpIC0gMQ0KICAgICAgICAqLwogICAgICAgIHZhciBmaXNjYWxGcm9tRGF0ZUN1cnJlbnQgPSBuZXcgRGF0ZShzeXN0ZW1EYXRlLmdldEZ1bGxZZWFyKCksIGZpc2NhbEZyb21EYXRlLmdldE1vbnRoKCksIGZpc2NhbEZyb21EYXRlLmdldERhdGUoKSk7CgogICAgICAgIGlmIChzeXN0ZW1EYXRlLmdldFRpbWUoKSA+PSBmaXNjYWxGcm9tRGF0ZUN1cnJlbnQuZ2V0VGltZSgpKSB7CiAgICAgICAgICBmaXNjYWxZZWFyID0geWVhcjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZmlzY2FsWWVhciA9IHllYXIgLSAxOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvL1RyxrDhu51uZyBo4bujcCBuw6B5IE5nw6B5IGLhuq90IMSR4bqndSBuxINtIHTDoGkgY2jDrW5oIGx1w7RuID0gMDEvMDEKICAgICAgICAvL1RyxrDhu51uZyBo4bujcCBuw6B5IEZpc2NhbEZyb21EYXRlIHbDoCBGaXNjYWxUb0RhdGUgbMOgIGPDuW5nIDEgbsSDbQogICAgICAgIGZpc2NhbFllYXIgPSB5ZWFyOwogICAgICB9CgogICAgICByZXR1cm4gZmlzY2FsWWVhcjsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHJhIGvhu7MgdGhlbyB04burIG5nw6B5IHbDoCDEkeG6v24gbmfDoHkNCiAgICAgKiBAcGFyYW0ge0RhdGV9IGZyb21EYXRlIFThu6sgbmfDoHkNCiAgICAgKiBAcGFyYW0ge0RhdGV9IHRvRGF0ZSDEkOG6v24gbmfDoHkNCiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBHacOhIHRy4buLIGPhu6dhIGvhu7MgKHRoZW8gTVNFbnVtKQ0KICAgICAqIEBhdXRob3IgcGNtaW5oIDI0LjA0LjIwMjANCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY2FjdWxhdGVQZXJpb2RGcm9tUmFuZ2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhY3VsYXRlUGVyaW9kRnJvbVJhbmdlKGZyb21EYXRlLCB0b0RhdGUpIHsKICAgICAgdmFyIHBlcmlvZCA9IE1TRW51bS5QZXJpb2QuQ3VzdG9tOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhNU0VudW0uUGVyaW9kKS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhNU0VudW0uUGVyaW9kKVtpXTsKICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmNhY3VsYXRlUmFuZ2VGcm9tUGVyaW9kKE1TRW51bS5QZXJpb2Rba2V5XSk7CgogICAgICAgIGlmIChuZXcgRGF0ZShmcm9tRGF0ZSkudG9EYXRlU3RyaW5nKCkgPT0gbmV3IERhdGUocmFuZ2UuZnJvbURhdGUpLnRvRGF0ZVN0cmluZygpICYmIG5ldyBEYXRlKHRvRGF0ZSkudG9EYXRlU3RyaW5nKCkgPT0gbmV3IERhdGUocmFuZ2UudG9EYXRlKS50b0RhdGVTdHJpbmcoKSkgewogICAgICAgICAgcGVyaW9kID0gTVNFbnVtLlBlcmlvZFtrZXldOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHBlcmlvZDsKICAgIH0KICAgIC8qKg0KICAgICAqIFRUSHV5ZW4gxJDhu41jIGvhu7MgYsOhbyBjw6FvIMSRxrDhu6NjIGNo4buNbiBwaOG7pWMgduG7pSDEkW9jaCB0aXRsZSBuZ8OgeSBiw6FvIGPDoW8NCiAgICAgKiBW4bubaSBCw6FvIGPDoW8gY8OhYyBr4buzIGLDoW8gY8OhbyBsw6AgdHLDsm4gdGjDoW5nLCB0csOybiBxdcO9IHRyw7JuIG7Eg20sIG7Dqm4gY2jhu4kgbOG6pXkgc291cmNlIHThu6sgRlJSZXBvcnRQZXJpb2QgdGhheSB2w6wgUGVyaW9kDQogICAgICogQ2hvIHThu5FpIMawdS4NCiAgICAgKiBOxINtIGLDoW8gY8OhbyB0aGVvIGZvcm1EYXRlIGNo4bupIGtow7RuZyB0aGVvIG7Eg20gdMOgaSBjaMOtbmgNCiAgICAgKiBAcGFyYW0geyp9IGZyb21EYXRlIDogdOG7qyBuZ8OgeQ0KICAgICAqIEBwYXJhbSB7Kn0gdG9EYXRlIDogxJHhur9uIG5nw6B5DQogICAgICovCgogIH0sIHsKICAgIGtleTogImNhY3VsYXRlUGVyaW9kRnJvbVJhbmdlUmVwb3J0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWN1bGF0ZVBlcmlvZEZyb21SYW5nZVJlcG9ydChmcm9tRGF0ZSwgdG9EYXRlKSB7CiAgICAgIHZhciBwZXJpb2QgPSBNU0VudW0uRlJSZXBvcnRQZXJpb2QuQ3VzdG9tOyAvL0zhuqV5IGPDoWMga+G7syBiw6FvIGPDoW8KCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgT2JqZWN0LmtleXMoTVNFbnVtLkZSUmVwb3J0UGVyaW9kKS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhNU0VudW0uRlJSZXBvcnRQZXJpb2QpW2ldOwogICAgICAgIHZhciByYW5nZSA9IHRoaXMuY2FjdWxhdGVSYW5nZUZyb21QZXJpb2QoTVNFbnVtLkZSUmVwb3J0UGVyaW9kW2tleV0sIGZyb21EYXRlLCB0b0RhdGUsIGZyb21EYXRlLmdldEZ1bGxZZWFyKCkpOwoKICAgICAgICBpZiAobmV3IERhdGUoZnJvbURhdGUpLmdldERhdGVPbmx5KCkuZ2V0VGltZSgpID09IG5ldyBEYXRlKHJhbmdlLmZyb21EYXRlKS5nZXREYXRlT25seSgpLmdldFRpbWUoKSAmJiBuZXcgRGF0ZSh0b0RhdGUpLmdldERhdGVPbmx5KCkuZ2V0VGltZSgpID09IG5ldyBEYXRlKHJhbmdlLnRvRGF0ZSkuZ2V0RGF0ZU9ubHkoKS5nZXRUaW1lKCkpIHsKICAgICAgICAgIHBlcmlvZCA9IE1TRW51bS5GUlJlcG9ydFBlcmlvZFtrZXldOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcGVyaW9kOwogICAgfQogICAgLyoqDQogICAgICogVMOtbmggcmEgc+G7kSBuZ8OgeSB0aGVvIHThu6sgbmfDoHkgdsOgIMSR4bq/biBuZ8OgeQ0KICAgICAqIEBwYXJhbSB7RGF0ZX0gZnJvbURhdGUgVOG7qyBuZ8OgeQ0KICAgICAqIEBwYXJhbSB7RGF0ZX0gdG9EYXRlIMSQ4bq/biBuZ8OgeQ0KICAgICAqIEByZXR1cm4ge051bWJlcn0gdHLhuqMgduG7gSBz4buRIG5nw6B5DQogICAgICogQGF1dGhvciBubmh1bmcgMjUuMDguMjAyMA0KICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjYWN1bGF0ZURpZmZEYXlPZlJhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWN1bGF0ZURpZmZEYXlPZlJhbmdlKGZyb21EYXRlLCB0b0RhdGUpIHsKICAgICAgdmFyIE9ORV9EQVkgPSAxMDAwICogNjAgKiA2MCAqIDI0OyAvLyBDb252ZXJ0IGJvdGggZGF0ZXMgdG8gbWlsbGlzZWNvbmRzCgogICAgICB2YXIgZGF0ZTEgPSBmcm9tRGF0ZS5nZXRUaW1lKCk7CiAgICAgIHZhciBkYXRlMiA9IHRvRGF0ZS5nZXRUaW1lKCk7IC8vIENhbGN1bGF0ZSB0aGUgZGlmZmVyZW5jZSBpbiBtaWxsaXNlY29uZHMKCiAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMoZGF0ZTIgLSBkYXRlMSk7IC8vIENvbnZlcnQgYmFjayB0byBkYXlzIGFuZCByZXR1cm4KCiAgICAgIHJldHVybiBNYXRoLnJvdW5kKGRpZmYgLyBPTkVfREFZKTsKICAgIH0KICAgIC8qKg0KICAgICAqIFTDrW5oIHJhIGvhu7MgdHLGsOG7m2MgdGhlbyB04burIG5nw6B5IHbDoCDEkeG6v24gbmfDoHkNCiAgICAgKiBAcGFyYW0ge0RhdGV9IGZyb21EYXRlIFThu6sgbmfDoHkNCiAgICAgKiBAcGFyYW0ge0RhdGV9IHRvRGF0ZSDEkOG6v24gbmfDoHkNCiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHRy4bqjIHbhu4EgcmFuZ2Uge2Zyb21EYXRlOiAsIHRvRGF0ZTogfQ0KICAgICAqIEBhdXRob3Igbm5odW5nIDI1LjA4LjIwMjANCiAgICAqIEBtb2RpZmllZCBieSBuZHF1YW4gMTMuMDEuMjAyMDogc+G7rSBk4bulbmcgaMOgbSBjYWN1bGF0ZVBlcmlvZEZyb21SYW5nZUV4Y2VwdFllYXIuIFRyxrDhu51uZyBo4bujcCB0csOybiB0aMOhbmcgY+G7p2EgbsSDbSB0csaw4bubYyBu4bq/dSBkw7luZyBow6BtIGPFqSBz4bq9IHJhIHBlcmlvZCBjdXN0b20NCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAiY2FjdWxhdGVQcmV2aW91c1JhbmdlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjYWN1bGF0ZVByZXZpb3VzUmFuZ2UoZnJvbURhdGUsIHRvRGF0ZSkgewogICAgICB2YXIgcGVyaW9kID0gdGhpcy5jYWN1bGF0ZVBlcmlvZEZyb21SYW5nZUV4Y2VwdFllYXIoZnJvbURhdGUsIHRvRGF0ZSksCiAgICAgICAgICBwcmV2UGVyaW9kID0gbnVsbCwKICAgICAgICAgIHByZXZGcm9tRGF0ZSwKICAgICAgICAgIHByZXZUb0RhdGUsCiAgICAgICAgICB0aGlzTW9udGggPSBmcm9tRGF0ZS5nZXRNb250aCgpLAogICAgICAgICAgdGhpc1llYXIgPSBmcm9tRGF0ZS5nZXRGdWxsWWVhcigpOwoKICAgICAgc3dpdGNoIChwZXJpb2QpIHsKICAgICAgICAvLyBUaMOhbmcKICAgICAgICBjYXNlIFBlcmlvZC5UaGlzTW9udGg6CiAgICAgICAgY2FzZSBQZXJpb2QuTGFzdE1vbnRoOgogICAgICAgIGNhc2UgUGVyaW9kLk5leHRNb250aDoKICAgICAgICBjYXNlIFBlcmlvZC5KYW51YXJ5OgogICAgICAgIGNhc2UgUGVyaW9kLkZlYnJ1YXJ5OgogICAgICAgIGNhc2UgUGVyaW9kLk1hcmNoOgogICAgICAgIGNhc2UgUGVyaW9kLkFwcmlsOgogICAgICAgIGNhc2UgUGVyaW9kLk1heToKICAgICAgICBjYXNlIFBlcmlvZC5KdW5lOgogICAgICAgIGNhc2UgUGVyaW9kLkp1bHk6CiAgICAgICAgY2FzZSBQZXJpb2QuQXVndXN0OgogICAgICAgIGNhc2UgUGVyaW9kLlNlcHRlbWJlcjoKICAgICAgICBjYXNlIFBlcmlvZC5PY3RvYmVyOgogICAgICAgIGNhc2UgUGVyaW9kLk5vdmVtYmVyOgogICAgICAgIGNhc2UgUGVyaW9kLkRlY2VtYmVyOgogICAgICAgICAgewogICAgICAgICAgICAvLyBUaMOhbmcgMSB0aMOsIGzhuqV5IFRow6FuZyAxMiBuxINtIHRyxrDhu5tjCiAgICAgICAgICAgIGlmICh0aGlzTW9udGggPT0gMCkgewogICAgICAgICAgICAgIHByZXZGcm9tRGF0ZSA9IG5ldyBEYXRlKHRoaXNZZWFyIC0gMSwgMTEsIDEsIDAsIDAsIDApOwogICAgICAgICAgICAgIHByZXZUb0RhdGUgPSBuZXcgRGF0ZShmcm9tRGF0ZSkuYWRkRGF5cygtMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcHJldkZyb21EYXRlID0gbmV3IERhdGUodGhpc1llYXIsIHRoaXNNb250aCAtIDEsIDEsIDAsIDAsIDApOwogICAgICAgICAgICAgIHByZXZUb0RhdGUgPSBuZXcgRGF0ZShmcm9tRGF0ZSkuYWRkRGF5cygtMSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIC8vIFF1w70KCiAgICAgICAgY2FzZSBQZXJpb2QuVGhpc1F1YXJ0ZXI6CiAgICAgICAgY2FzZSBQZXJpb2QuTGFzdFF1YXJ0ZXI6CiAgICAgICAgY2FzZSBQZXJpb2QuTmV4dFF1YXJ0ZXI6CiAgICAgICAgY2FzZSBQZXJpb2QuRmlzY2FsSToKICAgICAgICBjYXNlIFBlcmlvZC5GaXNjYWxJSToKICAgICAgICBjYXNlIFBlcmlvZC5GaXNjYWxJSUk6CiAgICAgICAgY2FzZSBQZXJpb2QuRmlzY2FsSVY6CiAgICAgICAgICB7CiAgICAgICAgICAgIHZhciB0aGlzUXVhdGVyID0gMTsgLy90aGlzLmNhY3VsUXVhcnRlckJ5TW9udGgodGhpc01vbnRoKTsKICAgICAgICAgICAgLy8gUXXDvSAxIHRow6wgbOG6pXkgcXXDvSA0IG7Eg20gdHLGsOG7m2MKCiAgICAgICAgICAgIGlmICh0aGlzUXVhdGVyID09IDApIHsKICAgICAgICAgICAgICBwcmV2RnJvbURhdGUgPSB0aGlzLmZyb21RdWFydGVyKDQsIHRoaXNZZWFyIC0gMSk7CiAgICAgICAgICAgICAgcHJldlRvRGF0ZSA9IHRoaXMudG9RdWFydGVyKDQsIHRoaXNZZWFyIC0gMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcHJldkZyb21EYXRlID0gdGhpcy5mcm9tUXVhcnRlcih0aGlzUXVhdGVyIC0gMSwgdGhpc1llYXIpOwogICAgICAgICAgICAgIHByZXZUb0RhdGUgPSB0aGlzLnRvUXVhcnRlcih0aGlzUXVhdGVyIC0gMSwgdGhpc1llYXIpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvLyBTw6F1IHRow6FuZyDEkeG6p3UgbsSDbQoKICAgICAgICBjYXNlIFBlcmlvZC5TaXhGaXJzdE1vbnRoOgogICAgICAgICAgewogICAgICAgICAgICBwcmV2RnJvbURhdGUgPSBuZXcgRGF0ZSh0aGlzWWVhciAtIDEsIDYsIDEsIDAsIDAsIDApOwogICAgICAgICAgICBwcmV2VG9EYXRlID0gbmV3IERhdGUoZnJvbURhdGUpLmFkZERheXMoLTEpOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAvLyBTw6F1IHRow6FuZyBjdeG7kWkgbsSDbQoKICAgICAgICBjYXNlIFBlcmlvZC5TaXhMYXN0TW9udGg6CiAgICAgICAgICB7CiAgICAgICAgICAgIHByZXZGcm9tRGF0ZSA9IG5ldyBEYXRlKHRoaXNZZWFyLCAwLCAxLCAwLCAwLCAwKTsKICAgICAgICAgICAgcHJldlRvRGF0ZSA9IG5ldyBEYXRlKGZyb21EYXRlKS5hZGREYXlzKC0xKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgLy8gTsSDbQoKICAgICAgICBjYXNlIFBlcmlvZC5UaGlzWWVhcjoKICAgICAgICBjYXNlIFBlcmlvZC5MYXN0WWVhcjoKICAgICAgICBjYXNlIFBlcmlvZC5OZXh0WWVhcjoKICAgICAgICAgIHsKICAgICAgICAgICAgcHJldkZyb21EYXRlID0gbmV3IERhdGUodGhpc1llYXIgLSAxLCAwLCAxLCAwLCAwLCAwKTsKICAgICAgICAgICAgcHJldlRvRGF0ZSA9IG5ldyBEYXRlKGZyb21EYXRlKS5hZGREYXlzKC0xKTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB2YXIgb25lX2RheSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7CiAgICAgICAgICBwcmV2VG9EYXRlID0gbmV3IERhdGUoZnJvbURhdGUpLmFkZERheXMoLTEpOwogICAgICAgICAgdmFyIGRpZmZEYXkgPSB0aGlzLmNhY3VsYXRlRGlmZkRheU9mUmFuZ2UoZnJvbURhdGUsIHRvRGF0ZSk7CiAgICAgICAgICB2YXIgcHJldkZyb21UaW1lID0gcHJldlRvRGF0ZS5nZXRUaW1lKCkgLSBkaWZmRGF5ICogb25lX2RheTsKICAgICAgICAgIHByZXZGcm9tRGF0ZSA9IG5ldyBEYXRlKHByZXZGcm9tVGltZSk7CiAgICAgICAgICBicmVhazsKICAgICAgfQoKICAgICAgcmV0dXJuIHsKICAgICAgICBmcm9tRGF0ZTogcHJldkZyb21EYXRlLAogICAgICAgIHRvRGF0ZTogcHJldlRvRGF0ZQogICAgICB9OwogICAgfQogICAgLyoqDQogICAgICAqIFTDrW5oIHJhIGvhu7MgdGhlbyB04burIG5nw6B5IHbDoCDEkeG6v24gbmfDoHksIGtow7RuZyBxdWFuIHTDom0gbsSDbSBuw6BvLCBtaeG7hW4gbMOgIHThu6sgbmfDoHkgdsOgIMSR4bq/biBuZ8OgeSBwaOG6o2kgY8O5bmcgbsSDbS4NCiAgICAgICogQHBhcmFtIHtEYXRlfSBmcm9tRGF0ZSBU4burIG5nw6B5DQogICAgICAqIEBwYXJhbSB7RGF0ZX0gdG9EYXRlIMSQ4bq/biBuZ8OgeQ0KICAgICAgKiBAcmV0dXJucyB7bnVtYmVyfSBHacOhIHRy4buLIGPhu6dhIGvhu7MgKHRoZW8gTVNFbnVtKQ0KICAgICAgKiBAYXV0aG9yIG5kcXVhbiAxMy4wMS4yMDIwDQogICAgICAqLwoKICB9LCB7CiAgICBrZXk6ICJjYWN1bGF0ZVBlcmlvZEZyb21SYW5nZUV4Y2VwdFllYXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhY3VsYXRlUGVyaW9kRnJvbVJhbmdlRXhjZXB0WWVhcihmcm9tRGF0ZSwgdG9EYXRlKSB7CiAgICAgIGlmIChuZXcgRGF0ZShmcm9tRGF0ZSkuZ2V0RnVsbFllYXIoKSAhPSBuZXcgRGF0ZSh0b0RhdGUpLmdldEZ1bGxZZWFyKCkpIHsKICAgICAgICByZXR1cm4gdGhpcy5jYWN1bGF0ZVBlcmlvZEZyb21SYW5nZShmcm9tRGF0ZSwgdG9EYXRlKTsKICAgICAgfQoKICAgICAgdmFyIHBlcmlvZCA9IE1TRW51bS5QZXJpb2QuQ3VzdG9tOwoKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBPYmplY3Qua2V5cyhNU0VudW0uUGVyaW9kKS5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBrZXkgPSBPYmplY3Qua2V5cyhNU0VudW0uUGVyaW9kKVtpXTsKICAgICAgICB2YXIgcmFuZ2UgPSB0aGlzLmNhY3VsYXRlUmFuZ2VGcm9tUGVyaW9kKE1TRW51bS5QZXJpb2Rba2V5XSk7CgogICAgICAgIGlmIChyYW5nZS5mcm9tRGF0ZSAmJiByYW5nZS50b0RhdGUpIHsKICAgICAgICAgIGlmIChuZXcgRGF0ZShmcm9tRGF0ZSkudG9JU09TdHJpbmcoKS5zbGljZSg1LCAxMCkgPT0gbmV3IERhdGUocmFuZ2UuZnJvbURhdGUpLnRvSVNPU3RyaW5nKCkuc2xpY2UoNSwgMTApICYmIG5ldyBEYXRlKHRvRGF0ZSkudG9JU09TdHJpbmcoKS5zbGljZSg1LCAxMCkgPT0gbmV3IERhdGUocmFuZ2UudG9EYXRlKS50b0lTT1N0cmluZygpLnNsaWNlKDUsIDEwKSkgewogICAgICAgICAgICBwZXJpb2QgPSBNU0VudW0uUGVyaW9kW2tleV07CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcGVyaW9kOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIERhdGVSYW5nZTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgbmV3IERhdGVSYW5nZSgpOw=="},null]}